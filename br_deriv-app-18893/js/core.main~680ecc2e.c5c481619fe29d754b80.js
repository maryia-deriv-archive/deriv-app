"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3559],{83902:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(60216),a=n.n(r),c=n(40841),o=n.n(c),i=n(32735),l=n(4390),u=n(65597),s=n(32577),_=n(75672),f=n(20374),m=n(17502),d=n(53151);var y=function(e){var t=e.notifications,n=e.toggleDialog;return i.createElement(i.Fragment,null,t.map((function(e){return i.createElement("div",{className:"notifications-item",key:e.key},i.createElement(u.Text,{as:"h2",className:"notifications-item__title",weight:"bold",size:"xs",line_height:"m",color:"prominent"},e.type&&i.createElement(u.Icon,{icon:["contract_sold","info"].includes(e.type)?"IcAlertInfo":"IcAlert".concat((0,m.toTitleCase)(e.type)),className:o()("notifications-item__title-icon",(t={},r="notifications-item__title-icon--".concat(e.type),a=e.type,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))}),e.header),i.createElement("div",{className:"notifications-item__message"},e.message),i.createElement("div",{className:"notifications-item__action"},!(0,m.isEmptyObject)(e.action)&&i.createElement(i.Fragment,null,e.action.route?i.createElement(s.CG,{onClick:n,active_class:"notifications-item",className:o()("dc-btn","dc-btn--secondary","notifications-item__cta-button"),to:e.action.route},i.createElement(u.Text,{weight:"bold",size:"xxs"},e.action.text)):i.createElement(u.Button,{className:o()("dc-btn--secondary","notifications-item__cta-button"),onClick:e.action.onClick},i.createElement(u.Text,{weight:"bold",size:"xxs"},e.action.text)))));var t,r,a})))},p=i.forwardRef((function(e,t){var n=e.notifications,r=e.toggleDialog,a=!n.length;return i.createElement("div",{className:"notifications-dialog",ref:t},i.createElement("div",{className:"notifications-dialog__header"},i.createElement(u.Text,{as:"h2",className:"notifications-dialog__header-text",size:"s",weight:"bold",color:"prominent",styles:{lineHeight:"1.6rem"}},i.createElement(f.Localize,{i18n_default_text:"Notifications"}))),i.createElement("div",{className:o()("notifications-dialog__content",{"notifications-dialog__content--empty":a})},i.createElement(u.ThemedScrollbars,{is_bypassed:(0,m.isMobile)()||a},a?i.createElement(d.X,null):i.createElement(y,{notifications:n,toggleDialog:r}))))}));p.displayName="NotificationListWrapper";var h=function(e){var t=e.is_visible,n=e.notifications,r=e.toggleDialog,a=i.useRef();return(0,u.useOnClickOutside)(a,(function(e){var n,c=!e.target.classList.contains("notifications-toggle__icon-wrapper");null!==(n=a.current)&&void 0!==n&&n.contains(e.target)||!t||!c||r()})),i.createElement(i.Fragment,null,i.createElement(u.MobileWrapper,null,i.createElement(u.MobileDialog,{portal_element_id:"modal_root",title:(0,f.localize)("Notifications"),wrapper_classname:"notifications-mobile-dialog",visible:t,onClose:r},i.createElement(p,{notifications:n,ref:a,toggleDialog:r}))),i.createElement(u.DesktopWrapper,null,i.createElement(l.Z,{in:t,classNames:{enter:"notifications-dialog--enter",enterDone:"notifications-dialog--enter-done",exit:"notifications-dialog--exit"},timeout:150,unmountOnExit:!0},i.createElement(p,{notifications:n,ref:a,toggleDialog:r}))))};h.propTypes={is_visible:a().bool,notifications:a().array,toggleDialog:a().func};const g=(0,_.$j)((function(e){var t=e.ui,n=e.common;return{notifications:t.filtered_notifications,app_routing_history:n.app_routing_history,removeNotificationByKey:t.removeNotificationByKey,removeNotificationMessage:t.removeNotificationMessage}}))(h)},20903:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(32735),a=n(17502);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var l="is_dashboard";const u=function(e){var t=i({},e),n=!!window.localStorage.getItem(l)&&"true"===window.localStorage.getItem(l),o=c(r.useState(n),2),u={is_dashboard:o[0],setDerivDashboard:o[1],DERIV_DASHBOARD_KEY:l};return r.createElement(a.PlatformContext.Provider,i({value:u},t))}},76541:(e,t,n)=>{n.d(t,{Z:()=>J});var r=n(40841),a=n.n(r),c=n(60216),o=n.n(c),i=n(19465),l=n.n(i),u=n(32735),s=n(65597),_=n(17502),f=n(20374),m=n(75672),d=n(58226),y=n(71838);const p=function(e){var t=e.onSubmit;return u.createElement(y.Formik,{initialValues:{},onSubmit:t,validateOnMount:!0},(function(e){var t=e.handleSubmit;return u.createElement(s.AutoHeightWrapper,{default_height:200},(function(e){var n=e.setRef,r=e.height;return u.createElement("form",{ref:n,onSubmit:t,className:"accept-risk__form"},u.createElement(s.Div100vhContainer,{className:"details-form",height_offset:"40px",is_disabled:(0,_.isDesktop)()},u.createElement(s.ThemedScrollbars,{autoHide:!(window.innerHeight<890),height:r-77},u.createElement("div",{className:"accept-risk__container"},u.createElement("div",{className:"accept-risk__header"},u.createElement(s.Text,{weight:"bold",size:"xs"},(0,f.localize)("Warning"))),u.createElement(s.Text,{as:"p",size:"xs"},u.createElement(f.Localize,{i18n_default_text:"Our products and services may expose you to risks that can be substantial at times, including the risk of losing your entire investment. Please note that by clicking <0>Continue</0>, you'll be accepting these risks.",components:[u.createElement("strong",{key:0})]}))))),u.createElement("input",{name:"accept_risk",value:"1",type:"hidden"}),u.createElement(s.Modal.Footer,{has_separator:!0,is_bypassed:(0,_.isMobile)()},u.createElement(s.FormSubmitButton,{is_absolute:(0,_.isMobile)(),label:(0,f.localize)("Continue")})))}))}))};var h=n(78247),g=n.n(h),b=n(86245),v=n.n(b),w=n(80046),S=n.n(w),E=n(7335),A=n.n(E),C=n(1537),x=n.n(C),z=n(71711),N=n.n(z),k=n(39979),O=n.n(k),j=n(24846),T=n(26677),I=n(67027),L=n.n(I);const R=(0,m.$j)((function(e){var t=e.client;return{is_gb_residence:"gb"===t.residence,fetchStatesList:t.fetchStatesList,states_list:t.states_list}}))(L());function P(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){return"samoa"!==e.real_account_signup_target},M=function(e){return[].concat(P(F(e)?[g()(e,j.Z)]:[]),P(F(e)?[v()(e,x())]:[]),P(F(e)?[S()(e,R)]:[]),P("maltainvest"===e.real_account_signup_target?[A()(e,T.Z)]:[]),[N()(e,O())])};function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Y(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e){var t=e.has_target,n=e.has_real_account,r=e.items,a=e.getCurrentStep,c=e.getTotalSteps,o=a()-1,i=r[o].header?r[o].header.title:"";return u.createElement(u.Fragment,null,(!n||t)&&u.createElement(u.Fragment,null,u.createElement(s.DesktopWrapper,null,u.createElement(s.FormProgress,{steps:r,current_step:o})),u.createElement(s.MobileWrapper,null,u.createElement("div",{className:"account-wizard__header-steps"},u.createElement(s.Text,{as:"h4",styles:{lineHeight:"20px",color:"var(--brand-red-coral)"},size:"xs",weight:"bold",className:"account-wizard__header-steps-title"},u.createElement(f.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:o+1,steps:c(),step_title:i}}))))))},G=function(e){var t=H(u.useState(void 0),1)[0],n=H(u.useState(!1),2),r=n[0],c=n[1],o=H(u.useState(""),2),i=o[0],f=o[1],m=H(u.useState([]),2),y=m[0],h=m[1],g=H(u.useState([]),2),b=g[0],v=g[1],w=H(u.useState(!1),2),S=w[0],E=w[1];u.useEffect((function(){e.fetchStatesList();var t=(0,_.makeCancellablePromise)(e.fetchResidenceList()),n=t.cancel,r=t.promise,a=(0,_.makeCancellablePromise)(e.fetchFinancialAssessment()),o=a.cancel,i=a.promise;return Promise.all([r,i]).then((function(){v((function(t){return t.length?t:M(e)})),h(A()),c(!0)})),function(){n(),o()}}),[]),u.useEffect((function(){if(y.length>0){var e=Y(b);y.forEach((function(t,n){t instanceof Object&&(e[n].form_value=t)})),v(e),h([])}}),[y]),u.useEffect((function(){if(e.residence_list.length){C(e.residence_list).then((function(t){var n,r;(r=b.length?b:M(e)).length>1&&"phone"in(null===(n=r[1])||void 0===n?void 0:n.form_value)&&(r[1].form_value.phone=r[1].form_value.phone||t||"",v(r))}))}}),[e.residence_list]);var A=function(){var e=localStorage.getItem("real_account_signup_wizard");try{return JSON.parse(e)||[]}catch(e){return[]}finally{localStorage.removeItem("real_account_signup_wizard")}},C=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.find((function(t){return t.value===e.residence})))&&r.phone_idd){t.next=3;break}return t.abrupt("return","");case 3:return t.abrupt("return","+".concat(r.phone_idd));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){V(c,r,a,o,i,"next",e)}function i(e){V(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}(),x=function(){return b.map((function(e){return e.form_value})).reduce((function(t,n){var r=l()(new Map(Object.entries(n))),a=Object.keys(r).reduce((function(e,t){return e[t]="string"==typeof r[t]?r[t].trim():r[t],e}),{});return a.date_of_birth&&(a.date_of_birth=(0,_.toMoment)(a.date_of_birth).format("YYYY-MM-DD")),a.place_of_birth&&(a.place_of_birth=a.place_of_birth?(0,_.getLocation)(e.residence_list,a.place_of_birth,"value"):""),a.citizen&&(a.citizen=a.citizen?(0,_.getLocation)(e.residence_list,a.citizen,"value"):""),a.tax_residence&&(a.tax_residence=a.tax_residence?(0,_.getLocation)(e.residence_list,a.tax_residence,"value"):a.tax_residence),B(B({},t),a)}))},z=function(){f("")},N=function(t,n){t-1<0?e.onClose():(n(),z())},k=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=B({},x());return null===(t=r)||void 0===t||delete t.tax_identification_confirm,n&&(r=B(B({},r),n)),e.realAccountSignup(r)},O=function(e,t,n,r){j(e,t),z(),e+1>=b.length?I():r()},j=function(e,t){var n=Object.assign([],b);n[e].form_value=t,v(n)},T=function(e,t){return e?b[t][e]:b[t]},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.setLoading(!0),k(t).then((function(t){e.setIsRiskWarningVisible(!1),"maltainvest"===e.real_account_signup_target?e.onFinishSuccess(t.new_account_maltainvest.currency.toLowerCase()):"samoa"===e.real_account_signup_target?e.onOpenWelcomeModal(t.new_account_samoa.currency.toLowerCase()):e.onFinishSuccess(t.new_account_real.currency.toLowerCase())})).catch((function(t){"show risk disclaimer"===t.code?(e.setIsRiskWarningVisible(!0),E(!0)):e.onError(t,b)})).finally((function(){return e.setLoading(!1)}))};if(e.is_loading)return u.createElement(d.Z,null);if(S)return u.createElement(p,{onSubmit:function(){I({accept_risk:1})}});if(!r)return null;if(!t){var L=b.map((function(t,n){var r=function(t){var n=T("passthrough",t),r=T("props",t)||{};return n&&n.length&&(n.forEach((function(t){Object.assign(r,$({},t,e[t]))})),r.bypass_to_personal=y.length>0),r}(n),a=t.body;return u.createElement(a,Z({value:T("form_value",n),index:n,onSubmit:O,onCancel:N,onSave:j,has_currency:e.has_currency,form_error:i},r,{key:n}))})),R=u.createElement("div",null);return"samoa"!==e.real_account_signup_target&&(R=u.createElement(q,{has_real_account:e.has_real_account,items:b,has_currency:e.has_currency,has_target:"manage"!==e.real_account_signup_target,setIsRiskWarningVisible:e.setIsRiskWarningVisible})),u.createElement(s.Wizard,{nav:R,className:a()("account-wizard",{"account-wizard--set-currency":!e.has_currency,"account-wizard--deriv-crypto":"samoa"===e.real_account_signup_target})},L)}var P=t;return u.createElement(P,null)};G.propTypes={fetchResidenceList:o().func,has_currency:o().bool,has_real_account:o().bool,onError:o().func,onLoading:o().func,onFinishSuccess:o().func,onOpenWelcomeModal:o().func,realAccountSignup:o().func,residence:o().string,residence_list:o().array};const J=(0,m.$j)((function(e){var t=e.client,n=e.ui;return{account_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,realAccountSignup:t.realAccountSignup,has_real_account:t.has_active_real_account,upgrade_info:t.upgrade_info,real_account_signup_target:n.real_account_signup_target,has_currency:!!t.currency,residence:t.residence,residence_list:t.residence_list,states_list:t.states_list,fetchStatesList:t.fetchStatesList,fetchResidenceList:t.fetchResidenceList,refreshNotifications:t.refreshNotifications,fetchFinancialAssessment:t.fetchFinancialAssessment,financial_assessment:t.financial_assessment}}))(G)},57245:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(71838),a=n(60216),c=n.n(a),o=n(32735),i=n(65597),l=n(20374),u=n(75672),s=n(17502),_=n(75594),f=n.n(_),m=n(71857),d=n.n(m),y=function(){return[o.createElement(l.Localize,{key:0,i18n_default_text:"Choose your preferred cryptocurrency"}),o.createElement(l.Localize,{key:1,i18n_default_text:"You can open an account for each cryptocurrency."}),o.createElement(l.Localize,{key:2,i18n_default_text:"Add a real account"}),o.createElement(l.Localize,{key:3,i18n_default_text:"Choose a currency you would like to trade with."}),o.createElement(l.Localize,{key:4,i18n_default_text:"Choose a currency"})]},p=function(e){var t=e.heading,n=e.subheading;return o.createElement(o.Fragment,null,o.createElement(i.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},t),o.createElement(i.Text,{as:"h3",size:"xxs",color:"prominent",align:"center",className:"add-crypto-currency__sub-title"},n))},h="crypto",g=function(e){var t=e.available_crypto_currencies,n=e.form_error,a=e.has_fiat,c=e.is_add_fiat,u=e.legal_allowed_currencies,_=e.onClickBack,m=e.onSubmit,g=e.should_show_cancel,b=e.should_show_crypto_only,v=e.should_show_fiat_only,w=e.value,S=e.hasNoAvailableCrypto,E=function(){return(0,s.reorderCurrencies)(u.filter((function(e){return"fiat"===e.type})))},A=function(){return(0,s.reorderCurrencies)(u.filter((function(e){return e.type===h})),h)},C=function(){return!a&&!b},x=function(e){return-1===t.map((function(e){return e.value})).indexOf(e.value)};return o.createElement(r.Formik,{initialValues:{currency:w.currency},onSubmit:function(e,t){m(!1,e,t.setSubmitting)}},(function(e){var a=e.handleSubmit,u=e.values,m=e.errors,h=e.touched,b=e.isSubmitting;return o.createElement("form",{onSubmit:a},!C()&&o.createElement(p,{heading:y()[0],subheading:y()[1]}),C()&&o.createElement(p,{heading:c?y()[4]:y()[2],subheading:y()[3]}),C()&&o.createElement(o.Fragment,null,o.createElement(i.ThemedScrollbars,null,o.createElement(f(),{id:"fiat_currency",is_fiat:!0,className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:u.currency,error:m.currency,touched:h.currency,is_title_enabled:C(),item_count:E().length},E().map((function(e){return o.createElement(r.Field,{key:e.value,component:d(),name:"currency",id:e.value,label:e.name})}))))),C()&&o.createElement(i.Text,{as:"p",color:"prominent",size:"xxs",align:"center",className:"currency-selector__deposit-warn"},o.createElement(l.Localize,{i18n_default_text:"Youâ€™ll not be able to change currency once you have made a deposit."})),S()&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement(i.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},(0,l.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:s.website_name}))),!v&&(0!==t.length?o.createElement(i.ThemedScrollbars,null,o.createElement(f(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,l.localize)("Cryptocurrencies"),value:u.currency,error:m.currency,touched:h.currency,is_title_enabled:C(),item_count:A().length},A().map((function(e){return o.createElement(r.Field,{key:e.value,component:d(),name:"currency",id:e.value,label:e.name,selected:x(e)})})))):o.createElement(i.ThemedScrollbars,null,o.createElement(f(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,l.localize)("Cryptocurrencies"),is_title_enabled:C(),item_count:A().length},A().map((function(e){return o.createElement(r.Field,{key:e.value,component:d(),name:"currency",id:e.value,label:e.name,selected:!0})}))))),o.createElement(i.FormSubmitButton,{className:"currency-selector__button",is_disabled:b||!u.currency,label:(0,l.localize)("Add account"),is_absolute:!(0,s.isMobile)(),form_error:n,has_cancel:g,cancel_label:(0,l.localize)("Back"),cancel_icon:o.createElement(i.Icon,{icon:"IcArrowLeftBold"}),onCancel:function(){return _()}}))}))};g.propTypes={available_crypto_currencies:c().array,legal_allowed_currencies:c().array,has_fiat:c().bool,hasNoAvailableCrypto:c().func,form_error:c().string,onSubmit:c().func,should_show_cancel:c().bool,should_show_crypto_only:c().bool,should_show_fiat_only:c().bool,value:c().shape({crypto:c().string,fiat:c().string})};const b=(0,u.$j)((function(e){var t=e.client,n=e.ui;return{available_crypto_currencies:t.available_crypto_currencies,legal_allowed_currencies:t.upgradeable_currencies,has_fiat:t.has_fiat,should_show_cancel:n.should_show_cancel}}))(g)},63156:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(71838),a=n(40841),c=n.n(a),o=n(60216),i=n.n(o),l=n(32735),u=n(65597),s=n(20374),_=n(17502),f=n(75672),m=n(75594),d=n.n(m),y=n(71857),p=n.n(y),h=n(57245),g=n(82835);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w="crypto",S=function(e){var t=e.all_payment_agent_list,n=e.available_crypto_currencies,a=e.has_fiat,o=e.legal_allowed_currencies,i=e.onSubmit,f=e.openRealAccountSignup,m=e.setShouldShowAllAvailableCurrencies,y=e.deposit_target,v=e.hasNoAvailableCrypto,S=e.is_add_crypto,E=e.is_add_fiat,A=b(l.useState(""),1)[0],C=b(l.useState({crypto:"",fiat:""}),1)[0],x=g.Z.currenciesPaymentAgentAvailability(o,t),z=function(){return(0,_.reorderCurrencies)(null==x?void 0:x.filter((function(e){return e.type===w&&n.some((function(t){return t.value===e.value}))})),w)},N=function(){return(0,_.reorderCurrencies)(null==x?void 0:x.filter((function(e){return"fiat"===e.type&&!n.some((function(t){return t.value===e.value}))})))},k=function(){f("choose"),y===_.routes.cashier_pa&&m(!0)},O=function(){return l.createElement("div",null,l.createElement(u.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-currency__title"},(0,s.localize)("Fiat currencies")),!!a&&l.createElement(u.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__sub-title"},(0,s.localize)("You are limited to one fiat account only.")),l.createElement(d(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:N().length},N().map((function(e){return l.createElement(r.Field,{key:e.value,component:p(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:a})}))))},j=function(){return l.createElement("div",null,l.createElement(u.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-currency__title"},(0,s.localize)("Cryptocurrencies")),l.createElement(u.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__sub-title"},(0,s.localize)("You can open an account for each cryptocurrency.")),l.createElement(d(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:z().length},z().map((function(e){return l.createElement(r.Field,{key:e.value,component:p(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:y===_.routes.cashier_pa&&!e.has_payment_agent})}))))};return S?l.createElement(u.ThemedScrollbars,{autohide:!1},l.createElement("div",{className:c()("add-crypto-currency",{"account-wizard--disabled":v()})},l.createElement(h.Z,{className:"account-wizard__body",onSubmit:i,onClickBack:k,value:C,form_error:A,should_show_crypto_only:!0,hasNoAvailableCrypto:v}))):E?l.createElement(u.ThemedScrollbars,{autohide:!1},l.createElement("div",{className:"change-currency"},l.createElement(h.Z,{className:"account-wizard__body",onSubmit:i,value:C,form_error:A,should_show_fiat_only:!0,hasNoAvailableCrypto:v,is_add_fiat:!0}))):l.createElement(r.Formik,{initialValues:{currency:C.currency},onSubmit:function(e,t){i(!1,e,t.setSubmitting)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.isSubmitting;return l.createElement("form",{onSubmit:t},l.createElement(u.ThemedScrollbars,{height:(0,_.isMobile)()?window.innerHeight-190:"460px"},l.createElement("div",null,l.createElement(u.Text,{as:"p",color:"prominent",weight:"bold",align:"center",className:"add-currency__wizard-header"},(0,s.localize)("Choose your currency")),l.createElement(O,null),l.createElement("div",{className:"add-currency__underline"}),l.createElement(j,null))),l.createElement("div",{className:"add-currency__note-wrapper"},l.createElement(u.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__note"},(0,s.localize)("Some currencies may not be supported by payment agents in your country."))),l.createElement(u.FormSubmitButton,{className:"currency-selector__button",is_disabled:r||!n.currency,label:(0,s.localize)("Add account"),is_absolute:!0,form_error:A,has_cancel:!0,cancel_label:(0,s.localize)("Back"),cancel_icon:l.createElement(u.Icon,{icon:"IcArrowLeftBold"}),onCancel:function(){return k()}}))}))};S.propTypes={all_payment_agent_list:i().array,available_crypto_currencies:i().array,has_fiat:i().bool,legal_allowed_currencies:i().array,openRealAccountSignup:i().func,setShouldShowAllAvailableCurrencies:i().func,deposit_target:i().string};const E=(0,f.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{all_payment_agent_list:n.cashier.all_payment_agent_list,available_crypto_currencies:t.available_crypto_currencies,has_fiat:t.has_fiat,legal_allowed_currencies:t.upgradeable_currencies,openRealAccountSignup:r.openRealAccountSignup,setShouldShowAllAvailableCurrencies:n.cashier.setShouldShowAllAvailableCurrencies,deposit_target:n.cashier.deposit_target}}))(S)},81070:(e,t,n)=>{n.d(t,{Z:()=>z});var r=n(40841),a=n.n(r),c=n(60216),o=n.n(c),i=n(32735),l=n(65597),u=n(20374),s=n(17502),_=n(58468),f=n(75672),m=n(57245),d=n(63156),y=n(71838),p=n(75594),h=n.n(p),g=n(71857),b=n.n(g),v=function(e){var t,n=e.legal_allowed_currencies,r=e.value,a=e.onSubmit,c=e.form_error,o=e.can_change_fiat_currency,_=e.client_currency,f=e.current_currency_type,m=e.current_fiat_currency,d=function(){return(0,s.reorderCurrencies)(n.filter((function(e){return"fiat"===e.type})))},p="fiat"===f,g=i.createElement(u.Localize,{i18n_default_text:"We can't change your account currency as you've either made a deposit into your {{currency}} account or created a real account on DMT5.",values:{currency:(0,s.getCurrencyDisplayCode)(_)}}),v=i.createElement(u.Localize,{i18n_default_text:"Please switch to your {{fiat_currency}} account to change currencies.",values:{fiat_currency:null==m||null===(t=m.toUpperCase)||void 0===t?void 0:t.call(m)}}),w=p?g:v;return i.createElement(y.Formik,{initialValues:{fiat:r.fiat},onSubmit:function(e,t){a(!1,e,t.setSubmitting)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.errors,a=e.touched,f=e.isSubmitting;return i.createElement("form",{onSubmit:function(e){e.preventDefault(),t()}},i.createElement(l.Text,{as:"h1",color:"prominent",weight:"bold",align:"center",className:"change-currency__title"},i.createElement(u.Localize,{i18n_default_text:"Change your currency"})),i.createElement(l.Text,{as:"h3",size:"xxs",align:"center",className:"change-currency__sub-title"},i.createElement(u.Localize,{i18n_default_text:"Choose the currency you would like to trade with."})),!o&&i.createElement("div",{className:"account-wizard--disabled-message"},i.createElement(l.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},w)),i.createElement(h(),{id:"fiat",label:(0,u.localize)("Cryptocurrencies"),className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:n.fiat,error:r.fiat,touched:a.fiat,is_title_enabled:!1,item_count:d().length},d().map((function(e){return i.createElement(y.Field,{key:e.value,component:b(),name:"fiat",id:e.value,label:e.name,selected:e.value===_})}))),i.createElement(l.FormSubmitButton,{className:"change-currency__button",is_disabled:f||!n.fiat,label:(0,u.localize)("Change currency"),is_absolute:!(0,s.isMobile)(),form_error:c}))}))};v.propTypes={legal_allowed_currencies:o().array,onSubmit:o().func,value:o().shape({crypto:o().string,fiat:o().string}),form_error:o().string,can_change_fiat_currency:o().bool,currency:o().string,current_currency_type:o().string,current_fiat_currency:o().string,client_currency:o().string};const w=(0,f.$j)((function(e){var t=e.client;return{legal_allowed_currencies:t.upgradeable_currencies,client_currency:t.currency,current_fiat_currency:t.current_fiat_currency}}))(v);var S=n(58226);function E(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=e.available_crypto_currencies,n=e.can_change_fiat_currency,r=e.createCryptoAccount,c=e.current_currency_type,o=e.deposit_target,f=e.has_fiat,y=e.is_add_crypto,p=e.is_add_currency,h=e.is_add_fiat,g=e.is_eu,b=e.is_loading,v=e.manage_real_account_tab_index,C=e.onError,x=e.onSuccessSetAccountCurrency,z=e.resetRealAccountSignupTarget,N=e.setCurrency,k=e.setLoading,O=e.setIsDeposit,j=e.setShouldShowCancel,T=(null!=v?v:f&&0===(null==t?void 0:t.length))?1:0,I=A(i.useState(T),2),L=I[0],R=I[1],P=A(i.useState(""),1)[0],D=A(i.useState({crypto:"",fiat:""}),1)[0];i.useEffect((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,_.WS.mt5LoginList();case 3:k(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){E(c,r,a,o,i,"next",e)}function i(e){E(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return e(),function(){return j(!1)}}),[]);var F=function(e,t,n){!function(e,t){k(!0),Object.entries(e).map((function(e){var n=A(e,2),a=n[0],c=n[1];"fiat"===a?N(c).then((function(e){t(!1),x(e.passthrough.previous_currency,e.echo_req.set_account_currency,o)})).catch((function(e){C(e)})).finally((function(){return k(!1)})):r(c).then((function(){x("",c,o),t(!1),z(),O(!0)})).catch((function(e){C(e)})).finally((function(){return k(!1)}))}))}(t,n)},M=function(){return 0===t.length&&f};if(b)return i.createElement(S.Z,null);var Z=f&&i.createElement("div",{className:a()("change-currency",{"account-wizard--disabled":!n})},i.createElement(w,{className:"account-wizard__body",onSubmit:F,value:D,form_error:P,can_change_fiat_currency:n,current_currency_type:c}));return p||y||h?i.createElement(d.Z,{onSubmit:F,value:D,form_error:P,should_show_crypto_only:!0,hasNoAvailableCrypto:M,is_add_crypto:y,is_add_fiat:h,is_add_currency:p}):i.createElement(l.ThemedScrollbars,{is_bypassed:(0,s.isMobile)(),autohide:!1},g&&f?Z:i.createElement(l.Tabs,{active_index:L,className:"account-wizard add-or-manage tabs--desktop",onTabItemClick:function(e){R(e)},top:!0,header_fit_content:(0,s.isDesktop)()},i.createElement("div",{label:(0,u.localize)("Cryptocurrencies")},i.createElement("div",{className:a()("add-crypto-currency",{"account-wizard--disabled":M()})},i.createElement(m.Z,{className:"account-wizard__body",onSubmit:F,value:D,form_error:P,should_show_crypto_only:!0,hasNoAvailableCrypto:M}))),i.createElement("div",{label:(0,u.localize)("Fiat currencies")},f?Z:i.createElement(m.Z,{className:"account-wizard__body",onSubmit:F,value:D,form_error:P,should_show_fiat_only:!0,hasNoAvailableCrypto:M}))))};x.propTypes={available_crypto_currencies:o().arrayOf({fractional_digits:o().number,is_deposit_suspended:o().number,is_suspended:o().number,is_withdrawal_suspended:o().number,name:o().string,stake_default:o().number,transfer_between_accounts:o().object,type:o().string,value:o().string}),onError:o().func,onLoading:o().func,onSuccessSetAccountCurrency:o().func,is_eu:o().bool,setCurrency:o().func,createCryptoAccount:o().func,has_fiat:o().bool,can_change_fiat_currency:o().bool,current_currency_type:o().string,is_loading:o().bool,is_add_crypto:o().bool,setLoading:o().func,setShouldShowCancel:o().func};const z=(0,f.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{available_crypto_currencies:t.available_crypto_currencies,can_change_fiat_currency:t.can_change_fiat_currency,current_currency_type:t.current_currency_type,current_fiat_currency:t.current_fiat_currency,has_fiat:t.has_fiat,is_eu:t.is_eu,manage_real_account_tab_index:r.manage_real_account_tab_index,setCurrency:t.setAccountCurrency,setShouldShowCancel:r.setShouldShowCancel,createCryptoAccount:t.createCryptoAccount,resetRealAccountSignupTarget:r.resetRealAccountSignupTarget,setIsDeposit:n.cashier.setIsDeposit}}))(x)},82835:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>o});const o={currenciesPaymentAgentAvailability:function(e,t){var n=[];return e.forEach((function(e){var r;n.push(a(a({},e),{},{has_payment_agent:!(null==t||null===(r=t.paymentagent_list)||void 0===r||!r.list.filter((function(t){return t.currencies===e.value})).length)}))})),n}}},38989:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(71838),a=n(60216),c=n.n(a),o=n(32735),i=n(65597),l=n(20374),u=n(17502),s=n(75672),_=n(75594),f=n.n(_),m=n(71857),d=n.n(m),y=n(82835);function p(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){p(c,r,a,o,i,"next",e)}function i(e){p(c,r,a,o,i,"throw",e)}o(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v="crypto",w=function(e){var t=e.account_list,n=e.all_payment_agent_list,a=e.available_crypto_currencies,c=e.closeRealAccountSignup,s=e.continueRouteAfterChooseCrypto,_=e.currency_title,m=e.deposit_target,p=e.has_fiat,b=e.legal_allowed_currencies,w=e.openRealAccountSignup,S=e.switchAccount,E=e.should_show_all_available_currencies,A=e.setShouldShowCancel,C=e.setShouldShowAllAvailableCurrencies,x=g(o.useState(""),1)[0],z=g(o.useState({crypto:""}),1)[0];o.useEffect((function(){return function(){return C(!1)}}),[C]);var N=function(){return 0===(null==b?void 0:b.filter((function(e){return e.type===v&&!t.some((function(t){return t.title===e.value}))})).length)},k=function(){var e=y.Z.currenciesPaymentAgentAvailability(b,n),r=E?(0,u.reorderCurrencies)(null==e?void 0:e.filter((function(e){return t.some((function(t){return t.title===e.value}))})),v):(0,u.reorderCurrencies)(null==e?void 0:e.filter((function(e){return e.type===v&&!a.some((function(t){return t.value===e.value}))})),v);return(m===u.routes.cashier_pa&&!p||!N())&&r.push({value:"plus",name:m===u.routes.cashier_pa?(0,l.localize)("Add a new"):(0,l.localize)("Add new"),second_line_label:m===u.routes.cashier_pa?(0,l.localize)("account"):(0,l.localize)("crypto account"),icon:"IcAddAccount",onClick:function(){return w(m===u.routes.cashier_pa?"add_currency":"add_crypto"),void A(!0)},has_payment_agent:!0}),r},O=function(){var e=h(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filter((function(e){return e.title===n})),a=r.map((function(e){return e.loginid}))[0],e.next=4,S(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(t).map((function(e){var t=g(e,2),n=t[0],r=t[1];n&&(c(),r!==_&&O(r),s())}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.createElement(r.Formik,{initialValues:{currency:z.currency},onSubmit:function(e){j(e)}},(function(e){var t=e.handleSubmit,n=e.values,a=e.isSubmitting;return o.createElement("form",{onSubmit:t},o.createElement(i.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},m===u.routes.cashier_pa?(0,l.localize)("Choose an account or add a new one"):(0,l.localize)("Choose one of your accounts or add a new cryptocurrency account")),o.createElement(i.ThemedScrollbars,null,o.createElement(f(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:k().length},k().map((function(e){return o.createElement(r.Field,{key:e.value,component:d(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:m===u.routes.cashier_pa&&!e.has_payment_agent})})))),o.createElement(i.FormSubmitButton,{className:"currency-selector__button",is_disabled:a||!n.currency,label:(0,l.localize)("Continue"),is_absolute:!0,form_error:x}))}))};w.propTypes={account_list:c().array,available_crypto_currencies:c().array,closeRealAccountSignup:c().func,continueRouteAfterChooseCrypto:c().func,currency_title:c().string,has_fiat:c().bool,legal_allowed_currencies:c().array,openRealAccountSignup:c().func,setShouldShowCancel:c().func,switchAccount:c().func};const S=(0,s.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{account_list:t.account_list,all_payment_agent_list:n.cashier.all_payment_agent_list,available_crypto_currencies:t.available_crypto_currencies,closeRealAccountSignup:r.closeRealAccountSignup,continueRouteAfterChooseCrypto:r.continueRouteAfterChooseCrypto,currency_title:t.currency,deposit_target:n.cashier.deposit_target,has_fiat:t.has_fiat,legal_allowed_currencies:t.upgradeable_currencies,openRealAccountSignup:r.openRealAccountSignup,setShouldShowCancel:r.setShouldShowCancel,switchAccount:t.switchAccount,should_show_all_available_currencies:n.cashier.should_show_all_available_currencies,setShouldShowAllAvailableCurrencies:n.cashier.setShouldShowAllAvailableCurrencies}}))(w)}}]);