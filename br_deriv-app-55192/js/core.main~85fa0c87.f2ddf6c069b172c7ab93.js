"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1982],{83902:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(60216),a=n.n(r),o=n(40841),i=n.n(o),c=n(32735),l=n(4390),s=n(11838),u=n(32577),_=n(75672),d=n(20374),m=n(90004),f=n(53151);var p=function(e){var t=e.notifications,n=e.toggleDialog;return c.createElement(c.Fragment,null,t.map((function(e){return c.createElement("div",{className:"notifications-item",key:e.key},c.createElement(s.Text,{as:"h2",className:"notifications-item__title",weight:"bold",size:"xs",line_height:"m",color:"prominent"},e.type&&c.createElement(s.Icon,{icon:["contract_sold","info"].includes(e.type)?"IcAlertInfo":"IcAlert".concat((0,m.toTitleCase)(e.type)),className:i()("notifications-item__title-icon",(t={},r="notifications-item__title-icon--".concat(e.type),a=e.type,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))}),e.header),c.createElement("div",{className:"notifications-item__message"},e.message),c.createElement("div",{className:"notifications-item__action"},!(0,m.isEmptyObject)(e.action)&&c.createElement(c.Fragment,null,e.action.route?c.createElement(u.CG,{onClick:n,active_class:"notifications-item",className:i()("dc-btn","dc-btn--secondary","notifications-item__cta-button"),to:e.action.route},c.createElement(s.Text,{weight:"bold",size:"xxs"},e.action.text)):c.createElement(s.Button,{className:i()("dc-btn--secondary","notifications-item__cta-button"),onClick:e.action.onClick},c.createElement(s.Text,{weight:"bold",size:"xxs"},e.action.text)))));var t,r,a})))},g=c.forwardRef((function(e,t){var n=e.notifications,r=e.toggleDialog,a=!n.length;return c.createElement("div",{className:"notifications-dialog",ref:t},c.createElement("div",{className:"notifications-dialog__header"},c.createElement(s.Text,{as:"h2",className:"notifications-dialog__header-text",size:"s",weight:"bold",color:"prominent",styles:{lineHeight:"1.6rem"}},c.createElement(d.Localize,{i18n_default_text:"Notifications"}))),c.createElement("div",{className:i()("notifications-dialog__content",{"notifications-dialog__content--empty":a})},c.createElement(s.ThemedScrollbars,{is_bypassed:(0,m.isMobile)()||a},a?c.createElement(f.X,null):c.createElement(p,{notifications:n,toggleDialog:r}))))}));g.displayName="NotificationListWrapper";var h=function(e){var t=e.is_visible,n=e.notifications,r=e.toggleDialog,a=c.useRef();return(0,s.useOnClickOutside)(a,(function(e){var n,o=!e.target.classList.contains("notifications-toggle__icon-wrapper");null!==(n=a.current)&&void 0!==n&&n.contains(e.target)||!t||!o||r()})),c.createElement(c.Fragment,null,c.createElement(s.MobileWrapper,null,c.createElement(s.MobileDialog,{portal_element_id:"modal_root",title:(0,d.localize)("Notifications"),wrapper_classname:"notifications-mobile-dialog",visible:t,onClose:r},c.createElement(g,{notifications:n,ref:a,toggleDialog:r}))),c.createElement(s.DesktopWrapper,null,c.createElement(l.Z,{in:t,classNames:{enter:"notifications-dialog--enter",enterDone:"notifications-dialog--enter-done",exit:"notifications-dialog--exit"},timeout:150,unmountOnExit:!0},c.createElement(g,{notifications:n,ref:a,toggleDialog:r}))))};h.propTypes={is_visible:a().bool,notifications:a().array,toggleDialog:a().func};const y=(0,_.$j)((function(e){var t=e.common,n=e.notifications;return{notifications:n.filtered_notifications,app_routing_history:t.app_routing_history,removeNotificationByKey:n.removeNotificationByKey,removeNotificationMessage:n.removeNotificationMessage}}))(h)},78568:(e,t,n)=>{n.d(t,{FX:()=>a,GH:()=>o,Sj:()=>i});var r=n(20374),a={SUCCESS:1,WARN:0,DANGER:-1,PENDING:-2},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.account_residence,a=void 0===n?"":n,o=arguments.length>2?arguments[2]:void 0;if("im"===a)return(0,r.localize)("Deriv account");switch(e){case"svg":return(0,r.localize)("Deriv account");case"iom":return o.is_united_kingdom?(0,r.localize)("Deriv Gaming"):(0,r.localize)("Deriv Synthetic");case"malta":return o.is_united_kingdom||o.is_rest_of_eu||o.is_belgium?(0,r.localize)("Options"):(0,r.localize)("Deriv Synthetic");case"maltainvest":return o.is_united_kingdom||o.is_france||o.is_other_eu||o.is_rest_of_eu?(0,r.localize)("Multipliers"):(0,r.localize)("Deriv Financial");default:return(0,r.localize)("Deriv")}},i=function(e){var t=e.landing_company_shortcode,n=void 0===t?"":t,r=e.is_fully_authenticated,o=void 0!==r&&r,i=e.is_age_verified,c=void 0!==i&&i,l=e.is_isle_of_man_residence,s=void 0!==l&&l,u=e.is_belgium_residence;return"svg"===n||s||void 0!==u&&u?a.SUCCESS:"iom"===n?o?a.SUCCESS:c?a.WARN:a.DANGER:a.SUCCESS}},78497:(e,t,n)=>{n.d(t,{l:()=>d});var r=n(60216),a=n.n(r),o=n(32735),i=n(90258),c=n(90004),l=n(20374),s=n(75672),u=n(58468),_=function(e){var t=e.history,n=e.currency,r=e.setVerificationCode,a=e.hasAnyRealAccount,i=e.openRealAccountSignup,s=e.setResetTradingPasswordModalOpen,_=e.toggleAccountSignupModal,d=e.toggleResetPasswordModal,m=window.location.search,f=new URLSearchParams(m),p=!1,g=o.useContext(c.PlatformContext).is_dashboard;switch(r(f.get("code"),f.get("action")),f.get("action")){case"signup":g&&(t.push({pathname:c.routes.dashboard,search:m}),p=!0),sessionStorage.removeItem("redirect_url"),_(!0);break;case"reset_password":d(!0);break;case"trading_platform_mt5_password_reset":case"trading_platform_dxtrade_password_reset":var h=f.get("redirect_to");if(h){var y="",b="";switch(h){case"1":y=c.routes.mt5;break;case"10":y=c.routes.mt5,b="real";break;case"11":y=c.routes.mt5,b="demo";break;case"2":y=c.routes.dxtrade;break;case"20":y=c.routes.dxtrade,b="real";break;case"21":y=c.routes.dxtrade,b="demo";break;case"3":y=c.routes.passwords}y&&(t.push({pathname:y,hash:b,search:m}),p=!0)}s(!0);break;case"payment_withdraw":t.push(c.routes.cashier_withdrawal),p=!0;break;case"payment_agent_withdraw":t.push(c.routes.cashier_pa),p=!0;break;case"add_account":u.WS.wait("get_account_status").then((function(){return n?a()?i("manage"):i():i("set_currency")}));var v=f.get("ext_platform_url");v&&(t.push("".concat(c.routes.root,"?ext_platform_url=").concat(v)),p=!0);break;case"verification":sessionStorage.setItem("redirect_url",c.routes.cashier_p2p_verification),window.location.href=(0,c.loginUrl)({language:(0,l.getLanguage)()});break;case"trading_platform_investor_password_reset":var E;localStorage.setItem("cfd_reset_password_code",f.get("code"));var w=null===(E=localStorage.getItem("cfd_reset_password_intent"))||void 0===E?void 0:E.includes("demo");t.push("".concat(c.routes.mt5,"#").concat(w?"demo":"real","#reset-password")),p=!0}return p||t.push({pathname:c.routes.root,search:m}),null};_.propTypes={getServerTime:a().object,history:a().object,setResetTradingPasswordModalOpen:a().func,setVerificationCode:a().func,toggleAccountSignupModal:a().func,toggleResetPasswordModal:a().func};const d=(0,i.withRouter)((0,s.$j)((function(e){var t=e.client,n=e.ui;return{currency:t.currency,setVerificationCode:t.setVerificationCode,fetchResidenceList:t.fetchResidenceList,hasAnyRealAccount:t.hasAnyRealAccount,openRealAccountSignup:n.openRealAccountSignup,setResetTradingPasswordModalOpen:n.setResetTradingPasswordModalOpen,toggleAccountSignupModal:n.toggleAccountSignupModal,toggleResetPasswordModal:n.toggleResetPasswordModal}}))(_))},93802:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(40841),a=n.n(r),o=n(60216),i=n.n(o),c=n(32735),l=n(90004),s=n(75672),u=n(11838),_=function(e){var t=e.is_mobile,n=e.server_time,r=(0,l.toGMTFormat)(n),o=(0,l.toLocalFormat)(n);return c.createElement(u.Popover,{alignment:"top",message:o,className:a()("server-time",{"server-time--is-mobile":t}),zIndex:9999},r)};_.propTypes={is_mobile:i().bool,server_time:i().object};const d=(0,s.$j)((function(e){return{server_time:e.common.server_time}}))(_)},34632:(e,t,n)=>{var r=n(60216),a=n.n(r),o=n(32735),i=n(12788),c=n(14956),l=n(40001),s=n.n(l),u=n(48115),_=n(11838),d=n(90004),m=n(20374),f=n(10331),p=n.n(f),g=n(16636),h=n(75672),y=n(22816),b=n(563),v=["key","content"];function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var S=function(e){var t=e.toasts,n=e.removeToast;if(0===t.length)return null;var r=t.filter((function(e){return!e.is_bottom})),a=t.filter((function(e){return e.is_bottom})),c=function(e){var t=e.key,r=e.content,a=w(e,v);return o.createElement(_.Toast,E({key:t},a,{onClose:function(){return n(t)}}),r)},l=o.createElement(_.Div100vhContainer,{className:"toast-messages",height_offset:"15px"},o.createElement("div",{className:"toast-messages__top"},r.map(c)),o.createElement("div",{className:"toast-messages__bottom"},a.map(c)));return i.createPortal(l,document.getElementById("popup_root"))};S.propTypes={toasts:a().arrayOf(a().shape({key:a().string,timeout:a().number,content:a().oneOfType([a().node,a().string]),type:a().oneOf(["error","info"]),is_bottom:a().bool})),removeToast:a().func};const A=(0,h.$j)((function(e){var t=e.ui;return{toasts:t.toasts,removeToast:t.removeToast}}))(S);var x=n(61407),C=n(40841),k=n.n(C),N=n(90258),z=n(96363);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=new d.CookieStorage(d.TRACKING_STATUS_KEY),T=function(e){var t=e.children,n=e.identifyEvent,r=e.is_app_disabled,a=e.is_cashier_visible,i=e.is_dark_mode,c=e.is_eu_country,l=e.is_logged_in,s=e.is_logging_in,u=e.is_cfd_page,m=e.is_positions_drawer_on,f=e.is_route_modal_on,p=e.notifyAppInstall,h=e.platform,y=e.pageView,b=e.pushDataLayer,v=O(o.useState(!1),2),E=v[0],w=v[1],S=O(o.useState(!1),2),A=S[0],x=S[1],C=o.useContext(d.PlatformContext).is_dashboard,N=M.get(d.TRACKING_STATUS_KEY);o.useEffect((function(){(!c||"accepted"===N)&&!A&&(b({event:"allow_tracking"}),x(!0))}),[A,c,b,N]),o.useEffect((function(){N||l||s||g.Z.wait("website_status").then((function(){w(c)}))}),[N,l,c,s]),n(),y(),o.useEffect((function(){var e=function(e){e.preventDefault(),p(e)};return window.addEventListener("beforeinstallprompt",e),function(){return window.removeEventListener("beforeinstallprompt",e)}}),[p]);return o.createElement("div",{id:"app_contents",className:k()("app-contents",{"app-contents--show-positions-drawer":m,"app-contents--is-disabled":r,"app-contents--is-mobile":(0,d.isMobile)(),"app-contents--is-route-modal":f,"app-contents--is-scrollable":u||a,"app-contents--is-dashboard":C,"app-contents--is-hidden":d.platforms[h]})},o.createElement(_.MobileWrapper,null,t),o.createElement(_.DesktopWrapper,null,o.createElement(_.ThemedScrollbars,{height:"calc(100vh - 84px)",has_horizontal:!0},t)),E&&o.createElement(z.Z,{onAccept:function(){M.set(d.TRACKING_STATUS_KEY,"accepted",{sameSite:"none",secure:!0}),b({event:"allow_tracking"}),w(!1),x(!0)},onDecline:function(){M.set(d.TRACKING_STATUS_KEY,"declined",{sameSite:"none",secure:!0}),w(!1)},is_open:E,is_dark_mode:i}))};T.propTypes={children:a().any,is_app_disabled:a().bool,is_cashier_visible:a().bool,is_logged_in:a().bool,is_cfd_page:a().bool,is_positions_drawer_on:a().bool,is_route_modal_on:a().bool};const D=(0,N.withRouter)((0,h.$j)((function(e){var t=e.client,n=e.common,r=e.gtm,a=e.rudderstack,o=e.ui;return{is_eu_country:t.is_eu_country,is_eu:t.is_eu,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,pushDataLayer:r.pushDataLayer,identifyEvent:a.identifyEvent,pageView:a.pageView,is_app_disabled:o.is_app_disabled,is_cashier_visible:o.is_cashier_visible,is_dark_mode:o.is_dark_mode_on,is_cfd_page:o.is_cfd_page,is_positions_drawer_on:o.is_positions_drawer_on,is_route_modal_on:o.is_route_modal_on,notifyAppInstall:o.notifyAppInstall,platform:n.platform}}))(T));function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}var P="is_dashboard";const F=function(e){var t=R({},e),n=!!window.localStorage.getItem(P)&&"true"===window.localStorage.getItem(P),r=L(o.useState(n),2),a={is_dashboard:r[0],setDerivDashboard:r[1],DERIV_DASHBOARD_KEY:P};return o.createElement(d.PlatformContext.Provider,R({value:a},t))};var W=n(4514),U=n(57870),B=n(93802),$=function(){return o.createElement("div",{className:"footer-icon-separator"})},V=function(e,t){var n=e.Component;return o.createElement(o.Fragment,{key:"footer-link-".concat(e.position,"-").concat(t)},e.has_left_separator&&o.createElement($,null),o.createElement(n,null),e.has_right_separator&&o.createElement($,null))},Z=function(e){var t=e.enableApp,n=e.footer_extensions,r=e.is_app_disabled,a=e.is_eu,i=e.is_logged_in,c=e.is_route_modal_on,l=e.is_settings_modal_on,s=e.is_virtual,u=e.disableApp,_=e.toggleSettingsModal,d=e.settings_extension,m=e.landing_company_shortcode,f=[],p=[];return n.filter&&(f=n.filter((function(e){return"left"===e.position})),p=n.filter((function(e){return"right"===e.position}))),o.createElement("footer",{className:k()("footer",{"footer--is-disabled":r||c})},f.length>0&&o.createElement("div",{className:"footer__links footer__links--left"},f.map(V)),o.createElement(W.hI,null),o.createElement(W.Ie,null),o.createElement(B.Z,null),o.createElement("div",{className:"footer__links"},p.map(V),o.createElement(U.Z,null),o.createElement($,null),o.createElement(W.jU,null),o.createElement(W.Nb,null),i&&o.createElement(W.J0,null),i&&!s&&o.createElement(W.W0,{landing_company:m,is_eu:a}),o.createElement($,null),o.createElement(W.l1,null),o.createElement(W.VR,{is_settings_visible:l,toggleSettings:_,disableApp:u,enableApp:t,settings_extension:d}),o.createElement(W.Yx,null)))};Z.propTypes={is_app_disabled:a().bool,is_logged_in:a().bool,is_route_modal_on:a().bool,is_settings_modal_on:a().bool,landing_company_shortcode:a().string,location:a().object,toggleSettingsModal:a().func};const H=(0,N.withRouter)((0,h.$j)((function(e){var t=e.client,n=e.ui;return{enableApp:n.enableApp,footer_extensions:n.footer_extensions,settings_extension:n.settings_extension,is_app_disabled:n.is_app_disabled,is_route_modal_on:n.is_route_modal_on,is_logged_in:t.is_logged_in,is_eu:t.is_eu,is_loading:n.is_loading,is_settings_modal_on:n.is_settings_modal_on,is_virtual:t.is_virtual,landing_company_shortcode:t.landing_company_shortcode,disableApp:n.disableApp,toggleSettingsModal:n.toggleSettingsModal}}))(Z));var Y=n(11818),G=n(22271),X=n(19465),K=n.n(X);function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}const q=function(e){return o.createElement("div",{className:"account-signup-loader"},o.createElement(_.Loading,J({},e,{is_fullscreen:!1})))};var Q=n(71838);const ee=function(e){var t=e.onConfirm,n=e.onClose;return o.createElement(Q.Formik,{initialValues:{},onSubmit:t,validateOnMount:!0},(function(e){var t=e.handleSubmit;return o.createElement(_.AutoHeightWrapper,{default_height:200},(function(e){var r=e.setRef,a=e.height;return o.createElement("form",{ref:r,onSubmit:t,className:"accept-risk__form"},o.createElement(_.Div100vhContainer,{className:"details-form",height_offset:"40px",is_disabled:(0,d.isDesktop)()},o.createElement(_.ThemedScrollbars,{autoHide:!(window.innerHeight<890),height:a-77},o.createElement("div",{className:"accept-risk__container"},o.createElement("div",{className:"accept-risk__header"},o.createElement(_.Text,{weight:"bold",size:"xs"},(0,m.localize)("Appropriateness Test, WARNING:"))),o.createElement(_.Text,{as:"p",size:"xs"},o.createElement(m.Localize,{i18n_default_text:"In providing our services to you, we are required to obtain information from you in order to assess whether a given product or service is appropriate for you (that is, whether you possess the experience and knowledge to understand the risks involved).<0/><1/>",components:[o.createElement("br",{key:0}),o.createElement("br",{key:1})]}),o.createElement(m.Localize,{i18n_default_text:"On the basis of the information provided in relation to your knowledge and experience, we consider that the investments available via this website are not appropriate for you.<0/><1/>",components:[o.createElement("br",{key:0}),o.createElement("br",{key:1})]}),o.createElement(m.Localize,{i18n_default_text:"By clicking Accept below and proceeding with the Account Opening you should note that you may be exposing yourself to risks (which may be significant, including the risk of loss of the entire sum invested) that you may not have the knowledge and experience to properly assess or mitigate."}))))),o.createElement("input",{name:"accept_risk",value:"1",type:"hidden"}),o.createElement(_.Modal.Footer,{has_separator:!0,is_bypassed:(0,d.isMobile)()},o.createElement(_.FormSubmitButton,{is_absolute:(0,d.isMobile)(),label:(0,m.localize)("Accept"),has_cancel:!0,cancel_label:(0,m.localize)("Decline"),onCancel:n})))}))}))};var te=n(78247),ne=n.n(te),re=n(86245),ae=n.n(re),oe=n(80046),ie=n.n(oe),ce=n(7335),le=n.n(ce),se=n(1537),ue=n.n(se),_e=n(71711),de=n.n(_e),me=n(39979),fe=n.n(me),pe=n(59403),ge=n.n(pe);const he=(0,h.$j)((function(e){var t=e.client,n=e.ui;return{currencies:t.currencies_list,has_currency:!!t.currency,has_real_account:t.has_active_real_account,legal_allowed_currencies:t.upgradeable_currencies,real_account_signup:n.real_account_signup,resetRealAccountSignupParams:n.resetRealAccountSignupParams,selectable_currencies:t.selectable_currencies,available_crypto_currencies:t.available_crypto_currencies,real_account_signup_target:n.real_account_signup_target,is_dxtrade_allowed:t.is_dxtrade_allowed,is_mt5_allowed:t.is_mt5_allowed,has_fiat:t.has_fiat,accounts:t.accounts,is_eu:t.is_eu}}))(ge());var ye=n(62762),be=n.n(ye);const ve=(0,h.$j)((function(e){var t=e.client;return{is_gb_residence:"gb"===t.residence,fetchStatesList:t.fetchStatesList,states_list:t.states_list}}))(be());var Ee=n(67027),we=n.n(Ee);const Se=(0,h.$j)((function(e){var t=e.client;return{is_gb_residence:"gb"===t.residence,fetchStatesList:t.fetchStatesList,states_list:t.states_list}}))(we());function Ae(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ce=function(e){return"samoa"!==e.real_account_signup_target},ke=function(e){return[].concat(Ae(Ce(e)?[ne()(e,he)]:[]),Ae(Ce(e)?[ae()(e,ue())]:[]),Ae(Ce(e)?[ie()(e,Se)]:[]),Ae("maltainvest"===e.real_account_signup_target?[le()(e,ve)]:[]),[de()(e,fe())])};function Ne(){return Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Te(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Re=function(e){var t=e.has_target,n=e.has_real_account,r=e.items,a=e.getCurrentStep,i=e.getTotalSteps,c=a()-1,l=r[c].header?r[c].header.title:"";return o.createElement(o.Fragment,null,(!n||t)&&o.createElement(o.Fragment,null,o.createElement(_.DesktopWrapper,null,o.createElement(_.FormProgress,{steps:r,current_step:c})),o.createElement(_.MobileWrapper,null,o.createElement("div",{className:"account-wizard__header-steps"},o.createElement(_.Text,{as:"h4",styles:{lineHeight:"20px",color:"var(--brand-red-coral)"},size:"xs",weight:"bold",className:"account-wizard__header-steps-title"},o.createElement(m.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:c+1,steps:i(),step_title:l}}))))))},Pe=function(e){var t=De(o.useState(void 0),1)[0],n=De(o.useState(!1),2),r=n[0],a=n[1],i=De(o.useState(""),2),c=i[0],l=i[1],s=De(o.useState([]),2),u=s[0],m=s[1],f=De(o.useState([]),2),p=f[0],g=f[1],h=De(o.useState(!1),2),y=h[0],b=h[1];o.useEffect((function(){e.fetchStatesList();var t=(0,d.makeCancellablePromise)(e.fetchResidenceList()),n=t.cancel,r=t.promise,o=(0,d.makeCancellablePromise)(e.fetchFinancialAssessment()),i=o.cancel,c=o.promise;return Promise.all([r,c]).then((function(){g((function(t){return t.length?t:ke(e)})),m(v()),a(!0)})),function(){n(),i()}}),[]),o.useEffect((function(){if(u.length>0){var e=Te(p);u.forEach((function(t,n){t instanceof Object&&(e[n].form_value=t)})),g(e),m([])}}),[u]),o.useEffect((function(){if(e.residence_list.length){E(e.residence_list).then((function(t){var n,r;(r=p.length?p:ke(e)).length>1&&"phone"in(null===(n=r[1])||void 0===n?void 0:n.form_value)&&(r[1].form_value.phone=r[1].form_value.phone||t||"",g(r))}))}}),[e.residence_list]);var v=function(){var e=localStorage.getItem("real_account_signup_wizard");try{return JSON.parse(e)||[]}catch(e){return[]}finally{localStorage.removeItem("real_account_signup_wizard")}},E=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.find((function(t){return t.value===e.residence})))&&r.phone_idd){t.next=3;break}return t.abrupt("return","");case 3:return t.abrupt("return","+".concat(r.phone_idd));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Me(o,r,a,i,c,"next",e)}function c(e){Me(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),w=function(){return p.map((function(e){return e.form_value})).reduce((function(t,n){var r=K()(new Map(Object.entries(n))),a=Object.keys(r).reduce((function(e,t){return e[t]="string"==typeof r[t]?r[t].trim():r[t],e}),{});return a.date_of_birth&&(a.date_of_birth=(0,d.toMoment)(a.date_of_birth).format("YYYY-MM-DD")),a.place_of_birth&&(a.place_of_birth=a.place_of_birth?(0,d.getLocation)(e.residence_list,a.place_of_birth,"value"):""),a.citizen&&(a.citizen=a.citizen?(0,d.getLocation)(e.residence_list,a.citizen,"value"):""),a.tax_residence&&(a.tax_residence=a.tax_residence?(0,d.getLocation)(e.residence_list,a.tax_residence,"value"):a.tax_residence),Oe(Oe({},t),a)}))},S=function(){l("")},A=function(t,n){t-1<0?e.onClose():(n(),S())},x=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=Oe({},w());return null===(t=r)||void 0===t||delete t.tax_identification_confirm,n&&(r=Oe(Oe({},r),n)),e.realAccountSignup(r)},C=function(e,t,n,r){N(e,t),S(),e+1>=p.length?O():r()},N=function(e,t){var n=Object.assign([],p);n[e].form_value=t,g(n)},z=function(e,t){return e?p[t][e]:p[t]},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.setLoading(!0),x(t).then((function(t){e.setIsRiskWarningVisible(!1),"maltainvest"===e.real_account_signup_target?e.onFinishSuccess(t.new_account_maltainvest.currency.toLowerCase()):"samoa"===e.real_account_signup_target?e.onOpenWelcomeModal(t.new_account_samoa.currency.toLowerCase()):e.onFinishSuccess(t.new_account_real.currency.toLowerCase())})).catch((function(t){"show risk disclaimer"===t.code?(e.setIsRiskWarningVisible(!0),b(!0)):e.onError(t,p)})).finally((function(){return e.setLoading(!1)}))};if(e.is_loading)return o.createElement(q,null);if(y)return o.createElement(ee,{onConfirm:function(){O({accept_risk:1})},onClose:function(){e.onClose(),e.setIsRiskWarningVisible(!1)}});if(!r)return null;if(!t){var I=p.map((function(t,n){var r=function(t){var n=z("passthrough",t),r=z("props",t)||{};return n&&n.length&&(n.forEach((function(t){Object.assign(r,Ie({},t,e[t]))})),r.bypass_to_personal=u.length>0),r}(n),a=t.body;return o.createElement(a,Ne({value:z("form_value",n),index:n,onSubmit:C,onCancel:A,onSave:N,closeRealAccountSignup:e.closeRealAccountSignup,is_virtual:e.is_virtual,has_currency:e.has_currency,form_error:c},r,{key:n}))})),M=o.createElement("div",null);return"samoa"!==e.real_account_signup_target&&(M=o.createElement(Re,{has_real_account:e.has_real_account,items:p,has_currency:e.has_currency,has_target:"manage"!==e.real_account_signup_target,setIsRiskWarningVisible:e.setIsRiskWarningVisible})),o.createElement(_.Wizard,{nav:M,className:k()("account-wizard",{"account-wizard--set-currency":!e.has_currency,"account-wizard--deriv-crypto":"samoa"===e.real_account_signup_target})},I)}var T=t;return o.createElement(T,null)};Pe.propTypes={fetchResidenceList:a().func,has_currency:a().bool,has_real_account:a().bool,onError:a().func,onLoading:a().func,onFinishSuccess:a().func,onOpenWelcomeModal:a().func,realAccountSignup:a().func,residence:a().string,residence_list:a().array};const Fe=(0,h.$j)((function(e){var t=e.client,n=e.notifications,r=e.ui;return{account_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,realAccountSignup:t.realAccountSignup,closeRealAccountSignup:r.closeRealAccountSignup,is_virtual:t.is_virtual,has_real_account:t.has_active_real_account,upgrade_info:t.upgrade_info,real_account_signup_target:r.real_account_signup_target,has_currency:!!t.currency,residence:t.residence,residence_list:t.residence_list,states_list:t.states_list,fetchStatesList:t.fetchStatesList,fetchResidenceList:t.fetchResidenceList,refreshNotifications:n.refreshNotifications,fetchFinancialAssessment:t.fetchFinancialAssessment,financial_assessment:t.financial_assessment}}))(Pe);var We=n(75594),Ue=n.n(We),Be=n(71857),$e=n.n(Be),Ve=function(){return[o.createElement(m.Localize,{key:0,i18n_default_text:"Choose your preferred cryptocurrency"}),o.createElement(m.Localize,{key:1,i18n_default_text:"You can open an account for each cryptocurrency."}),o.createElement(m.Localize,{key:2,i18n_default_text:"Add a real account"}),o.createElement(m.Localize,{key:3,i18n_default_text:"Choose a currency you would like to trade with."}),o.createElement(m.Localize,{key:4,i18n_default_text:"Choose a currency"})]},Ze=function(e){var t=e.heading,n=e.subheading;return o.createElement(o.Fragment,null,o.createElement(_.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},t),o.createElement(_.Text,{as:"h3",size:"xxs",color:"prominent",align:"center",className:"add-crypto-currency__sub-title"},n))},He="crypto",Ye=function(e){var t=e.available_crypto_currencies,n=e.form_error,r=e.has_fiat,a=e.is_add_fiat,i=e.legal_allowed_currencies,c=e.onClickBack,l=e.onSubmit,s=e.should_show_cancel,u=e.should_show_crypto_only,f=e.should_show_fiat_only,p=e.value,g=e.hasNoAvailableCrypto,h=function(){return(0,d.reorderCurrencies)(i.filter((function(e){return"fiat"===e.type})))},y=function(){return(0,d.reorderCurrencies)(i.filter((function(e){return e.type===He})),He)},b=function(){return!r&&!u},v=function(e){return-1===t.map((function(e){return e.value})).indexOf(e.value)};return o.createElement(Q.Formik,{initialValues:{currency:p.currency},onSubmit:function(e,t){l(!1,e,t.setSubmitting)}},(function(e){var r=e.handleSubmit,i=e.values,l=e.errors,u=e.touched,p=e.isSubmitting;return o.createElement("form",{onSubmit:r},!b()&&o.createElement(Ze,{heading:Ve()[0],subheading:Ve()[1]}),b()&&o.createElement(Ze,{heading:a?Ve()[4]:Ve()[2],subheading:Ve()[3]}),b()&&o.createElement(o.Fragment,null,o.createElement(_.ThemedScrollbars,null,o.createElement(Ue(),{id:"fiat_currency",is_fiat:!0,className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:i.currency,error:l.currency,touched:u.currency,is_title_enabled:b(),item_count:h().length},h().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"currency",id:e.value,label:e.name})}))))),b()&&o.createElement(_.Text,{as:"p",color:"prominent",size:"xxs",align:"center",className:"currency-selector__deposit-warn"},o.createElement(m.Localize,{i18n_default_text:"Youâ€™ll not be able to change currency once you have made a deposit."})),g()&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement(_.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},(0,m.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:d.website_name}))),!f&&(0!==t.length?o.createElement(_.ThemedScrollbars,null,o.createElement(Ue(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,m.localize)("Cryptocurrencies"),value:i.currency,error:l.currency,touched:u.currency,is_title_enabled:b(),item_count:y().length},y().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"currency",id:e.value,label:e.name,selected:v(e)})})))):o.createElement(_.ThemedScrollbars,null,o.createElement(Ue(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,m.localize)("Cryptocurrencies"),is_title_enabled:b(),item_count:y().length},y().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"currency",id:e.value,label:e.name,selected:!0})}))))),o.createElement(_.FormSubmitButton,{className:"currency-selector__button",is_disabled:p||!i.currency,label:(0,m.localize)("Add account"),is_absolute:!(0,d.isMobile)(),form_error:n,has_cancel:s,cancel_label:(0,m.localize)("Back"),cancel_icon:o.createElement(_.Icon,{icon:"IcArrowLeftBold"}),onCancel:function(){return c()}}))}))};Ye.propTypes={available_crypto_currencies:a().array,legal_allowed_currencies:a().array,has_fiat:a().bool,hasNoAvailableCrypto:a().func,form_error:a().string,onSubmit:a().func,should_show_cancel:a().bool,should_show_crypto_only:a().bool,should_show_fiat_only:a().bool,value:a().shape({crypto:a().string,fiat:a().string})};const Ge=(0,h.$j)((function(e){var t=e.client,n=e.ui;return{available_crypto_currencies:t.available_crypto_currencies,legal_allowed_currencies:t.upgradeable_currencies,has_fiat:t.has_fiat,should_show_cancel:n.should_show_cancel}}))(Ye);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qe=function(e,t,n){var r=[];return e.forEach((function(e){var a;r.push(Ke(Ke({},e),{},{has_payment_agent:!(null==t||null===(a=t.paymentagent_list)||void 0===a||!a.list.filter((function(t){return t.currencies===e.value})).length),is_disabled:null==n?void 0:n.some((function(t){return t.title===e.value&&t.is_disabled}))}))})),r};function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tt="crypto",nt=function(e){var t=e.all_payment_agent_list,n=e.available_crypto_currencies,r=e.has_fiat,a=e.legal_allowed_currencies,i=e.onSubmit,c=e.openRealAccountSignup,l=e.setShouldShowAllAvailableCurrencies,s=e.deposit_target,u=e.hasNoAvailableCrypto,f=e.is_add_crypto,p=e.is_add_fiat,g=Qe(o.useState(""),1)[0],h=Qe(o.useState({crypto:"",fiat:""}),1)[0],y=qe(a,t),b=function(){return(0,d.reorderCurrencies)(null==y?void 0:y.filter((function(e){return e.type===tt&&n.some((function(t){return t.value===e.value}))})),tt)},v=function(){return(0,d.reorderCurrencies)(null==y?void 0:y.filter((function(e){return"fiat"===e.type&&!n.some((function(t){return t.value===e.value}))})))},E=function(){c("choose"),s===d.routes.cashier_pa&&l(!0)},w=function(){return o.createElement("div",null,o.createElement(_.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-currency__title"},(0,m.localize)("Fiat currencies")),!!r&&o.createElement(_.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__sub-title"},(0,m.localize)("You are limited to one fiat account only.")),o.createElement(Ue(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:v().length},v().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:r})}))))},S=function(){return o.createElement("div",null,o.createElement(_.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-currency__title"},(0,m.localize)("Cryptocurrencies")),o.createElement(_.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__sub-title"},(0,m.localize)("You can open an account for each cryptocurrency.")),o.createElement(Ue(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:b().length},b().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:s===d.routes.cashier_pa&&!e.has_payment_agent})}))))};return f?o.createElement(_.ThemedScrollbars,{autohide:!1},o.createElement("div",{className:k()("add-crypto-currency",{"account-wizard--disabled":u()})},o.createElement(Ge,{className:"account-wizard__body",onSubmit:i,onClickBack:E,value:h,form_error:g,should_show_crypto_only:!0,hasNoAvailableCrypto:u}))):p?o.createElement(_.ThemedScrollbars,{autohide:!1},o.createElement("div",{className:"change-currency"},o.createElement(Ge,{className:"account-wizard__body",onSubmit:i,value:h,form_error:g,should_show_fiat_only:!0,hasNoAvailableCrypto:u,is_add_fiat:!0}))):o.createElement(Q.Formik,{initialValues:{currency:h.currency},onSubmit:function(e,t){i(!1,e,t.setSubmitting)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.isSubmitting;return o.createElement("form",{onSubmit:t},o.createElement(_.ThemedScrollbars,{height:(0,d.isMobile)()?window.innerHeight-190:"460px"},o.createElement("div",null,o.createElement(_.Text,{as:"p",color:"prominent",weight:"bold",align:"center",className:"add-currency__wizard-header"},(0,m.localize)("Choose your currency")),o.createElement(w,null),o.createElement("div",{className:"add-currency__underline"}),o.createElement(S,null))),o.createElement("div",{className:"add-currency__note-wrapper"},o.createElement(_.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__note"},(0,m.localize)("Some currencies may not be supported by payment agents in your country."))),o.createElement(_.FormSubmitButton,{className:"currency-selector__button",is_disabled:r||!n.currency,label:(0,m.localize)("Add account"),is_absolute:!0,form_error:g,has_cancel:!0,cancel_label:(0,m.localize)("Back"),cancel_icon:o.createElement(_.Icon,{icon:"IcArrowLeftBold"}),onCancel:function(){return E()}}))}))};nt.propTypes={all_payment_agent_list:a().array,available_crypto_currencies:a().array,has_fiat:a().bool,legal_allowed_currencies:a().array,openRealAccountSignup:a().func,setShouldShowAllAvailableCurrencies:a().func,deposit_target:a().string};const rt=(0,h.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{all_payment_agent_list:n.cashier.payment_agent.all_payment_agent_list,available_crypto_currencies:t.available_crypto_currencies,has_fiat:t.has_fiat,legal_allowed_currencies:t.upgradeable_currencies,openRealAccountSignup:r.openRealAccountSignup,setShouldShowAllAvailableCurrencies:n.cashier.general_store.setShouldShowAllAvailableCurrencies,deposit_target:n.cashier.general_store.deposit_target}}))(nt);var at=n(58468),ot=function(e){var t,n=e.legal_allowed_currencies,r=e.value,a=e.onSubmit,i=e.form_error,c=e.can_change_fiat_currency,l=e.client_currency,s=e.current_currency_type,u=e.current_fiat_currency,f=e.is_dxtrade_allowed,p=function(){return(0,d.reorderCurrencies)(n.filter((function(e){return"fiat"===e.type})))},g="fiat"===s,h=f?o.createElement(m.Localize,{i18n_default_text:"We can't change your account currency as you've either made a deposit into your {{currency}} account or created a real account on DMT5 or Deriv X.",values:{currency:(0,d.getCurrencyDisplayCode)(l)}}):o.createElement(m.Localize,{i18n_default_text:"We can't change your account currency as you've either made a deposit into your {{currency}} account or created a real account on DMT5.",values:{currency:(0,d.getCurrencyDisplayCode)(l)}}),y=o.createElement(m.Localize,{i18n_default_text:"Please switch to your {{fiat_currency}} account to change currencies.",values:{fiat_currency:null==u||null===(t=u.toUpperCase)||void 0===t?void 0:t.call(u)}}),b=g?h:y;return o.createElement(Q.Formik,{initialValues:{fiat:r.fiat},onSubmit:function(e,t){a(!1,e,t.setSubmitting)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.errors,a=e.touched,s=e.isSubmitting;return o.createElement("form",{onSubmit:function(e){e.preventDefault(),t()}},o.createElement(_.Text,{as:"h1",color:"prominent",weight:"bold",align:"center",className:"change-currency__title"},o.createElement(m.Localize,{i18n_default_text:"Change your currency"})),o.createElement(_.Text,{as:"h3",size:"xxs",align:"center",className:"change-currency__sub-title"},o.createElement(m.Localize,{i18n_default_text:"Choose the currency you would like to trade with."})),!c&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement(_.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},b)),o.createElement(Ue(),{id:"fiat",label:(0,m.localize)("Cryptocurrencies"),className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:n.fiat,error:r.fiat,touched:a.fiat,is_title_enabled:!1,item_count:p().length},p().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"fiat",id:e.value,label:e.name,selected:e.value===l})}))),o.createElement(_.FormSubmitButton,{className:"change-currency__button",is_disabled:s||!n.fiat,label:(0,m.localize)("Change currency"),is_absolute:!(0,d.isMobile)(),form_error:i}))}))};ot.propTypes={legal_allowed_currencies:a().array,onSubmit:a().func,value:a().shape({crypto:a().string,fiat:a().string}),form_error:a().string,can_change_fiat_currency:a().bool,currency:a().string,current_currency_type:a().string,current_fiat_currency:a().string,client_currency:a().string,is_dxtrade_allowed:a().bool};const it=(0,h.$j)((function(e){var t=e.client;return{legal_allowed_currencies:t.upgradeable_currencies,client_currency:t.currency,current_fiat_currency:t.current_fiat_currency,is_dxtrade_allowed:t.is_dxtrade_allowed}}))(ot);function ct(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ut=function(e){var t=e.available_crypto_currencies,n=e.can_change_fiat_currency,r=e.createCryptoAccount,a=e.current_currency_type,i=e.deposit_target,c=e.has_fiat,l=e.is_add_crypto,s=e.is_add_currency,u=e.is_add_fiat,f=e.is_eu,p=e.is_loading,g=e.manage_real_account_tab_index,h=e.onError,y=e.onSuccessSetAccountCurrency,b=e.resetRealAccountSignupTarget,v=e.setCurrency,E=e.setLoading,w=e.setIsDeposit,S=e.setShouldShowCancel,A=(null!=g?g:c&&0===(null==t?void 0:t.length))?1:0,x=lt(o.useState(A),2),C=x[0],N=x[1],z=lt(o.useState(""),1)[0],O=lt(o.useState({crypto:"",fiat:""}),1)[0];o.useEffect((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,at.WS.mt5LoginList();case 3:E(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ct(o,r,a,i,c,"next",e)}function c(e){ct(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return e(),function(){return S(!1)}}),[]);var I=function(e,t,n){!function(e,t){E(!0),Object.entries(e).map((function(e){var n=lt(e,2),a=n[0],o=n[1];"fiat"===a?v(o).then((function(e){t(!1),y(e.passthrough.previous_currency,e.echo_req.set_account_currency,i)})).catch((function(e){h(e)})).finally((function(){return E(!1)})):r(o).then((function(){y("",o,i),t(!1),b(),w(!0)})).catch((function(e){h(e)})).finally((function(){return E(!1)}))}))}(t,n)},M=function(){return 0===t.length&&c};if(p)return o.createElement(q,null);var T=c&&o.createElement("div",{className:k()("change-currency",{"account-wizard--disabled":!n})},o.createElement(it,{className:"account-wizard__body",onSubmit:I,value:O,form_error:z,can_change_fiat_currency:n,current_currency_type:a}));return s||l||u?o.createElement(rt,{onSubmit:I,value:O,form_error:z,should_show_crypto_only:!0,hasNoAvailableCrypto:M,is_add_crypto:l,is_add_fiat:u,is_add_currency:s}):o.createElement(_.ThemedScrollbars,{is_bypassed:(0,d.isMobile)(),autohide:!1},f&&c?T:o.createElement(_.Tabs,{active_index:C,className:"account-wizard add-or-manage tabs--desktop",onTabItemClick:function(e){N(e)},top:!0,header_fit_content:(0,d.isDesktop)()},o.createElement("div",{label:(0,m.localize)("Cryptocurrencies")},o.createElement("div",{className:k()("add-crypto-currency",{"account-wizard--disabled":M()})},o.createElement(Ge,{className:"account-wizard__body",onSubmit:I,value:O,form_error:z,should_show_crypto_only:!0,hasNoAvailableCrypto:M}))),o.createElement("div",{label:(0,m.localize)("Fiat currencies")},c?T:o.createElement(Ge,{className:"account-wizard__body",onSubmit:I,value:O,form_error:z,should_show_fiat_only:!0,hasNoAvailableCrypto:M}))))};ut.propTypes={available_crypto_currencies:a().arrayOf({fractional_digits:a().number,is_deposit_suspended:a().number,is_suspended:a().number,is_withdrawal_suspended:a().number,name:a().string,stake_default:a().number,transfer_between_accounts:a().object,type:a().string,value:a().string}),onError:a().func,onLoading:a().func,onSuccessSetAccountCurrency:a().func,is_eu:a().bool,setCurrency:a().func,createCryptoAccount:a().func,has_fiat:a().bool,can_change_fiat_currency:a().bool,current_currency_type:a().string,is_loading:a().bool,is_add_crypto:a().bool,setLoading:a().func,setShouldShowCancel:a().func};const _t=(0,h.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{available_crypto_currencies:t.available_crypto_currencies,can_change_fiat_currency:t.can_change_fiat_currency,current_currency_type:t.current_currency_type,current_fiat_currency:t.current_fiat_currency,has_fiat:t.has_fiat,is_eu:t.is_eu,manage_real_account_tab_index:r.manage_real_account_tab_index,setCurrency:t.setAccountCurrency,setShouldShowCancel:r.setShouldShowCancel,createCryptoAccount:t.createCryptoAccount,resetRealAccountSignupTarget:r.resetRealAccountSignupTarget,setIsDeposit:n.cashier.general_store.setIsDeposit}}))(ut);function dt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){dt(o,r,a,i,c,"next",e)}function c(e){dt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gt="crypto",ht=function(e){var t=e.account_list,n=e.all_payment_agent_list,r=e.available_crypto_currencies,a=e.closeRealAccountSignup,i=e.continueRouteAfterChooseCrypto,c=e.currency_title,l=e.deposit_target,s=e.has_fiat,u=e.legal_allowed_currencies,f=e.openRealAccountSignup,p=e.switchAccount,g=e.should_show_all_available_currencies,h=e.setShouldShowCancel,y=e.setShouldShowAllAvailableCurrencies,b=ft(o.useState(""),1)[0],v=ft(o.useState({crypto:""}),1)[0];o.useEffect((function(){return function(){return y(!1)}}),[y]);var E=function(){return 0===(null==u?void 0:u.filter((function(e){return e.type===gt&&!t.some((function(t){return t.title===e.value}))})).length)},w=function(){var e=qe(u,n,t),a=g?(0,d.reorderCurrencies)(null==e?void 0:e.filter((function(e){return t.some((function(t){return t.title===e.value}))})),gt):(0,d.reorderCurrencies)(null==e?void 0:e.filter((function(e){return e.type===gt&&!r.some((function(t){return t.value===e.value}))})),gt);return(l===d.routes.cashier_pa&&!s||!E())&&a.push({value:"plus",name:l===d.routes.cashier_pa?(0,m.localize)("Add a new"):(0,m.localize)("Add new"),second_line_label:l===d.routes.cashier_pa?(0,m.localize)("account"):(0,m.localize)("crypto account"),icon:"IcAddAccount",onClick:function(){return f(l===d.routes.cashier_pa?"add_currency":"add_crypto"),void h(!0)},has_payment_agent:!0}),a},S=function(){var e=mt(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filter((function(e){return e.title===n})),a=r.map((function(e){return e.loginid}))[0],e.next=4,p(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=mt(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(t).map((function(e){var t=ft(e,2),n=t[0],r=t[1];n&&(a(),r!==c&&S(r),i())}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.createElement(Q.Formik,{initialValues:{currency:v.currency},onSubmit:function(e){A(e)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.isSubmitting;return o.createElement("form",{onSubmit:t},o.createElement(_.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},l===d.routes.cashier_pa?(0,m.localize)("Choose an account or add a new one"):(0,m.localize)("Choose one of your accounts or add a new cryptocurrency account")),o.createElement(_.ThemedScrollbars,null,o.createElement(Ue(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:w().length},w().map((function(e){return o.createElement(Q.Field,{key:e.value,component:$e(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:!(!e.is_disabled&&l!==d.routes.cashier_pa)&&!e.has_payment_agent})})))),o.createElement(_.FormSubmitButton,{className:"currency-selector__button",is_disabled:r||!n.currency,label:(0,m.localize)("Continue"),is_absolute:!0,form_error:b}))}))};ht.propTypes={account_list:a().array,available_crypto_currencies:a().array,closeRealAccountSignup:a().func,continueRouteAfterChooseCrypto:a().func,currency_title:a().string,has_fiat:a().bool,legal_allowed_currencies:a().array,openRealAccountSignup:a().func,setShouldShowCancel:a().func,switchAccount:a().func};const yt=(0,h.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{account_list:t.account_list,all_payment_agent_list:n.cashier.payment_agent.all_payment_agent_list,available_crypto_currencies:t.available_crypto_currencies,closeRealAccountSignup:r.closeRealAccountSignup,continueRouteAfterChooseCrypto:r.continueRouteAfterChooseCrypto,currency_title:t.currency,deposit_target:n.cashier.general_store.deposit_target,has_fiat:t.has_fiat,legal_allowed_currencies:t.upgradeable_currencies,openRealAccountSignup:r.openRealAccountSignup,setShouldShowCancel:r.setShouldShowCancel,switchAccount:t.switchAccount,should_show_all_available_currencies:n.cashier.general_store.should_show_all_available_currencies,setShouldShowAllAvailableCurrencies:n.cashier.general_store.setShouldShowAllAvailableCurrencies}}))(ht);var bt=["setLoading","onSuccessSetAccountCurrency","onError","available_crypto_currencies","has_fiat","landing_company_shortcode","is_loading"];function vt(){return vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vt.apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const wt=(0,h.$j)((function(e){var t=e.client;return{available_crypto_currencies:t.available_crypto_currencies,can_change_fiat_currency:t.can_change_fiat_currency,currency:t.currency,current_currency_type:t.current_currency_type,current_fiat_currency:t.current_fiat_currency,is_eu:t.is_eu,has_fiat:t.has_fiat,landing_company_shortcode:t.landing_company_shortcode,setCurrency:t.setAccountCurrency,createCryptoAccount:t.createCryptoAccount}}))((function(e){var t=e.setLoading,n=e.onSuccessSetAccountCurrency,r=e.onError,a=e.available_crypto_currencies,i=e.has_fiat,c=e.landing_company_shortcode,l=e.is_loading,s=Et(e,bt),u=o.useState(""),f=o.useState({currency:""}),p=function(){return 0===a.length&&i&&s.currency};return l?o.createElement(q,null):o.createElement("div",{className:k()("set-currency-modal",{"set-currency-modal--disabled":p()})},p()&&o.createElement("div",{className:"set-currency-modal--disabled-message"},o.createElement("p",null,(0,m.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:d.website_name}))),o.createElement("div",{className:"set-currency-modal__heading-container"},o.createElement(_.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"set-currency-modal__heading-container__main-heading"},(0,m.localize)("You have an account that do not have currency assigned. Please choose a currency to trade with this account.")),o.createElement(_.Text,{as:"p",weight:"bold",align:"center",className:"set-currency-modal__heading-container__sub-heading"},(0,m.localize)("Please choose your currency"))),o.createElement(he,vt({className:"account-wizard__body",onSubmit:function(e,a,o){!function(e,a){t(!0);var o=e.currency;o&&s.setCurrency(o).then((function(e){a(!1),n("",e.echo_req.set_account_currency)})).catch((function(e){r(e)})).finally((function(){return t(!1)}))}(a,o)},value:f,form_error:u,set_currency:!0,validate:(0,d.generateValidationFunction)(c,ne())},s)))}));var St=function(e){var t=e.current,n=e.closeRealAccountSignup,r=e.continueRoute,a=e.deposit_target,i=e.deposit_real_account_signup_target,c=e.history,l=e.onSubmit,s=e.setIsDeposit,u=function(){return o.createElement(_.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),height:120,width:90})},f=function(e){var t=e.className;return o.createElement(_.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green"})},p=function(){n(),s(!1)};return o.createElement(o.Fragment,null,(0,d.isDesktop)()&&o.createElement("div",{onClick:p,className:"finished-add-currency__close"},o.createElement(_.Icon,{icon:"IcCross"})),o.createElement(_.Div100vhContainer,{className:"finished-add-currency__dialog",is_disabled:(0,d.isDesktop)(),height_offset:"40px"},o.createElement("div",{className:k()("status-dialog__header",{"status-dialog__header--center":(0,d.isMobile)()})},o.createElement(u,null),o.createElement(f,{className:"bottom-right-overlay"})),o.createElement("div",{className:k()("status-dialog__body",{"status-dialog__body--no-grow":(0,d.isMobile)()})},o.createElement(_.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},o.createElement(m.Localize,{i18n_default_text:"Your account is ready"})),o.createElement(_.Text,{as:"p",align:"center"},o.createElement(m.Localize,{i18n_default_text:"Fund your account to start trading."}))),o.createElement("div",{className:"finished-add-currency__footer"},o.createElement(_.Button,{onClick:p,text:(0,m.localize)("Maybe later"),secondary:!0}),o.createElement(_.Button,{onClick:["add_crypto","add_fiat","add_currency"].includes(i)?function(){n(),r(),c.push(a),a===d.routes.cashier_deposit&&s(!0)}:l,text:(0,m.localize)("Deposit now"),primary:!0}))))};const At=o.memo(St);var xt=function(e){var t=e.prev,n=e.current;return t?o.createElement(m.Localize,{i18n_default_text:"<0>You have successfully changed your currency to {{currency}}.</0><0>Make a deposit now to start trading.</0>",values:{currency:(0,d.getCurrencyDisplayCode)(n)},components:[o.createElement(_.Text,{as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs",key:n})]}):o.createElement(m.Localize,{i18n_default_text:"<0>You have added a {{currency}} account.</0><0> Make a deposit now to start trading.</0>",values:{currency:(0,d.getCurrencyDisplayCode)(n)},components:[o.createElement(_.Text,{as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs",key:n})]})},Ct=function(e){var t=e.current,n=e.closeRealAccountSignup,r=e.continueRoute,a=e.deposit_target,i=e.deposit_real_account_signup_target,c=e.history,l=e.onCancel,s=e.onSubmit,u=e.prev,f=e.setIsDeposit,p=function(){return u?o.createElement(_.Icon,{icon:"IcCurrency-".concat(u.toLowerCase()),height:120,width:90}):null},g=function(){return o.createElement(_.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),height:120,width:90})},h=function(){return u?o.createElement(_.Icon,{icon:"IcArrowPointerRight",color:"red",width:50,height:20}):null},y=function(e){var t=e.className;return o.createElement(_.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green"})};return o.createElement(_.Div100vhContainer,{className:"status-dialog",is_disabled:(0,d.isDesktop)(),height_offset:"40px"},o.createElement("div",{className:k()("status-dialog__header",{"status-dialog__header--center":(0,d.isMobile)(),"status-dialog__header--set-currency":u})},o.createElement(p,null),o.createElement(h,null),o.createElement(g,null),o.createElement(y,{className:"bottom-right-overlay"})),o.createElement("div",{className:k()("status-dialog__body",{"status-dialog__body--no-grow":(0,d.isMobile)()})},o.createElement(_.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},o.createElement(m.Localize,{i18n_default_text:"Success!"})),o.createElement(xt,{prev:u,current:t})),o.createElement("div",{className:"status-dialog__footer"},o.createElement(_.Button,{onClick:function(){l(),f(!1)},text:(0,m.localize)("Maybe later"),secondary:!0}),o.createElement(_.Button,{onClick:["add_crypto","add_fiat","add_currency"].includes(i)?function(){n(),r(),c.push(a),a===d.routes.cashier_deposit&&f(!0)}:s,text:(0,m.localize)("Deposit now"),primary:!0})))};const kt=o.memo(Ct);var Nt=function(e){switch(e.code){case"InvalidPhone":return o.createElement(_.Text,{as:"h1",align:"center",weight:"bold"},o.createElement(m.Localize,{i18n_default_text:"Letâ€™s try that again"}));case"DuplicateAccount":return o.createElement(_.Text,{as:"h1",align:"center",weight:"bold"},o.createElement(m.Localize,{i18n_default_text:"Already signed up?"}));default:return o.createElement(_.Text,{as:"h1",align:"center",weight:"bold"},o.createElement(m.Localize,{i18n_default_text:"Somethingâ€™s not right"}))}},zt=function(e){var t=e.code,n=e.message;return"DuplicateAccount"===t?o.createElement("p",null,o.createElement(m.Localize,{i18n_default_text:"An account with your details already exists."}),o.createElement("br",null),o.createElement(m.Localize,{i18n_default_text:"If you're having trouble signing in, let us know via <0>chat</0>",components:[o.createElement("span",{className:"chat-inline",key:0,onClick:function(){return window.LC_API.open_chat_window()}})]})):o.createElement("p",null,n)},Ot=function(e){var t=e.text,n=e.onConfirm;return o.createElement(_.Button,{primary:!0,onClick:n,large:!0},t)},It=function(e){var t=e.code,n=e.onConfirm;switch(t){case"CurrencyTypeNotAllowed":return o.createElement(Ot,{text:(0,m.localize)("Try a different currency"),onConfirm:n});case"InvalidPhone":return o.createElement(Ot,{text:(0,m.localize)("Try a different phone number"),onConfirm:n});case"DuplicateAccount":return null;default:return o.createElement(_.StaticUrl,{href:"help-centre/".concat("InvalidAccount"===t?"account#who-can-open-an-account":""),type:"button",className:"dc-btn dc-btn--primary"},o.createElement(_.Text,{weight:"bold",color:"white",size:"xxs"},o.createElement(m.Localize,{i18n_default_text:"OK"})))}},Mt=function(e){var t=e.message,n=e.code,r=e.onConfirm;return o.createElement("div",{className:"account-wizard--error"},o.createElement(_.Icon,{icon:"IcAccountError",size:115}),o.createElement(Nt,{code:n}),o.createElement(zt,{code:n,message:t}),o.createElement(It,{code:n,onConfirm:r}))};Mt.propTypes={code:a().string,message:a().string,onConfirm:a().func};const Tt=Mt;var Dt=n(78568),Lt=function(e){var t=e.status;return o.createElement(_.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},t===Dt.FX.SUCCESS&&o.createElement(m.Localize,{i18n_default_text:"Your account is ready"}),t===Dt.FX.WARN&&o.createElement(m.Localize,{i18n_default_text:"Please verify your address"}),t===Dt.FX.DANGER&&o.createElement(m.Localize,{i18n_default_text:"Please verify your identity and address"}),t===Dt.FX.PENDING&&o.createElement(m.Localize,{i18n_default_text:"We're processing your personal information"}))},jt=function(e){var t=e.status;return"iom"===e.landing_company_shortcode?o.createElement(Lt,{status:t}):o.createElement(_.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},o.createElement(m.Localize,{i18n_default_text:"Your account is ready"}))};jt.propTypes={status:a().number.isRequired,landing_company_shortcode:a().string.isRequired};var Rt=function(e){var t=e.country_standpoint,n=e.is_fully_authenticated,r=e.landing_company_shortcode,a=e.status,i=void 0===a?Dt.FX.SUCCESS:a,c="";if("maltainvest"===r)c=n?[o.createElement(m.Localize,{key:0,i18n_default_text:"You have added a Deriv Financial account."}),o.createElement(m.Localize,{key:1,i18n_default_text:"Make a deposit now to start trading."})]:o.createElement(m.Localize,{i18n_default_text:"We need proof of your identity and address before you can start trading."});else if("malta"===r)(t.is_united_kingdom&&n||t.is_rest_of_eu||t.is_belgium)&&(c=o.createElement(m.Localize,{i18n_default_text:"You have added a real Options account.<0/>Make a deposit now to start trading.",components:[o.createElement("br",{key:0})]}));else if("iom"===r)t.is_united_kingdom&&n&&(c=o.createElement(m.Localize,{i18n_default_text:"You have added a real Gaming account.<0/>Make a deposit now to start trading.",components:[o.createElement("br",{key:0})]}));else switch(i){case Dt.FX.WARN:c=o.createElement(m.Localize,{i18n_default_text:"To get trading, please confirm where you live."});break;case Dt.FX.DANGER:c=o.createElement(m.Localize,{i18n_default_text:"To get trading, please confirm who you are, and where you live."});break;case Dt.FX.PENDING:c=o.createElement(m.Localize,{i18n_default_text:"You'll be able to get trading as soon as verification is complete."});break;default:c=o.createElement(m.Localize,{i18n_default_text:"Fund your account to start trading."})}return Array.isArray(c)?o.createElement(o.Fragment,null,c.map((function(e,t){return o.createElement(_.Text,{key:t,as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs"},e)}))):o.createElement(_.Text,{as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs"},c)};Rt.propTypes={currency:a().string,is_isle_of_man_residence:a().bool,landing_company_shortcode:a().string,status:a().number};var Pt=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModal,a=e.closeModalAndOpenCashier,i=e.closeModalAndOpenPOI,c=e.closeModalAndOpenPOA,l=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.is_fully_authenticated,a=e.closeModal,o=e.closeModalAndOpenCashier,i=e.closeModalAndOpenPOI,c=e.closeModalAndOpenPOA;switch(n){case"iom":return t===Dt.FX.DANGER?{label:(0,m.localize)("Submit proofs"),action:i}:t===Dt.FX.WARN?{label:(0,m.localize)("Submit proof"),action:c}:t===Dt.FX.PENDING?{label:(0,m.localize)("OK"),action:a}:{label:(0,m.localize)("Deposit"),action:o};case"maltainvest":return r?{label:(0,m.localize)("Deposit"),action:o}:{label:(0,m.localize)("Submit proof"),action:i};default:return{label:(0,m.localize)("Deposit"),action:o}}}({status:t,landing_company_shortcode:n,is_fully_authenticated:e.is_fully_authenticated,closeModal:r,closeModalAndOpenCashier:a,closeModalAndOpenPOI:i,closeModalAndOpenPOA:c}),s=l.label,u=l.action;return o.createElement(_.Button,{primary:!0,text:s,onClick:u})},Ft=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModal,a=e.switchToVirtual;if(e.is_bypassed)return null;var i=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModal,a=e.switchToVirtual;return"iom"===n?t===Dt.FX.SUCCESS?{label:(0,m.localize)("Maybe later"),action:r}:t===Dt.FX.WARN?{label:(0,m.localize)("Trade on demo"),action:function(){r(),a()}}:{label:(0,m.localize)("Maybe later"),action:r}:{label:(0,m.localize)("Maybe later"),action:r}}({status:t,landing_company_shortcode:n,closeModal:r,switchToVirtual:a}),c=i.label,l=i.action;return o.createElement(_.Button,{secondary:!0,text:c,onClick:l})},Wt=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.is_fully_authenticated,a=e.closeModal,i=e.closeModalAndOpenCashier,c=e.closeModalAndOpenPOA,l=e.closeModalAndOpenPOI,s=e.switchToVirtual;return o.createElement("div",{className:"status-dialog__footer"},o.createElement(Ft,{closeModal:a,is_bypassed:t===Dt.FX.PENDING,status:t,landing_company_shortcode:n,switchToVirtual:s}),o.createElement(Pt,{status:t,landing_company_shortcode:n,closeModal:a,closeModalAndOpenCashier:i,closeModalAndOpenPOI:l,closeModalAndOpenPOA:c,is_fully_authenticated:r}))};Wt.propTypes={status:a().number,landing_company_shortcode:a().string,is_fully_authenticated:a().bool,closeModal:a().func,closeModalAndOpenCashier:a().func,closeModalAndOpenPOI:a().func,switchToVirtual:a().func};var Ut=function(e){var t=e.currency;return o.createElement(_.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),size:120})},Bt=function(e){var t=e.className;return o.createElement(_.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green",size:24})},$t=function(e){var t=e.className;return o.createElement(_.Icon,{className:t,icon:"IcAlertDanger",size:24})},Vt=function(e){var t=e.className;return o.createElement(_.Icon,{className:t,icon:"IcCrossCircle",size:24,color:"red"})},Zt=function(e){var t=e.closeModal;return o.createElement("div",{onClick:t,className:"status-dialog__close"},o.createElement(_.Icon,{icon:"IcCross"}))},Ht=function(e){var t=e.closeModal,n=e.country_standpoint,r=e.currency,a=e.history,i=e.icon_size,c=e.is_age_verified,l=e.is_belgium_residence,s=e.is_fully_authenticated,u=e.is_isle_of_man_residence,m=e.landing_company_shortcode,f=e.switchToVirtual,p=function(){return(0,Dt.Sj)({landing_company_shortcode:m,is_fully_authenticated:s,is_age_verified:c,is_isle_of_man_residence:u,is_belgium_residence:l})};return o.createElement(_.Div100vhContainer,{className:"status-dialog",is_disabled:(0,d.isDesktop)(),height_offset:"40px"},(0,d.isDesktop)()&&o.createElement(Zt,{closeModal:t}),o.createElement("div",{className:k()("status-dialog__header",{"status-dialog__header--large":"large"===i,"status-dialog__header--xlarge":"xlarge"===i})},o.createElement(Ut,{currency:r}),p()===Dt.FX.SUCCESS&&o.createElement(Bt,{className:"bottom-right-overlay"}),p()===Dt.FX.WARN&&o.createElement($t,{className:"bottom-right-overlay"}),p()===Dt.FX.DANGER&&o.createElement(Vt,{className:"bottom-right-overlay"})),o.createElement("div",{className:k()("status-dialog__body",{"status-dialog__body--no-grow":(0,d.isMobile)()})},o.createElement(jt,{status:p(),landing_company_shortcode:m}),o.createElement(Rt,{country_standpoint:n,currency:r,is_fully_authenticated:s,landing_company_shortcode:m,status:p()})),o.createElement(Wt,{closeModal:t,closeModalAndOpenPOI:function(){t(),a.push(d.routes.proof_of_identity)},closeModalAndOpenPOA:function(){t(),a.push(d.routes.proof_of_address)},closeModalAndOpenCashier:function(){t(),a.push(d.routes.cashier_deposit)},is_fully_authenticated:s,landing_company_shortcode:m,status:p(),switchToVirtual:f}))};Ht.defaultProps={icon_size:"large"},Ht.propTypes={currency:a().string,closeModal:a().func,icon:a().object,icon_size:a().string,is_isle_of_man_residence:a().bool,is_belgium_residence:a().bool};const Yt=(0,h.$j)((function(e){var t=e.client;return{country_standpoint:t.country_standpoint,landing_company_shortcode:t.landing_company_shortcode,is_fully_authenticated:t.is_fully_authenticated,is_age_verified:t.is_age_verified,is_isle_of_man_residence:"im"===t.residence,is_belgium_residence:"be"===t.residence,switchToVirtual:function(){return t.switchAccount(t.virtual_account_loginid)}}}))((0,N.withRouter)(Ht));function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt={account_wizard:0,add_or_manage_account:1,finished_set_currency:2,status_dialog:3,set_currency:4,signup_error:5,choose_crypto_currency:6,add_currency:7,finished_add_currency:8},qt=function(e){var t=e.real_account_signup_target,n=e.currency,r=e.is_isle_of_man_residence,a=e.country_standpoint,i="iom"===t,c="deposit_cash"===t;if(!("maltainvest"===t)&&!n)return o.createElement(m.Localize,{i18n_default_text:"Set a currency for your real account"});if(c)return o.createElement(m.Localize,{i18n_default_text:"Add a Deriv Gaming account"});if(i&&r)return o.createElement(m.Localize,{i18n_default_text:"Add a Deriv account"});switch(t){case"malta":return a.is_united_kingdom||a.is_rest_of_eu||a.is_belgium?o.createElement(m.Localize,{i18n_default_text:"Add a real Deriv Options account"}):o.createElement(m.Localize,{i18n_default_text:"Add a Deriv Synthetic account"});case"iom":return a.is_united_kingdom?o.createElement(m.Localize,{i18n_default_text:"Add a real Deriv Gaming account"}):o.createElement(m.Localize,{i18n_default_text:"Add a Deriv Synthetic account"});case"maltainvest":return a.is_united_kingdom||a.is_france||a.is_other_eu||a.is_rest_of_eu?o.createElement(m.Localize,{i18n_default_text:"Add a real Deriv Multipliers account"}):o.createElement(m.Localize,{i18n_default_text:"Add a Deriv Financial account"});case"samoa":return o.createElement(m.Localize,{i18n_default_text:"Terms of use"});default:return o.createElement(m.Localize,{i18n_default_text:"Add a Deriv account"})}};const Qt=(0,h.$j)((function(e){var t=e.ui,n=e.client,r=e.common,a=e.modules;return{available_crypto_currencies:n.available_crypto_currencies,has_fiat:n.has_fiat,has_real_account:n.has_active_real_account,continueRoute:a.cashier.general_store.continueRoute,currency:n.currency,deposit_target:a.cashier.general_store.deposit_target,is_eu:n.is_eu,country_standpoint:n.country_standpoint,is_real_acc_signup_on:t.is_real_acc_signup_on,real_account_signup_target:t.real_account_signup_target,replaceCashierMenuOnclick:a.cashier.general_store.replaceCashierMenuOnclick,closeRealAccountSignup:t.closeRealAccountSignup,setParams:t.setRealAccountSignupParams,is_from_restricted_country:n.is_from_restricted_country,is_isle_of_man_residence:"im"===n.residence,is_belgium_residence:"be"===n.residence,setIsDeposit:a.cashier.general_store.setIsDeposit,should_show_all_available_currencies:a.cashier.general_store.should_show_all_available_currencies,state_value:t.real_account_signup,routing_history:r.app_routing_history,deposit_real_account_signup_target:t.deposit_real_account_signup_target}}))((0,N.withRouter)((function(e){var t=e.available_crypto_currencies,n=e.closeRealAccountSignup,r=e.continueRoute,a=e.currency,i=e.deposit_target,c=e.has_fiat,l=e.has_real_account,s=e.country_standpoint,u=e.history,f=e.is_belgium_residence,p=e.is_from_restricted_country,g=e.is_isle_of_man_residence,h=e.is_eu,y=e.is_real_acc_signup_on,b=e.real_account_signup_target,v=e.replaceCashierMenuOnclick,E=e.routing_history,w=e.setIsDeposit,S=e.setParams,A=e.should_show_all_available_currencies,x=e.state_index,C=e.state_value,N=e.deposit_real_account_signup_target,z=Xt(o.useState(null),2),O=z[0],I=z[1],M=Xt(o.useState(!1),2),T=M[0],D=M[1],L=Xt(o.useState(null),2),j=L[0],R=L[1],P=Xt(o.useState(!1),2),F=P[0],W=P[1],U=Xt(o.useState([{action:"signup",body:function(e){return o.createElement(Fe,{setIsRiskWarningVisible:W,onFinishSuccess:B,onOpenWelcomeModal:$,is_loading:e.is_loading,setLoading:H,onError:Y,onClose:G})},title:qt},{action:"multi",body:function(e){return o.createElement(_t,{onSuccessSetAccountCurrency:Z,is_loading:e.is_loading,setLoading:H,onError:Y,is_add_crypto:"add_crypto"===e.real_account_signup_target,is_add_fiat:"add_fiat"===e.real_account_signup_target,is_add_currency:"add_currency"===e.real_account_signup_target,deposit_target:e.deposit_target})},title:function(e){var t;return"add_crypto"===e.real_account_signup_target?(0,m.localize)("Create a cryptocurrency account"):"add_fiat"===e.real_account_signup_target?(0,m.localize)("Add a Deriv real account"):"add_currency"===e.real_account_signup_target?(0,m.localize)("Create a new account"):e.has_fiat&&0===(null===(t=e.available_crypto_currencies)||void 0===t?void 0:t.length)?(0,m.localize)("Manage account"):(0,m.localize)("Add or manage account")}},{body:function(e){return o.createElement(kt,{prev:e.state_value.previous_currency,current:e.state_value.current_currency,onCancel:G,onSubmit:V,deposit_real_account_signup_target:e.deposit_real_account_signup_target,deposit_target:e.deposit_target,closeRealAccountSignup:n,continueRoute:r,setIsDeposit:w,history:u})},title:function(e){var t;return e.has_fiat&&0===(null===(t=e.available_crypto_currencies)||void 0===t?void 0:t.length)?(0,m.localize)("Manage account"):(0,m.localize)("Add or manage account")}},{body:function(e){return o.createElement(Yt,{currency:e.state_value.currency,closeModal:G})}},{body:function(e){return o.createElement(wt,{is_loading:e.is_loading,setLoading:H,onError:Y,onClose:G,onSuccessSetAccountCurrency:Z})},title:qt},{body:function(e){return o.createElement(Tt,{message:e.state_value.error_message,code:e.state_value.error_code,onConfirm:X})},title:function(){return(0,m.localize)("Add a real account")}},{body:function(){return o.createElement(yt,{className:"account-wizard__body",onError:Y})},title:function(e){return e.should_show_all_available_currencies?(0,m.localize)("Choose an account"):(0,m.localize)("Choose a cryptocurrency account")}},{body:function(){return o.createElement(rt,{className:"account-wizard__body",onError:Y})},title:function(){return(0,m.localize)("Create a new account")}},{body:function(e){return o.createElement(At,{prev:e.state_value.previous_currency,current:e.state_value.current_currency,onSubmit:V,deposit_real_account_signup_target:e.deposit_real_account_signup_target,deposit_target:e.deposit_target,closeRealAccountSignup:n,continueRoute:r,setIsDeposit:w,history:u})}}]),1)[0],B=function(e){S({active_modal_index:Jt.status_dialog,currency:e})},$=function(e){n(),S({currency:e})},V=function(){v(),n(),u.push(d.routes.cashier_deposit)},Z=function(e,t,n){S({previous_currency:e,current_currency:t,active_modal_index:n?Jt.finished_add_currency:Jt.finished_set_currency})},H=function(e){D(e)},Y=function(e,t){var n;t&&function(e){localStorage.setItem("real_account_signup_wizard",JSON.stringify(e.map((function(e){return"object"===Gt(e.form_value)&&e.form_value}))))}(t),I(null===(n=U[K()])||void 0===n?void 0:n.action),R(e)};o.useEffect((function(){j&&S({active_modal_index:Jt.signup_error,error_message:j.message,error_code:j.code})}),[j]),o.useEffect((function(){p&&S({active_modal_index:Jt.signup_error,error_message:(0,m.localize)("Sorry, account opening is unavailable in your region."),error_code:"InvalidAccount"})}),[p,y]);var G=function(e){v(),"noopener noreferrer"===(null==e?void 0:e.target.getAttribute("rel"))||null!=e&&e.target.closest(".redirect-notice")||null!=e&&e.target.closest(".dc-popover__bubble")||(K()!==Jt.status_dialog&&(sessionStorage.removeItem("post_real_account_signup"),localStorage.removeItem("real_account_signup_wizard")),n(),(0,d.isNavigationFromExternalPlatform)(E,d.routes.smarttrader)&&(window.location=d.routes.smarttrader),(0,d.isNavigationFromExternalPlatform)(E,d.routes.binarybot)&&(window.location=d.routes.binarybot))},X=function(){S({active_modal_index:"multi"===O?Jt.add_or_manage_account:Jt.account_wizard})},K=function(){return"choose"===b?Jt.choose_crypto_currency:["add_crypto","add_fiat","add_currency"].includes(b)?Jt.add_or_manage_account:-1===C.active_modal_index?l&&a&&"manage"===b?Jt.add_or_manage_account:a||"maltainvest"===b?Jt.account_wizard:Jt.set_currency:C.active_modal_index},J=U[K()],q=J.title,Q=J.body,ee=Jt.account_wizard,te=Jt.add_or_manage_account,ne=Jt.finished_set_currency,re=Jt.status_dialog,ae=Jt.set_currency,oe=Jt.signup_error,ie=[ee,te,ae,oe].includes(K());return o.createElement(o.Fragment,null,o.createElement(_.DesktopWrapper,null,o.createElement(_.Modal,{id:"real_account_signup_modal",className:k()("real-account-signup-modal",{"dc-modal__container_real-account-signup-modal--error":K()===oe,"dc-modal__container_real-account-signup-modal--success":[ne,re].includes(K())}),is_open:y,is_risk_warning_visible:F,has_close_icon:"samoa"!==b,is_title_centered:"samoa"===b,renderTitle:function(){return q&&![ne,re].includes(K())?o.createElement(q,{real_account_signup_target:b,currency:a,is_isle_of_man_residence:g,is_belgium_residence:f,is_eu:h,has_fiat:c,available_crypto_currencies:t,should_show_all_available_currencies:A,country_standpoint:s}):null},toggleModal:G,height:K()===Jt.status_dialog?"auto":a?l&&a?h&&K()===Jt.add_or_manage_account?"420px":[Jt.finished_set_currency,Jt.finished_add_currency].includes(K())?"auto":"644px":"740px":"688px",width:ie?"904px":"auto",elements_to_ignore:[document.querySelector(".modal-root")]},y&&o.createElement(Q,{state_value:C,passthrough:x,is_loading:T,real_account_signup_target:b,deposit_real_account_signup_target:N,deposit_target:i}))),o.createElement(_.MobileWrapper,null,o.createElement(_.MobileDialog,{portal_element_id:"modal_root",wrapper_classname:"account-signup-mobile-dialog",visible:y,onClose:G,renderTitle:function(){return q?o.createElement(q,{real_account_signup_target:b,currency:a,is_isle_of_man_residence:g,is_belgium_residence:f,should_show_all_available_currencies:A,country_standpoint:s}):null}},y&&o.createElement(Q,{state_value:C,passthrough:x,is_loading:T,real_account_signup_target:b,deposit_real_account_signup_target:N,deposit_target:i}))))})));var en=function(e){var t=e.is_visible,n=e.is_virtual,r=e.should_set_currency_modal_title_change,a=e.setCurrency,i=e.toggleModal;return o.createElement(_.Modal,{id:"dt_set_account_currency_modal",has_close_icon:!1,is_open:t,small:!0,toggleModal:i,title:r?(0,m.localize)("No currency assigned to your account"):(0,m.localize)("You have an account that needs action")},o.createElement(_.Modal.Body,null,(0,m.localize)("Please set a currency for your existing real account before creating another account.")),o.createElement(_.Modal.Footer,null,n?o.createElement(_.Button,{has_effect:!0,text:(0,m.localize)("OK"),onClick:i,primary:!0}):o.createElement(o.Fragment,null,o.createElement(_.Button,{has_effect:!0,text:(0,m.localize)("Cancel"),onClick:i,secondary:!0}),o.createElement(_.Button,{has_effect:!0,text:(0,m.localize)("Set currency"),onClick:function(){i(),setTimeout((function(){a()}),250)},primary:!0}))))};en.propTypes={is_virtual:a().bool,is_visible:a().bool,should_set_currency_modal_title_change:a().bool,setCurrency:a().func,toggleModal:a().func};const tn=(0,h.$j)((function(e){var t=e.client,n=e.modules,r=e.ui;return{is_virtual:t.is_virtual,is_visible:r.is_set_currency_modal_visible,should_set_currency_modal_title_change:n.cashier.general_store.should_set_currency_modal_title_change,setCurrency:r.openRealAccountSignup,toggleModal:r.toggleSetCurrencyModal}}))(en);const nn=function(e){var t=e.onUpdate;return o.useEffect((function(){var e=function(){document.removeEventListener("UpdateAvailable",t)},n=function(){document.addEventListener("UpdateAvailable",t)};return document.addEventListener("UpdateAvailable",t),document.addEventListener("IgnorePWAUpdate",e),document.addEventListener("ListenPWAUpdate",n),function(){document.removeEventListener("IgnorePWAUpdate",e),document.removeEventListener("ListenPWAUpdate",n),document.removeEventListener("UpdateAvailable",t)}}),[]),null};var rn=n(95857),an=n(37781),on=n(56609);function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const sn=(0,h.$j)((function(e){var t=e.client;return{balance:t.balance,currency:t.currency}}))((function(e){var t=e.balance,n=e.currency,r=cn(o.useState(!1),2),a=r[0],i=r[1];o.useEffect((function(){window.toggleTempAppSettings=function(){return i(!a)}}),[]);var c=[{key:"trading_limits",title:(0,m.localize)("Trading limits"),component:on.t6},{key:"account_limits",title:(0,m.localize)("Account limits"),component:on.J0},{key:"api_token",title:(0,m.localize)("API Token"),component:on.pQ}],l=function(){return i(!a)};return o.createElement(o.Fragment,null,o.createElement(_.Popup,{active_tab_icon_color:"var(--text-general)",balance:parseFloat(t),close_icon_color:"var(--text-general)",Component:function(e){var t=e.overlay_ref,n=e.setIsOverlayShown;return o.createElement(_.AppSettings,{menu_items:c,overlay_ref:t,setIsOverlayShown:n})},currency:n,header_backgound_color:"var(--general-section-1)",header_big_text:(0,m.localize)("Settings"),header_contents_color:"var(--text-general)",header_icon:"IcBrandDerivApps",onHeaderButtonClick:l,should_show_popup:a,title:"Deriv Apps USD",togglePopupModal:l}))}));var un=function(e){var t,n=e.acc_switcher_disabled_message,r=e.account_status,a=e.account_type,i=e.addNotificationMessage,c=e.app_routing_history,l=e.balance,s=e.client_notifications,u=e.currency,m=e.country_standpoint,f=e.disableApp,p=e.enableApp,g=e.header_extension,h=e.history,y=e.is_acc_switcher_disabled,b=e.is_acc_switcher_on,v=e.is_app_disabled,E=e.is_bot_allowed,w=e.is_dark_mode,S=e.is_dxtrade_allowed,A=e.is_eu,x=e.is_logged_in,C=e.is_logging_in,N=e.is_mt5_allowed,z=e.is_notifications_visible,O=e.is_onramp_tab_visible,I=e.is_p2p_enabled,M=e.is_payment_agent_transfer_visible,T=e.is_payment_agent_visible,D=e.is_account_transfer_visible,L=e.is_route_modal_on,j=e.is_virtual,R=e.location,P=e.logoutClient,F=e.menu_items,W=e.notifications_count,U=e.openRealAccountSignup,B=e.platform,$=e.replaceCashierMenuOnclick,V=e.removeNotificationMessage,Z=e.setDarkMode,H=e.should_allow_authentication,X=e.toggleAccountsDialog,K=e.toggleNotifications,J=e.changeCurrentLanguage,q=o.useRef(null),Q=o.useCallback((function(){return V({key:"new_version_available"})}),[V]);o.useEffect((function(){return document.addEventListener("IgnorePWAUpdate",Q),function(){return document.removeEventListener("IgnorePWAUpdate",Q)}}),[Q]);var ee=function(e){return e.filter((function(e){return e.link_to===d.routes.mt5?!x||N:e.link_to===d.routes.dxtrade?S:e.link_to!==d.routes.bot&&e.href!==d.routes.binarybot&&e.href!==d.routes.smarttrader||E}))};return o.createElement("header",{className:k()("header",{"header--is-disabled":v||L,"header--is-hidden":d.platforms[B]})},o.createElement("div",{className:"header__menu-items"},o.createElement("div",{className:"header__menu-left"},o.createElement(_.DesktopWrapper,null,o.createElement(Y.Ls,{app_routing_history:c,platform_config:ee(G.Z)})),o.createElement(_.MobileWrapper,null,o.createElement(rn.Z,{changeCurrentLanguage:J,ref:q,should_allow_authentication:H,account_status:r,enableApp:p,disableApp:f,location:R,logoutClient:P,is_dark_mode:w,is_logged_in:x,is_p2p_enabled:I,is_payment_agent_transfer_visible:M,is_onramp_tab_visible:O,is_payment_agent_visible:T,is_account_transfer_visible:D,is_virtual:j,toggleTheme:Z,platform_header:(0,d.getPlatformInformation)(c).header,platform_switcher:o.createElement(Y.Ls,{app_routing_history:c,is_mobile:!0,platform_config:ee(G.Z),toggleDrawer:null===(t=q.current)||void 0===t?void 0:t.toggleDrawer})}),g&&x&&o.createElement("div",{className:"header__menu-left-extensions"},g)),F&&$(),o.createElement(Y.IV,{is_logged_in:x,items:F})),o.createElement("div",{className:k()("header__menu-right",{"header__menu-right--hidden":(0,d.isMobile)()&&C})},C&&o.createElement("div",{id:"dt_core_header_acc-info-preloader",className:k()("acc-info__preloader",{"acc-info__preloader--no-currency":!u,"acc-info__preloader--is-crypto":(0,d.getDecimalPlaces)(u)>2})},o.createElement(an.vN,{is_logged_in:x,is_mobile:(0,d.isMobile)(),speed:3})),o.createElement("div",{id:"dt_core_header_acc-info-container",className:"acc-info__container"},o.createElement(Y.bF,{acc_switcher_disabled_message:n,account_type:a,balance:l,currency:u,country_standpoint:m,disableApp:f,enableApp:p,is_acc_switcher_on:b,is_acc_switcher_disabled:y,is_eu:A,is_notifications_visible:z,is_logged_in:x,is_virtual:j,onClickDeposit:function(){return h.push(d.routes.cashier_deposit)},notifications_count:W,toggleAccountsDialog:X,toggleNotifications:K,openRealAccountSignup:U})))),o.createElement(Qt,null),o.createElement(tn,null),o.createElement(nn,{onUpdate:function(){return i(s.new_version_available)}}),o.createElement(sn,null))};un.propTypes={acc_switcher_disabled_message:a().string,account_type:a().string,should_allow_authentication:a().bool,account_status:a().object,addNotificationMessage:a().func,app_routing_history:a().array,balance:a().string,client_notifications:a().object,currency:a().string,disableApp:a().func,enableApp:a().func,header_extension:a().any,is_acc_switcher_disabled:a().bool,is_acc_switcher_on:a().bool,is_app_disabled:a().bool,is_bot_allowed:a().bool,is_dark_mode:a().bool,is_eu:a().bool,is_loading:a().bool,is_logged_in:a().bool,is_logging_in:a().bool,is_mt5_allowed:a().bool,is_dxtrade_allowed:a().bool,is_notifications_visible:a().bool,is_account_transfer_visible:a().bool,is_route_modal_on:a().bool,is_virtual:a().bool,logoutClient:a().func,notifications_count:a().number,openRealAccountSignup:a().func,platform:a().string,removeNotificationMessage:a().func,replaceCashierMenuOnclick:a().func,setDarkMode:a().func,toggleAccountsDialog:a().func,toggleNotifications:a().func};const _n=(0,h.$j)((function(e){var t=e.client,n=e.common,r=e.ui,a=e.menu,o=e.modules,i=e.notifications;return{changeCurrentLanguage:n.changeCurrentLanguage,acc_switcher_disabled_message:r.account_switcher_disabled_message,account_status:t.account_status,account_type:t.account_type,should_allow_authentication:t.should_allow_authentication,addNotificationMessage:i.addNotificationMessage,app_routing_history:n.app_routing_history,balance:t.balance,client_notifications:i.client_notifications,currency:t.currency,country_standpoint:t.country_standpoint,disableApp:r.disableApp,enableApp:r.enableApp,header_extension:r.header_extension,is_acc_switcher_disabled:r.is_account_switcher_disabled,is_acc_switcher_on:!!r.is_accounts_switcher_on,is_app_disabled:r.is_app_disabled,is_bot_allowed:t.is_bot_allowed,is_dark_mode:r.is_dark_mode_on,is_eu:t.is_eu,is_loading:r.is_loading,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_mt5_allowed:t.is_mt5_allowed,is_dxtrade_allowed:t.is_dxtrade_allowed,is_notifications_visible:i.is_notifications_visible,is_p2p_enabled:o.cashier.general_store.is_p2p_enabled,is_payment_agent_transfer_visible:o.cashier.payment_agent_transfer.is_payment_agent_transfer_visible,is_onramp_tab_visible:o.cashier.onramp.is_onramp_tab_visible,is_payment_agent_visible:o.cashier.payment_agent.is_payment_agent_visible,is_account_transfer_visible:o.cashier.account_transfer.is_account_transfer_visible,is_route_modal_on:r.is_route_modal_on,is_virtual:t.is_virtual,logoutClient:t.logout,menu_items:a.extensions,notifications_count:i.filtered_notifications.length,openRealAccountSignup:r.openRealAccountSignup,replaceCashierMenuOnclick:o.cashier.general_store.replaceCashierMenuOnclick,platform:n.platform,removeNotificationMessage:i.removeNotificationMessage,setDarkMode:r.setDarkMode,toggleAccountsDialog:r.toggleAccountsDialog,toggleNotifications:i.toggleNotificationsModal}}))((0,N.withRouter)(un));var dn=n(32577),mn=function(){return o.createElement("div",{className:"dashboard-platform-header__divider"})},fn=function(){var e=(0,N.useHistory)();return o.createElement("div",{className:"dashboard-platform-header__my-apps",onClick:function(){return e.push(d.routes.dashboard)}},o.createElement(_.Icon,{icon:"IcWalletMyApps",size:16}),o.createElement(_.Text,{size:"s",line_height:"xxl",weight:"bold",className:"dashboard-platform-header__my-apps--title"},(0,m.localize)("My apps")),o.createElement(mn,null))},pn=function(e){var t=e.app_routing_history;return o.createElement("div",{className:"dashboard-platform-header__platform-information"},o.createElement(_.Icon,{className:"dashboard-platform-header__platform-information--icon",icon:(0,d.getPlatformInformation)(t).icon,size:24}),o.createElement(_.Text,{size:"s",weight:"bold",line_height:"xxl"},(0,d.getPlatformInformation)(t).header))},gn=function(){return o.createElement("div",{className:"dashboard-platform-header__report"},o.createElement(dn.CG,{id:"db_reports_tab",key:"db_reports_tab",to:d.routes.reports},o.createElement(_.Icon,{icon:"IcReports",size:20})))},hn=function(e){var t=e.is_notifications_visible,n=e.notifications_count,r=e.toggleNotifications;return o.createElement("div",{className:"dashboard-platform-header__notification"},o.createElement(Y.Rv,{count:n,is_visible:t,toggleDialog:r,tooltip_message:o.createElement(m.Localize,{i18n_default_text:"View notifications"})}))},yn=function(e){var t=e.toggleSettings;return o.createElement("div",{className:"dashboard-platform-header__setting"},o.createElement(_.Popover,{alignment:"top"},o.createElement("a",{id:"dt_settings_toggle",onClick:t,className:"dashboard-platform-header__setting--icon"},o.createElement(_.Icon,{icon:"IcGearLight",size:22}))))},bn=function(e){var t=e.balance,n=e.currency;return o.createElement("div",{className:"dashboard-platform-header__balance"},o.createElement(mn,null),o.createElement(_.Icon,{icon:"IcWalletDerivApps",size:28,className:"dashboard-platform-header__balance--icon"}),o.createElement(_.Text,{size:"s",line_height:"xxl",weight:"bold",color:"profit-success"},o.createElement(_.Money,{amount:t,currency:n,show_currency:!0})))},vn=function(e){var t,n,r=e.account_status,a=e.app_routing_history,i=e.balance,c=e.currency,l=e.disableApp,s=e.enableApp,u=e.header_extension,f=e.is_dark_mode,p=e.is_logged_in,g=e.is_mt5_allowed,h=e.is_notifications_visible,y=e.is_onramp_tab_visible,b=e.is_p2p_enabled,v=e.is_payment_agent_transfer_visible,E=e.is_payment_agent_visible,w=e.is_account_transfer_visible,S=e.is_settings_modal_on,A=e.is_virtual,x=e.location,C=e.logoutClient,k=e.notifications_count,z=e.setDarkMode,O=e.settings_extension,I=e.should_allow_authentication,M=e.toggleNotifications,T=e.toggleSettingsModal,D=o.useRef(null),L=(0,N.useHistory)();return o.createElement("header",{className:"dashboard-platform-header"},o.createElement("div",{className:"dashboard-platform-header__menu-left"},o.createElement(_.MobileWrapper,null,o.createElement(rn.Z,{ref:D,should_allow_authentication:I,account_status:r,enableApp:s,disableApp:l,location:x,logoutClient:C,is_dark_mode:f,is_logged_in:p,is_p2p_enabled:b,is_payment_agent_transfer_visible:v,is_onramp_tab_visible:y,is_payment_agent_visible:E,is_account_transfer_visible:w,is_virtual:A,toggleTheme:z,platform_header:(0,d.getPlatformInformation)(a).header,platform_switcher:o.createElement(Y.Ls,{app_routing_history:a,is_mobile:!0,platform_config:(n=G.Z,n.filter((function(e){return e.link_to!==d.routes.mt5||!p||g}))),toggleDrawer:null===(t=D.current)||void 0===t?void 0:t.toggleDrawer})}),u&&p&&o.createElement("div",null,u)),o.createElement(_.DesktopWrapper,null,o.createElement(fn,null),o.createElement(pn,{app_routing_history:a}))),o.createElement("div",{className:"dashboard-platform-header__menu-right"},o.createElement(_.DesktopWrapper,null,o.createElement(gn,null)),o.createElement(hn,{is_notifications_visible:h,notifications_count:k,toggleNotifications:M}),o.createElement(_.DesktopWrapper,null,o.createElement(yn,{disableApp:l,enableApp:s,is_settings_modal_on:S,toggleSettingsModal:T,settings_extension:O})),o.createElement(bn,{balance:i,currency:c}),o.createElement(_.Button,{small:(0,d.isMobile)(),has_effect:!0,text:(0,m.localize)("Top up"),onClick:function(){return L.push(d.routes.dashboard)},primary:!0,className:"dashboard-platform-header__button"})))};vn.propTypes={account_status:a().object,app_routing_history:a().array,balance:a().oneOfType([a().number,a().string]),currency:a().string,disableApp:a().func,enableApp:a().func,header_extension:a().any,is_dark_mode:a().bool,is_logged_in:a().bool,is_mt5_allowed:a().bool,is_notifications_visible:a().bool,is_onramp_tab_visible:a().bool,is_p2p_enabled:a().bool,is_payment_agent_transfer_visible:a().bool,is_payment_agent_visible:a().bool,is_account_transfer_visible:a().bool,is_virtual:a().bool,logoutClient:a().func,notifications_count:a().number,setDarkMode:a().func,should_allow_authentication:a().bool,toggleNotifications:a().func};const En=(0,h.$j)((function(e){var t=e.client,n=e.common,r=e.modules,a=e.notifications,o=e.ui;return{account_status:t.account_status,app_routing_history:n.app_routing_history,balance:t.balance,currency:t.currency,disableApp:o.disableApp,enableApp:o.enableApp,header_extension:o.header_extension,is_dark_mode:o.is_dark_mode_on,is_logged_in:t.is_logged_in,is_mt5_allowed:t.is_mt5_allowed,is_notifications_visible:a.is_notifications_visible,is_onramp_tab_visible:r.cashier.onramp.is_onramp_tab_visible,is_p2p_enabled:r.cashier.general_store.is_p2p_enabled,is_payment_agent_transfer_visible:r.cashier.payment_agent_transfer.is_payment_agent_transfer_visible,is_payment_agent_visible:r.cashier.payment_agent.is_payment_agent_visible,is_account_transfer_visible:r.cashier.account_transfer.is_account_transfer_visible,is_virtual:t.is_virtual,logoutClient:t.logout,notifications_count:a.filtered_notifications.length,setDarkMode:o.setDarkMode,should_allow_authentication:t.should_allow_authentication,toggleNotifications:a.toggleNotificationsModal}}))((0,N.withRouter)(vn));var wn=n(50483),Sn=n(32682),An=n(33192),xn=n(10142),Cn=n(2362),kn=n(83170),Nn=n(6591),zn=n(37672),On=function(e){var t=e.is_dark_mode,n=(0,N.useHistory)();return o.createElement("header",{className:"dashboard-header dashboard-header--logged-in"},o.createElement("div",{className:"dashboard-header__left"},o.createElement("div",{onClick:function(){return n.push(d.routes.dashboard)}},(0,d.isDesktop)()?t?o.createElement(Sn.Z,null):o.createElement(xn.Z,null):t?o.createElement(An.Z,null):o.createElement(Cn.Z,null))),o.createElement("div",{className:"dashboard-header__right--logged-in"},(0,d.isDesktop)()?o.createElement(o.Fragment,null,o.createElement(_.Icon,{icon:"IcProfile",size:32,className:"dashboard-header__right--logged-in-icon"}),o.createElement(_.Icon,{icon:"IcNotification",size:32})):o.createElement(o.Fragment,null,o.createElement(_.Icon,{icon:"IcNotificationClear",height:20,width:17}),o.createElement("div",{className:"dashboard-header__right--logged-in-separator"}),o.createElement(rn.Z,{alignment:"right",is_logged_in:!0,should_allow_authentication:!0,title:""}))))},In=function(){var e=(0,N.useHistory)(),t=o.useContext(d.PlatformContext).is_dashboard;return o.createElement("header",{className:"dashboard-header dashboard-header--logged-out"},o.createElement("div",{className:"dashboard-header__left"},o.createElement("div",{onClick:function(){return e.push(d.routes.dashboard)}},(0,d.isDesktop)()?o.createElement(o.Fragment,null,o.createElement(wn.Z,{className:"dashboard-header__left--desktop-logo"}),o.createElement(Nn.Z,null)):o.createElement(kn.Z,null))),o.createElement("div",{className:"dashboard-header__middle--logged-out"},o.createElement(_.Text,{color:"colored-background",size:"s",onClick:function(){return e.push(d.routes.explore)}},(0,m.localize)("Explore")),o.createElement(_.Text,{color:"colored-background",size:"s",onClick:function(){return e.push(d.routes.about_us)}},(0,m.localize)("About us")),o.createElement(_.Text,{color:"colored-background",size:"s",onClick:function(){return e.push(d.routes.resources)}},(0,m.localize)("Resources"))),o.createElement("div",{className:"dashboard-header__right--logged-out"},o.createElement(_.Button.Group,null,o.createElement(_.Button,{alternate:!0,has_effect:!0,text:(0,m.localize)("Log in"),onClick:function(){return(0,d.redirectToLogin)(!1,(0,m.getLanguage)())}}),o.createElement(_.Button,{className:"dashboard-header__right--create-button",primary:!0,text:(0,m.localize)("Create free demo account"),onClick:function(){return(0,d.redirectToSignUp)({is_dashboard:t})}})),(0,d.isMobile)()&&o.createElement(o.Fragment,null,o.createElement("div",{className:"dashboard-header__right--logged-out-separator"}),o.createElement(rn.Z,{alignment:"right",should_allow_authentication:!0,title:""}))))},Mn=function(){return o.createElement("div",{className:"dashboard-header__preloader"},o.createElement(zn.Z,{speed:3}))},Tn=function(e){var t=e.is_dark_mode,n=e.is_logged_in;return e.is_logging_in?o.createElement(Mn,null):n?o.createElement(On,{is_dark_mode:t}):o.createElement(In,null)};Tn.propTypes={is_dark_mode:a().bool,is_logged_in:a().bool,is_logging_in:a().bool};const Dn=(0,h.$j)((function(e){var t=e.client;return{is_dark_mode:e.ui.is_dark_mode_on,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in}}))(Tn);const Ln=function(){return o.useContext(d.PlatformContext).is_dashboard?/myapps.deriv/.test(window.location.pathname)?o.createElement(En,null):o.createElement(Dn,null):o.createElement(_n,null)};var jn=n(81472),Rn=n(4390),Pn=n(20176);function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=function(e){var t=e.children;return(0,d.isMobile)()?i.createPortal(t,document.getElementById("deriv_app")):t},Bn=function(e){var t=e.is_notification_loaded,n=e.style,r=e.notifications,a=e.removeNotificationMessage,i=e.markNotificationMessage,c=e.landing_company_shortcode,l=e.has_iom_account,s=e.has_malta_account,u=e.is_logged_in,_=window.location;return o.useEffect((function(){if((l||s)&&u){var e=r.find((function(e){return"close_mx_mlt_account"===e.key}));(!("DTrader"===(0,d.getPathname)())&&e||"malta"===c||"iom"===c)&&i({key:"close_mx_mlt_account"})}}),[_]),o.createElement("div",{className:"notification-messages",style:n},o.createElement(jn.Z,{component:"div"},r.map((function(e,n){return o.createElement(Rn.Z,{appear:!t,key:n,in:!!e.header,timeout:150,classNames:{appear:"notification--enter",enter:"notification--enter",enterDone:"notification--enter-done",exit:"notification--exit"},unmountOnExit:!0},o.createElement(Pn.ZP,{data:e,removeNotificationMessage:a}))}))))},$n=function(e){var t=e.is_notification_loaded,n=e.is_mt5,r=e.marked_notifications,a=e.notification_messages,i=e.removeNotificationMessage,c=e.stopNotificationLoading,l=e.markNotificationMessage,s=e.landing_company_shortcode,u=e.has_iom_account,_=e.has_malta_account,m=e.is_logged_in,f=e.should_show_popups,p=Fn(o.useState({}),2),g=p[0],h=p[1],y=Fn(o.useState(null),2),b=y[0],v=y[1];o.useEffect((function(){if(n&&c(),b&&(0,d.isMobile)()&&null!==b.parentElement){var e=b.parentElement.getBoundingClientRect();h({top:e.top+8})}}),[n,b]);var E=a.filter((function(e){var t=!r.includes(e.key),n=!(0,d.isMobile)()||["unwelcome","contract_sold","dp2p","install_pwa","tnc","deriv_go","close_mx_mlt_account"].includes(e.key);return t&&n})),w=(0,d.isMobile)()?Pn.fh:Pn.S_,S=E.slice(0,w);return f&&S.length?o.createElement("div",{ref:function(e){return v(e)},className:"notification-messages-bounds"},o.createElement(Un,null,o.createElement(Bn,{notifications:S,is_notification_loaded:t,style:g,removeNotificationMessage:i,markNotificationMessage:l,landing_company_shortcode:s,has_iom_account:u,has_malta_account:_,is_logged_in:m}))):null};$n.propTypes={marked_notifications:a().array,notification_messages:a().arrayOf(a().shape({closeOnClick:a().func,delay:a().number,header:a().string,is_auto_close:a().bool,message:a().oneOfType([a().node,a().string]),size:a().oneOf(["small"]),type:a().oneOf(["warning","info","success","danger","contract_sold","news","announce","close_mx_mlt"])})),removeNotificationMessage:a().func};const Vn=(0,h.$j)((function(e){var t=e.client,n=e.notifications;return{marked_notifications:n.marked_notifications,notification_messages:n.notification_messages,removeNotificationMessage:n.removeNotificationMessage,markNotificationMessage:n.markNotificationMessage,landing_company_shortcode:t.landing_company_shortcode,has_iom_account:t.has_iom_account,has_malta_account:t.has_malta_account,is_logged_in:t.is_logged_in,should_show_popups:n.should_show_popups}}))($n);var Zn=n(240),Hn=n(78920),Yn=o.lazy((function(){return n.e(1301).then(n.bind(n,23810))})),Gn=o.lazy((function(){return n.e(6476).then(n.bind(n,13491))})),Xn=o.lazy((function(){return n.e(1708).then(n.bind(n,27381))})),Kn=o.lazy((function(){return n.e(2871).then(n.bind(n,39692))})),Jn=o.lazy((function(){return n.e(6530).then(n.bind(n,69930))})),qn=o.lazy((function(){return n.e(9e3).then(n.bind(n,72791))})),Qn=o.lazy((function(){return Promise.all([n.e(3635),n.e(3749),n.e(424),n.e(4002),n.e(268),n.e(6271),n.e(3377),n.e(4210)]).then(n.bind(n,26085))}));const er=(0,h.$j)((function(e){var t=e.client,n=e.ui;return{is_welcome_modal_visible:n.is_welcome_modal_visible,is_account_needed_modal_on:n.is_account_needed_modal_on,is_close_mx_mlt_account_modal_visible:n.is_close_mx_mlt_account_modal_visible,is_set_residence_modal_visible:n.is_set_residence_modal_visible,is_real_acc_signup_on:n.is_real_acc_signup_on,is_eu:t.is_eu,is_logged_in:t.is_logged_in,is_reality_check_visible:t.is_reality_check_visible}}))((function(e){var t=e.is_account_needed_modal_on,n=e.is_welcome_modal_visible,r=e.is_reality_check_visible,a=e.is_set_residence_modal_visible,i=e.is_close_mx_mlt_account_modal_visible,c=e.is_eu,l=e.is_logged_in,s=null;switch(new URLSearchParams((0,N.useLocation)().search).get("action")){case"redirect_to_login":s=o.createElement(Kn,null);break;case"reset_password":s=o.createElement(Xn,null);break;case"signup":s=o.createElement(Yn,null);break;default:a&&(s=o.createElement(Jn,null))}return i&&(s=o.createElement(Gn,null)),n&&(s=o.createElement(Qn,null)),t&&(s=o.createElement(Zn.Z,null)),r&&(s=o.createElement(qn,null)),o.createElement(o.Fragment,null,o.createElement(Hn.Z,{is_logged_in:l,is_eu:c,portal_id:"popup_root"}),s?o.createElement(o.Suspense,{fallback:o.createElement("div",null)},s):null)}));var tr=n(16),nr=n(23942);function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){or(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=n.n(nr)()({loader:function(){return Promise.resolve().then(n.bind(n,62792))},loading:_.UILoader,render:function(e,t){var n=e.default;return o.createElement(n,t)}}),cr=function(e){var t=e.addRouteHistoryItem,n=e.error,r=e.has_error,a=e.history,i=e.is_logged_in,c=e.is_logging_in,l=e.location,s=e.passthrough,u=e.setAppRouterHistory,_=e.setInitialRouteHistoryItem,f=o.useRef(null),p=o.useRef(null);o.useEffect((function(){return p.current||f.current||(f.current=l.pathname),_(a.location),p.current=a.listen((function(e,n){["PUSH","POP"].includes(n)&&t(ar(ar({},e),{},{action:n}))})),u(a),function(){"function"==typeof p.current&&(p.current(),p.current=null,f.current=null)}}),[]);var g=(0,m.getLanguage)(),h=/[?&]lang=/.test(l.search);return r?o.createElement(ir,n):((!h&&"EN"!==g||h&&"EN"===g)&&window.history.replaceState({},document.title,(0,d.urlForLanguage)(g)),o.createElement(dn.ZP,{is_logged_in:i,is_logging_in:c,passthrough:s}))};cr.propTypes={addRouteHistoryItem:a().func,error:tr.PropTypes.objectOrObservableObject,has_error:a().bool,history:a().object,is_logged_in:a().bool,is_logging_in:a().bool,is_virtual:a().bool,setAppRouterHistory:a().func,setInitialRouteHistoryItem:a().func};const lr=(0,N.withRouter)((0,h.$j)((function(e){var t=e.client,n=e.common;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,error:n.error,has_error:n.has_error,setAppRouterHistory:n.setAppRouterHistory,addRouteHistoryItem:n.addRouteHistoryItem,setInitialRouteHistoryItem:n.setInitialRouteHistoryItem}}))(cr));var sr=n(59001),ur=n(28284),_r=n(18880);(0,sr.configure)({enforceActions:"observed"});const dr=function(e){var t=window.location.search;if("signup"===new URLSearchParams(t).get("action")){var n=localStorage.getItem("config.server_url"),r=localStorage.getItem("config.app_id");localStorage.clear(),n&&localStorage.setItem("config.server_url",n),r&&localStorage.setItem("config.app_id",r)}var a=new _r.Z;return function(e){window.addEventListener("storage",(function(t){switch(t.key){case"client.accounts":var n,r,a,o,i=e.client.loginid,c=null===(n=JSON.parse(t.newValue))||void 0===n||null===(r=n[i])||void 0===r?void 0:r.currency,l=null===(a=JSON.parse(t.oldValue))||void 0===a||null===(o=a[i])||void 0===o?void 0:o.currency;document.hidden&&c&&l!==c&&e.client.updateAccountCurrency(c,!1);break;case"active_loginid":document.hidden&&window.location.reload();break;case"reality_check_dismissed":document.hidden&&e.client.setVisibilityRealityCheck(!JSON.parse(t.newValue))}}))}(a),ur.Z.init(a),a.client.init(),a.common.init(),a.pushwoosh.init(),a.notifications.init(),a.ui.init(e),a};var mr=n(74495),fr=n(46746);function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hr=function(e){var t=e.root_store,n=window.location,r=n.pathname.split("/")[1],a=/^\/(br_)/.test(n.pathname),i=pr((0,m.useOnLoadTranslation)(),1)[0];o.useEffect((function(){t.modules.attachModule("cashier",new(p())({root_store:t,WS:g.Z})),t.modules.cashier.general_store.init()}),[]),o.useEffect((function(){(0,m.initializeTranslations)(),(0,d.setUrlLanguage)((0,m.getLanguage)()),(0,d.initFormErrorMessages)(mr.U),(0,d.setSharedCFDText)(fr.B),l(),t.common.setPlatform()}),[]);var l=o.useCallback((function(){if((0,d.isTouchDevice)()&&((0,d.isMobile)()||(0,d.isTablet)())){var e="Android"===(0,d.mobileOSDetect)(),n=e?screen.availWidth:window.innerWidth,r=e?screen.availHeight:window.innerHeight,a=document.getElementById("landscape_blocker");n<=r?(t.ui.onOrientationChange({is_landscape_orientation:!1}),a.classList.remove("landscape-blocker--visible")):(t.ui.onOrientationChange({is_landscape_orientation:!0}),a.classList.add("landscape-blocker--visible"))}}),[t.ui]);o.useEffect((function(){var e=s()(l,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[l]);var u={root_store:t,WS:g.Z};return o.createElement(o.Fragment,null,i?o.createElement(c.BrowserRouter,{basename:a?"/".concat(r):null},o.createElement(h.z1,{store:t},o.createElement(F,null,o.createElement(Ln,null),o.createElement(x.Z,null,o.createElement(D,null,o.createElement(lr,{passthrough:u}))),o.createElement(_.DesktopWrapper,null,o.createElement(H,null)),o.createElement(er,null),o.createElement(y.Z,null),o.createElement(b.Z,null),o.createElement(A,null)))):o.createElement(o.Fragment,null))};hr.propTypes={root_store:a().object};var yr=(0,u.Z)()(hr);if(!(0,d.checkAndSetEndpointFromUrl)()){var br=dr(Vn),vr=document.getElementById("deriv_app");vr&&i.render(o.createElement(yr,{useSuspense:!1,root_store:br}),vr)}}}]);