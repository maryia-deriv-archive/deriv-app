"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["cfd"],{"./src/Modules/CFD/index.js":(e,t,a)=>{a.r(t),a.d(t,{CFDPasswordModal:()=>I,CFDServerErrorDialog:()=>R,default:()=>ea});var n=a("../../node_modules/formik/dist/formik.esm.js"),r=a("react"),o=a("react-router"),i=a("@deriv/account/dist/account/js/sent-email-modal"),l=a.n(i),c=a("./src/Stores/Modules/CFD/Helpers/cfd-config.ts"),s=a("@deriv/components"),u=a("@deriv/shared"),d=a("@deriv/translations"),_=a("../../node_modules/prop-types/index.js"),m=a.n(_),f=a("../../node_modules/classnames/index.js"),p=a.n(f);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g.apply(this,arguments)}var h=function(e){var t=e.className;return r.createElement(s.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})},v=function(e){var t=e.classNameMessage,a=void 0===t?"":t,n=e.has_cancel,o=e.has_submit,i=e.icon,l=e.message,c=e.onCancel,u=e.onSubmit,_=e.heading,m=e.icon_size,f=e.text_submit,v=e.text_cancel,b=e.is_open,y=e.toggleModal,w=e.title,E=e.has_close_icon,z=e.width,x=void 0===z?"":z,S=e.is_medium_button;return r.createElement(s.Modal,{className:"cfd-success-dialog",is_open:b,toggleModal:y,has_close_icon:E,small:!w,title:w,width:x},r.createElement(s.Modal.Body,null,r.createElement("div",{className:p()("success-change__icon-area",{"success-change__icon-area--large":"large"===m,"success-change__icon-area--xlarge":"xlarge"===m})},i,r.createElement(h,{className:"bottom-right-overlay"})),!_&&r.createElement(s.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},r.createElement(d.Localize,{i18n_default_text:"Success!"})),_&&_,r.isValidElement(l)&&l,!r.isValidElement(l)&&r.createElement("p",{className:a},l)),r.createElement(s.Modal.Footer,null,n&&r.createElement(s.Button,g({onClick:c,has_effect:!0,text:v||(0,d.localize)("Maybe later"),secondary:!0},S?{medium:!0}:{large:!0})),o&&r.createElement(s.Button,g({has_effect:!0,onClick:u,text:f,primary:!0},S?{medium:!0}:{large:!0}))))};v.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},v.propTypes={classNameMessage:m().string,has_cancel:m().bool,has_submit:m().bool,heading:m().oneOfType([m().string,m().object]),icon:m().object,icon_size:m().string,icon_type:m().string,is_medium_button:m().bool,message:m().oneOfType([m().string,m().object]),onCancel:m().func,onSubmit:m().func,text_cancel:m().string,text_submit:m().string,title:m().string,width:m().string};const b=v;var y=a("./src/Stores/connect.js");const w=function(e){var t=e.confirm_label,a=e.className,o=e.platform,i=e.onConfirm,l=e.onCancel;return r.createElement(n.J9,{initialValues:{password:""},onSubmit:i},(function(e){var n,i,c,_=e.isSubmitting,m=e.handleSubmit;return r.createElement("form",{onSubmit:m},r.createElement("div",{className:p()("cfd-change-password-confirmation__wrapper",(n={},i="".concat(a,"-wrapper"),c=a,i in n?Object.defineProperty(n,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[i]=c,n))},r.createElement("div",{className:p()("cfd-change-password-confirmation",a)},r.createElement(s.Icon,{className:"cfd-change-password__icon",icon:o===u.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),r.createElement(s.Text,{as:"p",align:"center",size:"s",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Confirm to change your {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(o)}})),r.createElement(s.Text,{className:"cfd-change-password-confirmation__description",as:"p",align:"center",color:"loss-danger",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"This will change the password to all of your {{platform}} accounts.",values:{platform:(0,u.getCFDPlatformLabel)(o)}})),r.createElement(s.FormSubmitButton,{is_center:!0,label:t||(0,d.localize)("Create"),cancel_label:(0,d.localize)("Cancel"),is_loading:_,has_cancel:!0,onCancel:l}))))}))};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},S.apply(this,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var C=function(e){var t=e.should_set_trading_password,a=e.should_show_server_form,n=e.account_title,o=e.is_password_reset_error,i=e.platform,l=(0,u.isMobile)()?"p":"span",c=(0,u.isMobile)()?{padding:"2rem"}:{};return r.createElement(s.Text,{styles:c,as:l,line_height:"m",weight:"bold",size:"s",align:"center"},!a&&!t&&!o&&r.createElement(d.Localize,{i18n_default_text:"Enter your {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(i)}}),!a&&o&&r.createElement(d.Localize,{i18n_default_text:"Too many attempts"}),a&&r.createElement(d.Localize,{i18n_default_text:"Choose a region for your DMT5 real {{ account_type }} account",values:{account_type:n}}))},N=function(e,t,a,n,o){if(!o&&!n)return"";var i="real"===o?(0,d.localize)("real"):(0,d.localize)("demo"),l=(0,c.o)(t)[o][n].short_title;return"real"===o?a?(0,d.localize)("We need proof of your identity and address before you can start trading."):r.createElement(d.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account. To start trading, transfer funds from your Deriv account into this account.",values:{type:l,platform:(0,u.getCFDPlatformLabel)(e),category:i},components:[r.createElement("i",{className:"cfd-account__platform",key:0}),r.createElement("strong",{key:1})]}):r.createElement(d.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account.",values:{type:l,platform:(0,u.getCFDPlatformLabel)(e),category:i},components:[r.createElement("i",{className:"cfd-account__platform",key:0}),r.createElement("strong",{key:1})]})},F=r.memo((function(e){var t=e.platform,a=e.type,n=e.is_eu;if(t===u.CFD_PLATFORMS.DXTRADE){if("synthetic"===a)return r.createElement(s.Icon,{icon:"IcDxtradeSyntheticPlatform",size:128});if("financial"===a)return r.createElement(s.Icon,{icon:"IcDxtradeFinancialPlatform",size:128})}switch(a){case"synthetic":return r.createElement(s.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return n?r.createElement(s.Icon,{icon:"IcMt5Cfds",size:128}):r.createElement(s.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return r.createElement(s.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}));F.displayName="IconType";var P=function(e,t,a,n){t(e),a().then((function(){n("password",!0)}))},A=function(e){var t=e.password,a=e.platform,o=e.validatePassword,i=e.onSubmit,l=e.error_message;return r.createElement(n.J9,{initialValues:{password:t},enableReinitialize:!0,validate:o,onSubmit:i},(function(e){var t=e.errors,n=e.isSubmitting,o=e.handleBlur,i=e.handleChange,c=e.handleSubmit,_=e.setFieldTouched,m=e.touched,f=e.values,p=e.validateForm;return r.createElement("form",{onSubmit:c},r.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body cfd-password-modal__create-password-content"},r.createElement(s.Icon,{icon:a===u.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),r.createElement(s.Text,{size:"s",weight:"bold",className:"cfd-password-modal__create-password-title"},r.createElement(d.Localize,{i18n_default_text:"Create a {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(a)}})),r.createElement(s.Text,{size:"xs",align:"center",className:"cfd-password-modal__create-password-description"},r.createElement(d.Localize,{i18n_default_text:"You can use this password for all your {{platform}} accounts.",values:{platform:(0,u.getCFDPlatformLabel)(a)}})),r.createElement("div",{className:"input-element"},r.createElement(s.PasswordMeter,{input:f.password,has_error:!(!m.password||!t.password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},(function(){return r.createElement(s.PasswordInput,{autoComplete:"new-password",label:(0,d.localize)("{{platform}} password",{platform:(0,u.getCFDPlatformLabel)(a)}),error:m.password&&t.password||(0===f.password.length?l:""),name:"password",value:f.password,onBlur:o,onChange:function(e){P(e,i,p,_)}})}))),r.createElement(s.FormSubmitButton,{is_disabled:!f.password||Object.keys(t).length>0,is_loading:n,label:(0,d.localize)("Create {{platform}} password",{platform:(0,u.getCFDPlatformLabel)(a)}),is_center:!0})))}))},k=function(e){var t=e.has_mt5_account,a=e.platform,n=e.error_message,o=e.validatePassword,i=e.submitPassword,l=r.useRef(),c=M(r.useState(""),2),d=c[0],_=c[1],m=[{component:r.createElement(A,{password:d,platform:a,error_message:n,validatePassword:o,onSubmit:function(e,n){var r;a===u.CFD_PLATFORMS.MT5&&t?(_(e.password),null===(r=l.current)||void 0===r||r.goNextStep()):i(e,n)}})},{component:r.createElement(w,{className:"cfd-password-modal__change-password-confirmation",platform:a,onConfirm:function(e,t){return i({password:d},t)},onCancel:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.goPrevStep()}})}];return r.createElement(s.MultiStep,{ref:l,steps:m})},O=function(e){var t,a,o,i,l=r.useMemo((function(){return e.should_show_server_form?(0,d.localize)("Next"):"PasswordReset"===e.error_type?(0,d.localize)("Try later"):(0,d.localize)("Add account")}),[e.should_show_server_form,e.error_type]),c=e.should_show_server_form||!(0,u.isDesktop)()||!e.should_set_trading_password||"PasswordReset"===e.error_type,_=(a=(t=e).should_set_trading_password,o=t.error_type,i=t.should_show_server_form,a&&"PasswordReset"!==o?(0,u.isDesktop)()?null:(0,d.localize)("Cancel"):i?(0,d.localize)("Back"):(0,d.localize)("Forgot password?")),m=function(){if(c)return e.should_set_trading_password?e.onCancel():e.onForgotPassword()};return"PasswordReset"===e.error_type?r.createElement(r.Fragment,null,r.createElement("div",{className:"cfd-password-reset"},r.createElement("div",{className:"cfd-password-modal__content cfd-password-modal__content--password-reset"},r.createElement(s.Text,{as:"p",line_height:"24",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"Please try again in a minute."}))),r.createElement(n.J9,{onSubmit:e.closeModal,initialValues:{}},(function(e){var t=e.handleSubmit;return r.createElement("form",{onSubmit:t},r.createElement(s.FormSubmitButton,{has_cancel:c,cancel_label:_,onCancel:m,is_absolute:(0,u.isMobile)(),label:l}))})))):e.should_set_trading_password?r.createElement(k,{platform:e.platform,error_message:e.error_message,validatePassword:e.validatePassword,submitPassword:e.submitPassword,has_mt5_account:e.has_mt5_account}):r.createElement(n.J9,{initialValues:{password:""},enableReinitialize:!0,validate:e.validatePassword,onSubmit:e.submitPassword},(function(t){var a=t.errors,n=t.isSubmitting,o=t.handleBlur,i=t.handleChange,f=t.handleSubmit,p=t.setFieldTouched,g=t.touched,h=t.values,v=t.validateForm;return r.createElement("form",{onSubmit:f},r.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body"},!e.should_set_trading_password&&r.createElement(s.Text,{size:"xs",className:"dc-modal__container_cfd-password-modal__account-title"},r.createElement(d.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} account.",values:{platform:(0,u.getCFDPlatformLabel)(e.platform),account:e.account_title}})),r.createElement("div",{className:"input-element"},r.createElement(s.PasswordInput,{autoComplete:"new-password",label:(0,d.localize)("{{platform}} password",{platform:(0,u.getCFDPlatformLabel)(e.platform)}),error:g.password&&a.password||(0===h.password.length?e.error_message:""),name:"password",value:h.password,onBlur:o,onChange:function(e){P(e,i,v,p)}})),e.is_real_financial_stp&&!e.is_bvi&&r.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},r.createElement(d.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA)."})),e.is_real_financial_stp&&e.is_bvi&&r.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},r.createElement(d.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (BVI) Ltd. All trading in this account is subject to the regulations and guidelines of the British Virgin Islands Financial Services Commission (BVIFSC). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the British Virgin Islands Financial Services Commission (BVIFSC)."})),"PasswordError"===e.error_type&&r.createElement(s.Text,{size:"xs",as:"p",className:"dc-modal__container_mt5-password-modal__hint"},r.createElement(d.Localize,{i18n_default_text:"Hint: You may have entered your Deriv password, which is different from your {{platform}} password.",values:{platform:(0,u.getCFDPlatformLabel)(e.platform)}}))),r.createElement(s.FormSubmitButton,{is_disabled:!h.password,has_cancel:c,cancel_label:_,onCancel:m,is_absolute:(0,u.isMobile)(),is_loading:n,label:l,is_center:e.should_set_trading_password,form_error:e.form_error}))}))},L=function(e){var t=e.show_warning,a=void 0===t||t,n=e.platform;return a?r.createElement("div",{className:"cfd-password-modal__warning"},r.createElement(s.Text,{as:"p",className:"cfd-password-modal__warning-text",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},r.createElement(d.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:n===u.CFD_PLATFORMS.MT5?"DMT5":"Deriv X"}}))):null},j=function(e){var t,a,o=S({},e),i=r.useMemo((function(){return function(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.mt5_trading_servers).map((function(e){var t,a,n,r=1===(null===(t=e.geolocation)||void 0===t?void 0:t.sequence)?"":null===(a=e.geolocation)||void 0===a?void 0:a.sequence,o=e.disabled?"(".concat(e.message_to_client,")"):"";return z(z({},e),{label:"".concat(null===(n=e.geolocation)||void 0===n?void 0:n.region," ").concat(r," ").concat(o),value:e.id,disabled:e.disabled})})).sort((function(e,t){return e.recommended?-1:1})).sort((function(e,t){return(e.disabled?e.disabled:0)-(t.disabled?t.disabled:0)}))}),[o.mt5_trading_servers]);return r.createElement(r.Fragment,null,r.createElement(L,{platform:o.platform,show_warning:o.has_error}),r.createElement(n.J9,{initialValues:{server:null!==(t=null===(a=o.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===a?void 0:a.id)&&void 0!==t?t:""},validate:o.validateServer,onSubmit:function(e){return o.submitMt5Server(e.server)}},(function(e){var t,a=e.handleSubmit,n=e.setFieldValue,l=e.errors,c=e.values,_=e.isSubmitting;return r.createElement("form",{onSubmit:a},r.createElement("div",{className:"cfd-password-modal__content"},r.createElement("div",{className:"dc-modal__container_cfd-password-modal__body"},r.createElement("div",{className:"input-element"},r.createElement(s.RadioGroup,{className:"cfd-password-modal__radio",name:"server",required:!0,selected:null===(t=o.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===t?void 0:t.id,onToggle:function(e){e.persist(),n("server",e.target.value)}},i.map((function(e){return r.createElement(s.RadioGroup.Item,{key:e.value,label:e.label,value:e.value,disabled:e.disabled})})))))),r.createElement(s.FormSubmitButton,{is_disabled:_||!c.server||Object.keys(l).length>0,has_cancel:!0,cancel_label:(0,d.localize)("Cancel"),onCancel:o.closeModal,is_absolute:(0,u.isMobile)(),is_loading:_,label:(0,d.localize)("Next"),form_error:o.form_error}))})))};const I=(0,y.$j)((function(e){var t=e.client,a=e.modules;return{email:t.email,account_title:a.cfd.account_title,account_type:a.cfd.account_type,account_status:t.account_status,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,error_message:a.cfd.error_message,error_type:a.cfd.error_type,getAccountStatus:a.cfd.getAccountStatus,has_cfd_error:a.cfd.has_cfd_error,landing_companies:t.landing_companies,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_logged_in:t.is_logged_in,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled,is_cfd_password_modal_enabled:a.cfd.is_cfd_password_modal_enabled,is_dxtrade_allowed:t.is_dxtrade_allowed,setMt5Error:a.cfd.setError,setCFDSuccessDialog:a.cfd.setCFDSuccessDialog,submitMt5Password:a.cfd.submitMt5Password,submitCFDPassword:a.cfd.submitCFDPassword,cfd_new_account:a.cfd.new_account_response,mt5_trading_servers:t.mt5_trading_servers,mt5_login_list:t.mt5_login_list,is_fully_authenticated:t.is_fully_authenticated}}))((0,o.withRouter)((function(e){var t,a,n=e.account_title,o=e.account_type,i=e.account_status,c=e.disableCFDPasswordModal,_=e.email,m=e.error_message,f=e.error_type,p=e.form_error,g=e.getAccountStatus,h=e.history,v=e.is_eu,y=e.is_eu_country,w=e.is_fully_authenticated,E=e.is_logged_in,x=e.is_cfd_password_modal_enabled,S=e.is_cfd_success_dialog_enabled,D=e.is_dxtrade_allowed,T=e.platform,P=e.has_cfd_error,A=e.has_suspended_account,k=e.landing_companies,L=e.mt5_login_list,I=e.cfd_new_account,R=e.setCFDSuccessDialog,B=e.setMt5Error,U=e.submitMt5Password,W=e.submitCFDPassword,V=e.mt5_trading_servers,X=M(r.useState(""),2),q=X[0],$=X[1],H=M(r.useState(!0),2),Y=H[0],K=H[1],G="bvi"===(null==k||null===(t=k.mt_financial_company)||void 0===t||null===(a=t.financial_stp)||void 0===a?void 0:a.shortcode),J=Boolean(null==L?void 0:L.length),Z=Array.isArray(null==i?void 0:i.status)&&i.status.includes(T===u.CFD_PLATFORMS.MT5?"mt5_password_not_set":"dxtrade_password_not_set"),Q="PasswordError"===f,ee="PasswordReset"===f,te=M(r.useState(!1),2),ae=te[0],ne=te[1],re=function(){R(!1),B(!1),setTimeout((function(){return $("")}),300)},oe=function(){re(),c()},ie=function(){oe();var e=T===u.CFD_PLATFORMS.MT5?1:2;"real"===o.category?e=Number("".concat(e,"0")):"demo"===o.category&&(e=Number("".concat(e,"1")));var t=T===u.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";u.WS.verifyEmail(_,t,{url_parameters:{redirect_to:e}}),ne(!0)},le=x&&!S&&(!P||Q||ee),ce=!P&&S&&x&&Y,se=ae&&Y,ue="real_financial_stp"===[o.category,o.type].join("_"),de="real_synthetic"===[o.category,o.type].join("_"),_e=r.useMemo((function(){return(E?!v:!y)&&de&&L.some((function(e){return"real"===e.account_type&&("gaming"===e.market_type||"synthetic"===e.market_type)}))&&!q&&T===u.CFD_PLATFORMS.MT5}),[v,y,E,de,q,L,T]),me=r.useMemo((function(){return!!le&&(_e?(0,u.isDesktop)():!!Z||(0,u.isDesktop)())}),[Z,le,_e]),fe=r.useMemo((function(){return!(!le||!_e&&Z)&&(0,u.isMobile)()}),[Z,le,_e]),pe=v&&!w,ge=r.useMemo((function(){return"real"===o.category?pe?(0,d.localize)("Submit proof"):(0,d.localize)("Transfer now"):(0,d.localize)("Continue")}),[o,pe]);r.useEffect((function(){(!Q&&!ee&&P||S)&&$("")}),[P,S,Q,ee]);var he=r.createElement(O,{is_bvi:G,account_title:n,closeModal:oe,error_type:f,error_message:m,has_mt5_account:J,form_error:p,should_set_trading_password:Z,is_real_financial_stp:ue,validatePassword:function(e){var t,a={};return(0,u.validLength)(e.password,{min:8,max:25})?(0,u.validPassword)(e.password)||(a.password=(0,u.getErrorMessages)().password()):a.password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),(null===(t=e.password)||void 0===t?void 0:t.toLowerCase())===_.toLowerCase()&&(a.password=(0,d.localize)("Your password cannot be the same as your email address.")),a},should_show_server_form:_e,onForgotPassword:ie,submitPassword:function(e,t){T===u.CFD_PLATFORMS.MT5?U(z(z({},e),{},{server:q}),t):(e.platform=T,W(e,t))},platform:T,is_dxtrade_allowed:D,onCancel:oe}),ve=r.createElement(j,{mt5_trading_servers:V,mt5_login_list:L,account_title:n,closeModal:oe,submitMt5Server:$,platform:T,has_error:A}),be=r.createElement(s.Modal,{className:"cfd-password-modal",has_close_icon:!_e||Z,is_open:me,toggleModal:oe,should_header_stick_body:!0,renderTitle:function(){return r.createElement(C,{should_show_server_form:_e,should_set_trading_password:Z,account_title:n,is_password_reset_error:ee,platform:T})},onUnmount:function(){return g(T)},onExited:function(){return K(!0)},onEntered:function(){return K(!1)},width:(0,u.isMobile)()?"32.8rem":"auto"},_e?ve:he),ye=r.createElement(s.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:fe,onClose:oe,wrapper_classname:"cfd-password-modal"},r.createElement(C,{should_show_server_form:_e,should_set_trading_password:Z,account_title:n,has_mt5_account:J,is_password_reset_error:ee,platform:T}),_e?ve:he),we=pe?r.createElement(s.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},(0,d.localize)("Your account is ready")):"";return r.createElement(r.Fragment,null,be,ye,r.createElement(b,{is_open:ce,toggleModal:oe,onCancel:oe,onSubmit:function(){c(),re(),"real"===o.category&&(pe?h.push(u.routes.proof_of_identity):(sessionStorage.setItem("cfd_transfer_to_login_id",I.login||""),h.push(u.routes.cashier_acc_transfer)))},classNameMessage:"cfd-password-modal__message",heading:we,message:N(T,v,pe,o.type,o.category),icon:r.createElement(F,{platform:T,type:o.type,is_eu:v}),icon_size:"xlarge",text_submit:ge,has_cancel:"real"===o.category,has_close_icon:!1,width:(0,u.isMobile)()?"32.8rem":"auto",is_medium_button:(0,u.isMobile)()}),r.createElement(l(),{is_open:se,identifier_title:"trading_password",onClose:function(){return ne(!1)},onClickSendEmail:ie}))}))),R=(0,y.$j)((function(e){var t=e.ui,a=e.modules;return{clearCFDError:a.cfd.clearCFDError,disableApp:t.disableApp,enableApp:t.enableApp,error_message:a.cfd.error_message,error_type:a.cfd.error_type,has_cfd_error:a.cfd.has_cfd_error,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled}}))((function(e){var t=e.clearCFDError,a=e.disableApp,n=e.enableApp,o=e.error_message,i=e.error_type,l=e.has_cfd_error,c=e.is_cfd_success_dialog_enabled,u=l&&!c&&i&&!["PasswordReset","PasswordError"].includes(i);return r.createElement(s.Dialog,{title:(0,d.localize)("Something’s not right"),confirm_button_text:(0,d.localize)("OK"),onConfirm:t,disableApp:a,enableApp:n,is_visible:u},o||r.createElement(d.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))}));var B=a("react-router-dom"),U=a("@deriv/account/dist/account/js/reset-trading-password-modal"),W=a.n(U);a("@deriv/account/dist/account/css/reset-trading-password-modal.css");const V=function(e){var t=e.onClickSignup,a=e.platform;return r.createElement("div",{className:"cfd-dashboard__missing-real"},r.createElement("h1",{className:"cfd-dashboard__missing-real--heading"},a===u.CFD_PLATFORMS.MT5?r.createElement(d.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."}):r.createElement(d.Localize,{i18n_default_text:"To create a Deriv X real account, create a Deriv real account first."})),r.createElement(s.Button,{className:"cfd-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},r.createElement("span",{className:"btn__text"},r.createElement(d.Localize,{i18n_default_text:"Create a Deriv account"}))))};var X=a("./src/templates/_common/components/loading.tsx");const q=function(){return r.createElement("div",{className:"cfd-real-accounts-display"},r.createElement(X.Z,null))};var $=a("@deriv/account/dist/account/js/file-uploader-container"),H=a.n($),Y=a("@deriv/account/dist/account/js/form-sub-header"),K=a.n(Y),G=a("@deriv/account/dist/account/js/poa-expired"),J=a.n(G),Z=a("@deriv/account/dist/account/js/poa-needs-review"),Q=a.n(Z),ee=a("@deriv/account/dist/account/js/poa-verified"),te=a.n(ee),ae=a("@deriv/account/dist/account/js/poa-unverified"),ne=a.n(ae),re=a("@deriv/account/dist/account/js/poa-submitted"),oe=a.n(re),ie=a("@deriv/account/dist/account/js/poa-status-codes"),le=a.n(ie),ce=["maxLength","name","optional"],se=["citizen","tax_residence"];function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},fe.apply(this,arguments)}function pe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ge=function(e){var t=e.maxLength,a=e.name,o=e.optional,i=void 0!==o&&o,l=pe(e,ce);return r.createElement(n.gN,{name:a},(function(e){var n=e.field,o=e.form,c=o.errors,u=o.touched;return r.createElement(s.Input,fe({},n,{type:"text",required:!i,name:a,autoComplete:"off",maxLength:t||"30",error:u[n.name]&&c[n.name]},l))}))};const he=function(e){var t,a,o=e.onSave,i=e.is_fully_authenticated,l=e.is_loading,c=e.landing_company,_=e.residence_list,m=e.onCancel,f=e.onSubmit,p=e.value,g=e.index,h=e.form_error,v=[{text:(0,d.localize)("Hedging"),value:"Hedging"},{text:(0,d.localize)("Income Earning"),value:"Income Earning"},{text:(0,d.localize)("Speculative"),value:"Speculative"},{text:(0,d.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],b=!(null===(t=null==c||null===(a=c.config)||void 0===a?void 0:a.tax_details_required)||void 0===t||!t),y=function(e){o(g,e),m()};return 0===_.length||l?r.createElement(s.Loading,{is_fullscreen:!1}):r.createElement(n.J9,{initialValues:{citizen:p.citizen,tax_residence:p.tax_residence,tax_identification_number:p.tax_identification_number,account_opening_reason:p.account_opening_reason},validateOnMount:!0,validateOnChange:!0,validateOnBlur:!0,validate:function(e){return function(e){var t,a=e.values,n=e.residence_list,r=e.account_opening_reason,o=e.is_tin_required,i=_e(n.filter((function(e){return e.text===a.tax_residence&&e.tin_format})),1)[0],l=_e(null!==(t=null==i?void 0:i.tin_format)&&void 0!==t?t:[],1)[0],c=l||"^[A-Za-z0-9./s-]{0,25}$",s={citizen:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!a.tax_residence&&o||l)||!!e},function(e){return!c||e.match(c)}],account_opening_reason:[function(e){return!!e},function(e){return r.map((function(e){return e.value})).includes(e)}]},u={citizen:(0,d.localize)("Citizenship"),tax_residence:(0,d.localize)("Tax residence"),tax_identification_number:(0,d.localize)("Tax identification number"),account_opening_reason:(0,d.localize)("Account opening reason")},_={};return Object.entries(s).forEach((function(e){var t,n=_e(e,2),r=n[0],o=n[1].findIndex((function(e){return!e(a[r])}));-1!==o&&(_[r]=(t=u[r],[(0,d.localize)("{{field_name}} is required",{field_name:t}),(0,d.localize)("{{field_name}} is not properly formatted.",{field_name:t})])[o])})),_}({values:e,residence_list:_,account_opening_reason:v,is_tin_required:b})},onSubmit:function(e,t){return function(e,t,a,n,r,o){var i=e.citizen,l=e.tax_residence,c=pe(e,se),s=function(e,t,a){var n,r;return a.forEach((function(a){a.text===e&&(n=a),a.text===t&&(r=a)})),{citizen:n,tax_residence:r}}(i,l,o),u=s.citizen,d=s.tax_residence,_=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){de(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({citizen:u&&u.value?u.value:"",tax_residence:d&&d.value?d.value:""},c);n(a,_,t.setSubmitting,r)}(e,t,g,f,!(0,u.isDeepEqual)(p,e),_)}},(function(e){var t=e.handleSubmit,a=e.isSubmitting,o=e.handleChange,l=e.handleBlur,c=e.errors,m=e.touched,f=e.values,g=e.setFieldValue,b=e.isValid,w=m.citizen&&c.citizen,E=m.tax_residence&&c.tax_residence,z=m.account_opening_reason&&c.account_opening_reason,x=!(!p.citizen||!i),S=!(!p.tax_residence||!i),M=function(e,t){var a=e.value?e.text:"";g(t,a,!0)};return r.createElement(s.AutoHeightWrapper,{default_height:200,height_offset:(0,u.isDesktop)()?148:null},(function(e){var i=e.height,c=e.setRef;return r.createElement("form",{className:"cfd-financial-stp-modal__form",ref:c,onSubmit:t,autoComplete:"off"},r.createElement(s.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:(0,u.isDesktop)()},r.createElement(s.Text,{as:"p",size:"xxxs",align:"center",className:"details-form__description"},r.createElement(d.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),r.createElement(s.ThemedScrollbars,{height:i,is_bypassed:(0,u.isMobile)()},r.createElement("div",{className:"details-form__elements"},r.createElement(K(),{title:(0,d.localize)("Details")}),r.createElement("fieldset",{className:"account-form__fieldset"},r.createElement(s.DesktopWrapper,null,r.createElement(n.gN,{name:"citizen"},(function(e){var t=e.field;return r.createElement(s.Autocomplete,fe({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:(0,d.localize)("Citizenship"),error:w,disabled:x,list_items:_,onItemSelection:function(e){return M(e,"citizen")},list_portal_id:"modal_root",required:!0}))}))),r.createElement(s.MobileWrapper,null,r.createElement(s.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("Citizenship"),value:f.citizen,list_items:_,error:w,disabled:x,use_text:!0,onChange:function(e){return g("citizen",e.target.value,!0)},required:!0,should_hide_disabled_options:!1}))),r.createElement(K(),{title:(0,d.localize)("Tax information")}),r.createElement("fieldset",{className:"account-form__fieldset"},r.createElement(s.DesktopWrapper,null,r.createElement(n.gN,{name:"tax_residence"},(function(e){var t=e.field;return r.createElement(s.Autocomplete,fe({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:(0,d.localize)("Tax residence"),error:E,disabled:S,list_items:_,onItemSelection:function(e){return M(e,"tax_residence")},list_portal_id:"modal_root"},t))}))),r.createElement(s.MobileWrapper,null,r.createElement(s.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("Tax residence"),value:f.tax_residence,error:E,disabled:S,list_items:_,use_text:!0,onChange:function(e){return g("tax_residence",e.target.value,!0)},required:!0}))),r.createElement("fieldset",{className:"account-form__fieldset"},r.createElement(ge,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:(0,d.localize)("Tax identification number"),placeholder:(0,d.localize)("Tax identification number"),value:f.tax_identification_number,onBlur:l,optional:!0})),r.createElement(K(),{title:(0,d.localize)("Account opening reason")}),r.createElement(n.gN,{name:"account_opening_reason"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(s.DesktopWrapper,null,r.createElement(s.Dropdown,fe({},t,{placeholder:(0,d.localize)("Account opening reason"),is_align_text_left:!0,name:t.name,list:v,value:f.account_opening_reason,onChange:o,handleBlur:l,error:z,list_portal_id:"modal_root"}))),r.createElement(s.MobileWrapper,null,r.createElement(s.SelectNative,fe({},t,{placeholder:(0,d.localize)("Please select"),name:t.name,label:(0,d.localize)("Account opening reason"),list_items:v,value:f.account_opening_reason,error:z,onChange:function(e){o(e),g("account_opening_reason",e.target.value,!0)}}))))}))))),r.createElement(s.Modal.Footer,{is_bypassed:(0,u.isMobile)()},h&&r.createElement(s.FormSubmitErrorMessage,{message:h}),r.createElement(s.FormSubmitButton,{cancel_label:(0,d.localize)("Previous"),is_disabled:a||!b,is_absolute:(0,u.isMobile)(),label:(0,d.localize)("Next"),onCancel:function(){return y(f)}})))}))}))};var ve,be=["onSave","onCancel","index","onSubmit","refreshNotifications"],ye=["document_file"];function we(e,t,a,n,r,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){xe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function De(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const Te=function(e){var t=e.onSave,a=e.onCancel,o=e.index,i=e.onSubmit,l=e.refreshNotifications,c=De(e,be),_=r.useRef(null),m=Se(r.useState(!0),2),f=m[0],p=m[1],g=Se((0,s.useStateCallback)({poa_status:"none",resubmit_poa:!1,has_poi:!1,form_error:""}),2),h=g[0],v=g[1],b=Se((0,s.useStateCallback)({files:[],error_message:null}),2),y=b[0],w=b[1],E=Se(r.useState({}),2),z=E[0],x=E[1],S=function(e){t(o,e),a()},M=function(){var e,a=(e=regeneratorRuntime.mark((function e(a,n){var r,l,c,s,_,m,f,p,g,b,w,E,M,D,T,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.document_file,r=De(a,ye),n.setSubmitting(!0),e.next=4,u.WS.setSettings(r);case 4:if(!(l=e.sent).error){e.next=9;break}return v(ze(ze({},h),{form_error:l.error.message})),n.setSubmitting(!1),e.abrupt("return");case 9:return e.next=11,u.WS.authorized.storage.getSettings();case 11:if(c=e.sent,s=c.error,_=c.get_settings,!s){e.next=17;break}return v(ze(ze({},h),{form_error:s.message})),e.abrupt("return");case 17:return m=_._address_line_1,f=_._address_line_2,p=_._address_city,g=_._address_state,b=_._address_postcode,x({_address_line_1:m,_address_line_2:f,_address_city:p,_address_postcode:b,_address_state:g}),v(ze(ze({},h),{form_error:""})),e.prev=20,e.next=23,null===(w=ve.current)||void 0===w?void 0:w.upload();case 23:if(E=e.sent,console.log("api_response",E),!E||null==E||!E.warning){e.next=29;break}return v(ze(ze({},h),{form_error:E.warning})),n.setSubmitting(!1),e.abrupt("return");case 29:return e.next=31,u.WS.authorized.storage.getAccountStatus();case 31:if(M=e.sent,D=M.error,T=M.get_account_status,!D){e.next=38;break}return v(ze(ze({},h),{form_error:s.message})),n.setSubmitting(!1),e.abrupt("return");case 38:(C=T.authentication.identity)&&"none"===C.status?(v(ze(ze({},h),{form_error:(0,d.localize)("Identity confirmation failed. You will be redirected to the previous step.")})),setTimeout((function(){S(_)}),3e3)):(void 0,void 0,N=y.files,F=y.error_message,i(o,ze(ze(ze({},z),h),{document_file:N,file_error_message:F}))),e.next=46;break;case 43:e.prev=43,e.t0=e.catch(20),v(ze(ze({},h),{form_error:e.t0.message}));case 46:n.setSubmitting(!1),t(o,a),i(o,a,n.setSubmitting);case 49:case"end":return e.stop()}var N,F}),e,null,[[20,43]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){we(o,n,r,i,l,"next",e)}function l(e){we(o,n,r,i,l,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();r.useEffect((function(){u.WS.authorized.getAccountStatus().then((function(e){u.WS.wait("states_list").then((function(){var t=e.get_account_status,a=null==t?void 0:t.authentication,n=a.document,r=a.identity,o=!(!r||"none"!==r.status);v(ze(ze({},h),{poa_status:null==n?void 0:n.status,__has_poi:o}),(function(){p(!1),l()}))}))}))}),[l,v]);var D=function(e,t){return h.poa_status!==le().verified&&0!==Object.keys(t).length},T=function(){v(ze(ze({},h),{resubmit_poa:!0}))},C=c.states_list,N=c.value,F=N.address_line_1,P=N.address_line_2,A=N.address_city,k=N.address_state,O=N.address_postcode,L=h.form_error,j=h.has_poi,I=h.poa_status,R=h.resubmit_poa,B=h.submitted_poa,U=!f&&(R||I===le().none);return r.createElement(n.J9,{initialValues:{address_line_1:F,address_line_2:P,address_city:A,address_state:k,address_postcode:O,document_file:y.files},validateOnMount:!0,validate:function(e){if([le().verified,le().pending].includes(h.poa_status))return{};var t={address_line_1:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,u.validAddress)(e)},function(e){return(0,u.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||(0,u.validAddress)(e)},function(e){return(0,u.validLength)(e,{max:70})}],address_city:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,u.validLength)(e,{min:1,max:35})},function(e){return(0,u.validLetterSymbol)(e)}],address_state:[function(e){return(0,u.validLength)(e,{max:35})}],address_postcode:[function(e){return(0,u.validLength)(e,{max:20})},function(e){return!e||(0,u.validPostCode)(e)}]},a={address_line_1:[(0,d.localize)("First line of address is required"),(0,d.localize)("First line of address is not in a proper format."),(0,d.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[(0,d.localize)("Second line of address is not in a proper format."),(0,d.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[(0,d.localize)("Town/City is required."),(0,d.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),(0,d.localize)("Town/City is not in a proper format.")],address_state:[(0,d.localize)("State/Province is not in a proper format.")],address_postcode:[(0,d.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),(0,d.localize)("Only letters, numbers, space, and hyphen are allowed.")]},n={};return Object.entries(t).forEach((function(t){var r=Se(t,2),o=r[0],i=r[1].findIndex((function(t){return!t(e[o])}));-1!==i&&(n[o]=a[o][i])})),n},enableReinitialize:!0,onSubmit:M,innerRef:_},(function(e){e.dirty;var a=e.errors,i=e.handleSubmit,l=e.isSubmitting,c=e.handleBlur,_=e.handleChange,m=e.setFieldTouched,p=e.setFieldValue,g=e.values,h=e.touched;return r.createElement(s.AutoHeightWrapper,{default_height:200},(function(e){var v=e.setRef,b=e.height;return r.createElement("form",{ref:v,onSubmit:i,className:"cfd-proof-of-address"},r.createElement(s.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:(0,u.isDesktop)()},f&&r.createElement(s.Loading,{is_fullscreen:!1}),U&&r.createElement(s.ThemedScrollbars,{autohide:!1,height:"".concat(b-77,"px"),is_bypassed:(0,u.isMobile)()},r.createElement("div",{className:"cfd-proof-of-address__field-area"},r.createElement(K(),{title:(0,d.localize)("Address information")}),r.createElement(ge,{name:"address_line_1",maxLength:255,required:!0,label:(0,d.localize)("First line of address*"),placeholder:(0,d.localize)("First line of address*"),onBlur:c}),r.createElement(ge,{name:"address_line_2",maxLength:255,label:(0,d.localize)("Second line of address (optional)"),optional:!0,placeholder:(0,d.localize)("Second line of address"),onBlur:c}),r.createElement("div",{className:"cfd-proof-of-address__inline-fields"},r.createElement(ge,{maxLength:255,name:"address_city",required:!0,label:(0,d.localize)("Town/City*"),placeholder:(0,d.localize)("Town/City*"),onBlur:c}),r.createElement("fieldset",{className:"address-state__fieldset"},(null==C?void 0:C.length)>0?r.createElement(r.Fragment,null,r.createElement(s.DesktopWrapper,null,r.createElement(n.gN,{name:"address_state"},(function(e){var t=e.field;return r.createElement(s.Dropdown,{id:"address_state",className:"address_state-dropdown",is_align_text_left:!0,list:C,error:h[t.name]&&a[t.name],name:"address_state",value:g.address_state,onChange:_,placeholder:(0,d.localize)("State/Province"),list_portal_id:"modal_root"})}))),r.createElement(s.MobileWrapper,null,r.createElement(s.SelectNative,{label:(0,d.localize)("State/Province"),value:g.address_state,list_items:C,error:h.address_state&&a.address_state,onChange:function(e){_(e),p("address_state",e.target.value,!0)}}))):r.createElement(ge,{name:"address_state",label:(0,d.localize)("State/Province"),placeholder:(0,d.localize)("State/Province"),value:g.address_state,onBlur:c})),r.createElement(ge,{maxLength:255,name:"address_postcode",label:(0,d.localize)("Postal/ZIP code"),placeholder:(0,d.localize)("Postal/ZIP code"),onBlur:c,optional:!0})),r.createElement("div",{className:"cfd-proof-of-address__file-upload"},r.createElement(H(),{onRef:function(e){return ve=e},getSocket:u.WS.getSocket,onFileDrop:function(e){return function(e,a,n,r,i){n("document_file",!0),r("document_file",e),w({files:e,error_message:a},(function(){"function"==typeof t&&t(o,ze(ze({},i),{document_file:e}))}))}(e.files,e.error_message,m,p,g)}})))),I!==le().none&&!R&&r.createElement(s.ThemedScrollbars,{height:b,is_bypassed:(0,u.isMobile)()},B&&r.createElement(oe(),{is_description_enabled:!1,has_poi:j}),I===le().pending&&r.createElement(Q(),{is_description_enabled:!1}),I===le().verified&&r.createElement(te(),{is_description_enabled:!1,has_poi:j}),I===le().expired&&r.createElement(J(),{onClick:T}),(I===le().rejected||I===le().suspected)&&r.createElement(ne(),null)),r.createElement(s.Modal.Footer,{is_bypassed:(0,u.isMobile)()},(I===le().verified||U)&&r.createElement(s.FormSubmitButton,{has_cancel:!0,cancel_label:(0,d.localize)("Previous"),is_disabled:D(0,a)||I!==le().verified&&y.files&&y.files.length<1||!!y.error_message,label:I===le().verified?(0,d.localize)("Submit"):(0,d.localize)("Next"),is_absolute:(0,u.isMobile)(),is_loading:l,form_error:L,onCancel:function(){return S(g)}}))))}))}))};var Ce=a("@deriv/account/dist/account/js/proof-of-identity-container"),Ne=a.n(Ce),Fe=["authentication_status","form_error","index","onCancel","onSubmit","value"];function Pe(){return Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Pe.apply(this,arguments)}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const ke=(0,y.$j)((function(e){var t=e.client,a=e.common,n=e.notifications;return{account_status:t.account_status,app_routing_history:a.app_routing_history,fetchResidenceList:t.fetchResidenceList,is_switching:t.is_switching,is_virtual:t.is_virtual,refreshNotifications:n.refreshNotifications,routeBackInApp:a.routeBackInApp,should_allow_authentication:t.should_allow_authentication}}))((function(e){var t=e.authentication_status,a=e.form_error,o=e.index,i=e.onCancel,l=e.onSubmit,c=e.value,_=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Fe),m=t.identity_status,f=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.useState("none"),2),p=f[0],g=f[1],h=r.useCallback((function(){var e={};return["pending"].includes(p)&&["pending","verified"].includes(m)||(e.poi_state=!0),e}),[p,m]),v=!(["pending"].includes(p)||["pending","verified"].includes(m));return r.createElement(n.J9,{initialValues:{poi_state:c.poi_state},validate:h,onSubmit:function(e,t){return l(o,{poi_state:p},t.setSubmitting)}},(function(e){var t=e.handleSubmit;return r.createElement(s.AutoHeightWrapper,{default_height:200},(function(e){var n=e.setRef,c=e.height;return r.createElement("form",{ref:n,className:"cfd-proof-of-identity",onSubmit:t},r.createElement("div",{className:"details-form"},r.createElement("input",{type:"hidden",name:"poi_state",value:p,readOnly:!0}),r.createElement(s.Div100vhContainer,{className:"cfd-proof-of-identity__fields",height_offset:"180px",is_disabled:(0,u.isDesktop)()},r.createElement(Ne(),Pe({},_,{height:c,is_from_external:!0,onStateChange:function(e){return g(e)}}))),r.createElement(s.Modal.Footer,{is_bypassed:(0,u.isMobile)()},r.createElement(s.FormSubmitButton,{has_cancel:!0,cancel_label:(0,d.localize)("Previous"),is_disabled:v,is_absolute:(0,u.isMobile)(),label:(0,d.localize)("Next"),onCancel:i,form_error:a,onClick:function(){v||l(o,{poi_state:p},!1)}}))))}))}))}));function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Oe.apply(this,arguments)}function Le(e,t,a,n,r,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function je(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Le(o,n,r,i,l,"next",e)}function l(e){Le(o,n,r,i,l,"throw",e)}i(void 0)}))}}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const Be=(0,y.$j)((function(e){var t=e.client,a=e.modules.cfd,n=e.notifications;return{addNotificationByKey:n.addNotificationMessageByKey,authentication_status:t.authentication_status,get_settings:t.account_settings,client_email:t.email,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,openPendingDialog:a.openPendingDialog,refreshNotifications:n.refreshNotifications,removeNotificationMessage:n.removeNotificationMessage,removeNotificationByKey:n.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:a.storeProofOfAddress}}))((function(e){var t=e.refreshNotifications,a=Ie(r.useState(0),2),n=a[0],o=a[1],i=Ie(r.useState(""),2),l=i[0],c=i[1],_=Ie(r.useState(!1),2),m=_[0],f=_[1],p=Ie(r.useState([{header:{active_title:(0,d.localize)("Complete your personal details"),title:(0,d.localize)("Personal details")},body:he,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","landing_company"]},{header:{active_title:(0,d.localize)("Complete your proof of identity"),title:(0,d.localize)("Proof of identity")},body:ke,form_value:{poi_state:"unknown"},props:["addNotificationByKey","authentication_status","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:(0,d.localize)("Complete your proof of address"),title:(0,d.localize)("Proof of address")},body:Te,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]),2),g=p[0],h=p[1],v=n,b=function(){c(""),n+1<g.length?o(n+1):(e.openPendingDialog(),e.toggleModal())},y=function(){var t=je(regeneratorRuntime.mark((function t(a,n,r){var o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.length>3&&void 0!==i[3]&&!i[3]||0!==a){t.next=10;break}return t.next=4,u.WS.setSettings(n);case 4:if(!(o=t.sent).error){t.next=9;break}return c(o.error.message),r(!1),t.abrupt("return");case 9:w(r);case 10:if(0!==a){t.next=13;break}return t.next=13,u.WS.triggerMt5DryRun({email:e.client_email});case 13:x(a,n),b();case 15:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),w=function(){var e=je(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.WS.authorized.storage.getSettings();case 2:if(!(a=e.sent).error){e.next=7;break}return c(a.error.message),"function"==typeof t&&t(!1),e.abrupt("return");case 7:n=Object.assign([],g),a.get_settings.citizen&&(n[0].form_value.citizen=E(a.get_settings.citizen)),a.get_settings.tax_residence&&(n[0].form_value.tax_residence=E(a.get_settings.tax_residence)),a.get_settings.tax_identification_number&&(n[0].form_value.tax_identification_number=a.get_settings.tax_identification_number),a.get_settings.account_opening_reason&&(n[0].form_value.account_opening_reason=a.get_settings.account_opening_reason),h(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.useEffect((function(){t()}),[g,t]);var E=function(t){var a=Ie(e.residence_list.filter((function(e){return e.value===t})),1)[0];return(0,u.getPropertyValue)(a,["text"])||t};r.useEffect((function(){0===v&&(f(!0),w().then((function(){f(!1)})))}),[]);var z=function(e){return e?g[v][e]:g[v]},x=function(e,t){var a=Object.assign([],g);a[e].form_value=t,0===v&&(a[0].form_value.citizen=E(t.citizen),a[0].form_value.tax_residence=E(t.tax_residence)),h(a)},S=z("body"),M=z("form_value"),D=(z("props")||[]).reduce((function(t,a){return Object.assign(t,(n={},r=a,o=e[a],r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{});return r.createElement(s.Div100vhContainer,{className:"cfd-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:(0,u.isDesktop)(),height_offset:"40px"},r.createElement("div",{className:"cfd-financial-stp-modal__heading"},z()&&r.createElement(r.Fragment,null,r.createElement(s.DesktopWrapper,null,r.createElement(s.FormProgress,{steps:g,current_step:n})),r.createElement(s.MobileWrapper,null,r.createElement("div",{className:"cfd-financial-stp-modal__header-steps"},r.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-title"},r.createElement(d.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:n+1,steps:g.length,step_title:g[n].header.title}})),g[n].header.active_title&&r.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-subtitle"},g[n].header.active_title))))),r.createElement("div",{className:"cfd-financial-stp-modal__body"},r.createElement(S,Oe({value:M,index:v,onSubmit:y,height:"auto",is_loading:m,onCancel:function(){o(n-1),c("")},onSave:x,form_error:l},D))))})),Ue=(0,y.$j)((function(e){var t=e.ui,a=e.modules;return{disableApp:t.disableApp,disableMt5FinancialStpModal:a.cfd.disableMt5FinancialStpModal,enableApp:t.enableApp,is_mt5_financial_stp_modal_open:a.cfd.is_mt5_financial_stp_modal_open}}))((function(e){var t=e.disableApp,a=e.disableMt5FinancialStpModal,n=e.enableApp,o=e.is_mt5_financial_stp_modal_open;return r.createElement(r.Fragment,null,r.createElement(s.DesktopWrapper,null,r.createElement(s.Modal,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:(0,d.localize)("Create a DMT5 real Financial STP account"),enableApp:n,is_open:o,has_close_icon:!0,height:"740px",toggleModal:a},r.createElement(Be,{toggleModal:a}))),r.createElement(s.MobileWrapper,null,r.createElement(s.MobileDialog,{portal_element_id:"modal_root",title:(0,d.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:o,onClose:a},r.createElement(Be,{toggleModal:a}))))}));function We(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?We(Object(a),!0).forEach((function(t){Xe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):We(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var He=function(e){var t,a,n,o=e.landing_companies,i=e.platform,l=e.is_logged_in,c=e.is_uk,_=l?(i===u.CFD_PLATFORMS.MT5?[null==o||null===(t=o.mt_gaming_company)||void 0===t?void 0:t.financial,null==o||null===(a=o.mt_financial_company)||void 0===a?void 0:a.financial,(null==o||null===(n=o.mt_financial_company)||void 0===n?void 0:n.financial_stp)&&i===u.CFD_PLATFORMS.MT5]:[null==o?void 0:o.dxtrade_gaming_company,null==o?void 0:o.dxtrade_financial_company]).filter(Boolean).length:i===u.CFD_PLATFORMS.MT5?3:2,m=c?r.createElement("div",null,(0,d.localize)("Forex, stocks, stock indices, cryptocurrencies"),r.createElement(s.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"**"),(0,d.localize)(", synthetic indices")):(0,d.localize)("Forex, stocks, stock indices, cryptocurrencies, synthetic indices");return[{attribute:(0,d.localize)("Account currency"),mt5:{synthetic:(0,d.localize)("USD"),synthetic_eu:(0,d.localize)("EUR"),financial:(0,d.localize)("USD"),financial_au:(0,d.localize)("USD"),financial_eu:(0,d.localize)("EUR/GBP/USD"),financial_stp:(0,d.localize)("USD"),footnote:null},dxtrade:{synthetic:(0,d.localize)("USD"),synthetic_eu:(0,d.localize)("EUR"),financial:(0,d.localize)("USD"),financial_au:(0,d.localize)("USD"),financial_eu:(0,d.localize)("EUR/GBP"),footnote:null}},{attribute:(0,d.localize)("Maximum leverage"),mt5:{synthetic:(0,d.localize)("Up to 1:1000"),synthetic_eu:(0,d.localize)("Up to 1:1000"),financial:(0,d.localize)("Up to 1:1000"),financial_au:(0,d.localize)("Up to 1:30"),financial_eu:(0,d.localize)("Up to 1:30"),financial_stp:(0,d.localize)("Up to 1:100"),footnote:(0,d.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")},dxtrade:{synthetic:(0,d.localize)("Up to 1:1000"),synthetic_eu:(0,d.localize)("Up to 1:1000"),financial:(0,d.localize)("Up to 1:1000"),financial_au:(0,d.localize)("Up to 1:30"),financial_eu:(0,d.localize)("Up to 1:30"),footnote:(0,d.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}},{attribute:(0,d.localize)("Order execution"),mt5:{synthetic:(0,d.localize)("Market"),synthetic_eu:(0,d.localize)("Market"),financial:(0,d.localize)("Market"),financial_au:(0,d.localize)("Market"),financial_eu:(0,d.localize)("Market"),financial_stp:(0,d.localize)("Market"),footnote:(0,d.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:_})},dxtrade:{synthetic:(0,d.localize)("Market"),synthetic_eu:(0,d.localize)("Market"),financial:(0,d.localize)("Market"),financial_au:(0,d.localize)("Market"),financial_eu:(0,d.localize)("Market"),footnote:(0,d.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:_})}},{attribute:(0,d.localize)("Spread"),mt5:{synthetic:(0,d.localize)("Fixed/Variable"),synthetic_eu:(0,d.localize)("Fixed/Variable"),financial:(0,d.localize)("Variable"),financial_au:(0,d.localize)("Variable"),financial_eu:(0,d.localize)("Fixed/Variable"),financial_stp:(0,d.localize)("Variable"),footnote:(0,d.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")},dxtrade:{synthetic:(0,d.localize)("Fixed/Variable"),synthetic_eu:(0,d.localize)("Fixed/Variable"),financial:(0,d.localize)("Variable"),financial_au:(0,d.localize)("Variable"),financial_eu:(0,d.localize)("Variable"),footnote:(0,d.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}},{attribute:(0,d.localize)("Commission"),mt5:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),financial_stp:(0,d.localize)("No"),footnote:(0,d.localize)("Deriv charges no commission across all account types.")},dxtrade:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),footnote:(0,d.localize)("Deriv charges no commission across all account types.")}},{attribute:(0,d.localize)("Minimum deposit"),mt5:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),financial_stp:(0,d.localize)("No"),footnote:null},dxtrade:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),footnote:null}},{attribute:(0,d.localize)("Margin call"),mt5:{synthetic:(0,d.localize)("100%"),synthetic_eu:(0,d.localize)("100%"),financial:(0,d.localize)("100%"),financial_au:(0,d.localize)("100%"),financial_eu:(0,d.localize)("100%"),financial_stp:(0,d.localize)("100%"),footnote:(0,d.localize)("You’ll get a warning, known as margin call, if your account balance drops down close to the stop out level.")},dxtrade:{synthetic:(0,d.localize)("100%"),synthetic_eu:(0,d.localize)("100%"),financial:(0,d.localize)("100%"),financial_au:(0,d.localize)("100%"),financial_eu:(0,d.localize)("100%"),footnote:(0,d.localize)("You’ll get a warning, known as margin call, if your account balance drops down close to the stop out level.")}},{attribute:(0,d.localize)("Stop out level"),mt5:{synthetic:(0,d.localize)("50%"),synthetic_eu:(0,d.localize)("50%"),financial:(0,d.localize)("50%"),financial_au:(0,d.localize)("50%"),financial_eu:(0,d.localize)("50%"),financial_stp:(0,d.localize)("50%"),footnote:(0,d.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")},dxtrade:{synthetic:(0,d.localize)("50%"),synthetic_eu:(0,d.localize)("50%"),financial:(0,d.localize)("50%"),financial_au:(0,d.localize)("50%"),financial_eu:(0,d.localize)("50%"),footnote:(0,d.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")}},{attribute:(0,d.localize)("Number of assets"),mt5:{synthetic:(0,d.localize)("20+"),synthetic_eu:(0,d.localize)("20+"),financial:(0,d.localize)("150+"),financial_au:(0,d.localize)("100+"),financial_eu:(0,d.localize)("50+"),financial_stp:(0,d.localize)("70+"),footnote:null},dxtrade:{synthetic:(0,d.localize)("20+"),synthetic_eu:(0,d.localize)("20+"),financial:(0,d.localize)("90+"),financial_au:(0,d.localize)("90+"),financial_eu:(0,d.localize)("90+"),footnote:null}},{attribute:(0,d.localize)("Cryptocurrency trading"),mt5:{synthetic:(0,d.localize)("N/A"),synthetic_eu:(0,d.localize)("N/A"),financial:(0,d.localize)("24/7"),financial_au:(0,d.localize)("24/7"),financial_eu:(0,d.localize)("24/7"),financial_stp:(0,d.localize)("24/7"),footnote:(0,d.localize)("Indicates the availability of cryptocurrency trading on a particular account.")},dxtrade:{synthetic:(0,d.localize)("N/A"),synthetic_eu:(0,d.localize)("N/A"),financial:(0,d.localize)("24/7"),financial_au:(0,d.localize)("24/7"),financial_eu:(0,d.localize)("24/7"),footnote:(0,d.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}},{attribute:(0,d.localize)("Trading instruments"),mt5:{synthetic:(0,d.localize)("Synthetics"),synthetic_eu:(0,d.localize)("Synthetics"),financial:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_au:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_eu:m,financial_stp:(0,d.localize)("FX-majors, FX-minors, FX-exotics, Cryptocurrencies"),footnote:null},dxtrade:{synthetic:(0,d.localize)("Synthetics"),synthetic_eu:(0,d.localize)("Synthetics"),financial:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Smart-FX, Commodities, Cryptocurrencies"),financial_au:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_eu:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies (except UK)"),footnote:null}}]},Ye=function(e){var t=e.name,a=e.counter,n=qe(r.useState(!1),2),o=n[0],i=n[1];return a?r.createElement(r.Fragment,null,r.createElement(s.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer",onClick:function(){return i(!o)}},t,r.createElement(s.Text,{weight:"bold",as:"span",line_height:"x",size:"xxxs",className:"counter"},a))):r.createElement(s.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer"},t)},Ke=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.show_eu_related,o=e.platform,i=e.residence,l=e.is_uk,c="au"===i;return function(e,t,a,n,o,i){var l=function(e,t,a){return i?t:n?a:e},c=0;return t.filter((function(e){return e[o]})).map((function(t){var i,s,d,_=t.attribute,m=t.mt5,f=void 0===m?{}:m,p=t.dxtrade,g=void 0===p?{}:p,h=o===u.CFD_PLATFORMS.MT5?f:g,v=h.synthetic,b=h.synthetic_eu,y=h.financial,w=h.financial_au,E=h.financial_eu,z=h.footnote,x={synthetic:n?b:v},S={financial:l(y,w,E)},M=z?++c:null;return a?Ve(Ve(Ve({attribute:r.createElement(Ye,{name:_,counter:M})},null!=e&&null!==(i=e.mt_gaming_company)&&void 0!==i&&i.financial?x:{}),null!=e&&null!==(s=e.mt_financial_company)&&void 0!==s&&s.financial?S:{}),null!=e&&null!==(d=e.mt_financial_company)&&void 0!==d&&d.financial_stp&&o===u.CFD_PLATFORMS.MT5?{financial_stp:null==f?void 0:f.financial_stp}:{}):o===u.CFD_PLATFORMS.DXTRADE?Ve(Ve({attribute:r.createElement(Ye,{name:_,counter:M})},x),S):Ve(Ve(Ve({attribute:r.createElement(Ye,{name:_,counter:M})},x),S),{financial_stp:null==f?void 0:f.financial_stp})}))}(t,He({landing_companies:t,platform:o,is_logged_in:a,is_uk:l}),a,n,o,c)},Ge=function(e){var t=e.platform,a=e.show_risk_message,n=e.landing_companies,o=e.is_logged_in,i=e.is_uk;return r.createElement("div",{className:"cfd-compare-account--hint"},r.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),r.createElement(d.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),a&&r.createElement(r.Fragment,null,r.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),r.createElement(d.Localize,{i18n_default_text:"Margin call and stop out level will change from time to time based on market condition."})),r.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r.createElement(s.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"*"),r.createElement(d.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your {{platform}} account to support your positions at all times.",values:{platform:t===u.CFD_PLATFORMS.MT5?(0,d.localize)("MT5"):(0,d.localize)("Deriv X")}})),i&&r.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r.createElement(s.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"**"),r.createElement(d.Localize,{i18n_default_text:"Cryptocurrency trading is not available for clients residing in the United Kingdom.",values:{platform:t===u.CFD_PLATFORMS.MT5?(0,d.localize)("MT5"):(0,d.localize)("Deriv X")}}))),He({landing_companies:n,platform:t,is_logged_in:o,is_uk:i}).filter((function(e){var a;return!(null===(a=e[t])||void 0===a||!a.footnote)})).map((function(e,a){return r.createElement("div",{key:a,className:"cfd-compare-accounts__bullet-wrapper"},r.createElement(s.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},a+1),r.createElement("div",{className:"cfd-compare-accounts__footnote"},r.createElement(s.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cfd-compare-accounts__footnote-title"},e.attribute),r.createElement(s.Text,{size:"xs",color:"prominent"},e[t].footnote)))})))},Je=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.platform,o=e.show_eu_related,i=e.residence,l=e.is_eu,c=e.is_uk,_=qe(r.useState([]),2),m=_[0],f=_[1],p=qe(r.useState(n===u.CFD_PLATFORMS.DXTRADE?"1.5fr 1fr 2fr":"1.5fr 1fr 2fr 1fr"),2),g=p[0],h=p[1];r.useEffect((function(){var e,r,l;f(Ke({landing_companies:t,is_logged_in:a,platform:n,show_eu_related:o,residence:i,is_uk:c})),a&&n===u.CFD_PLATFORMS.MT5?h("1.5fr ".concat(null!=t&&null!==(e=t.mt_gaming_company)&&void 0!==e&&e.financial?"1fr":""," ").concat(null!=t&&null!==(r=t.mt_financial_company)&&void 0!==r&&r.financial?"2fr":""," ").concat(null!=t&&null!==(l=t.mt_financial_company)&&void 0!==l&&l.financial_stp?" 1fr ":"")):a&&n===u.CFD_PLATFORMS.DXTRADE&&h("1.5fr ".concat(null!=t&&t.dxtrade_gaming_company?"1fr":""," ").concat(null!=t&&t.dxtrade_financial_company?"2fr":""))}),[null==t?void 0:t.mt_financial_company,null==t?void 0:t.mt_gaming_company,a,c,t,n,o,i,c]);var v=n===u.CFD_PLATFORMS.MT5||!o,b=l?(0,d.localize)("CFDs"):(0,d.localize)("Financial");return r.createElement(s.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,u.isDesktop)()},r.createElement(s.ThemedScrollbars,{className:"cfd-compare-accounts",style:{"--cfd-compare-accounts-template-columns":g}},r.createElement("div",{className:"cfd-compare-accounts__table-wrapper"},r.createElement(s.Table,{className:"cfd-compare-accounts__table"},r.createElement(s.Table.Header,null,r.createElement(s.Table.Row,{className:"cfd-compare-accounts__table-row"},r.createElement(s.Table.Head,null),a?r.createElement(r.Fragment,null,(0,u.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"gaming"})&&r.createElement(s.Table.Head,null,(0,d.localize)("Synthetic")),(0,u.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"financial"})&&r.createElement(s.Table.Head,null,b,r.createElement(s.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),(0,u.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"financial_stp"})&&r.createElement(s.Table.Head,null,(0,d.localize)("Financial STP"),r.createElement(s.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))):r.createElement(r.Fragment,null,r.createElement(s.Table.Head,null,(0,d.localize)("Synthetic")),r.createElement(s.Table.Head,null,(0,d.localize)("Financial"),r.createElement(s.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),n===u.CFD_PLATFORMS.MT5&&r.createElement(s.Table.Head,null,(0,d.localize)("Financial STP"),r.createElement(s.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))))),r.createElement(s.Table.Body,null,m.map((function(e,t){return r.createElement(s.Table.Row,{key:t,className:"cfd-compare-accounts__table-row"},Object.keys(e).map((function(t,a){return r.createElement(s.Table.Cell,{key:a,fixed:0===a},e[t])})))}))))),r.createElement(Ge,{platform:n,show_risk_message:v,landing_companies:t,is_logged_in:a,is_uk:c})))};const Ze=(0,y.$j)((function(e){var t=e.modules,a=e.ui,n=e.client;return{disableApp:a.disableApp,enableApp:a.enableApp,is_compare_accounts_visible:t.cfd.is_compare_accounts_visible,is_loading:n.is_populating_mt5_account_list,is_eu:n.is_eu,is_uk:n.is_uk,is_eu_country:n.is_eu_country,is_logged_in:n.is_logged_in,landing_companies:n.landing_companies,residence:n.residence,toggleCompareAccounts:t.cfd.toggleCompareAccountsModal}}))((function(e){var t,a,n,o=e.disableApp,i=e.enableApp,l=e.is_compare_accounts_visible,c=e.landing_companies,_=e.is_loading,m=e.is_logged_in,f=e.is_eu,p=e.is_uk,g=e.is_eu_country,h=e.platform,v=e.residence,b=e.toggleCompareAccounts,y=m&&f||!m&&g,w=1===[null==c||null===(t=c.mt_gaming_company)||void 0===t?void 0:t.financial,null==c||null===(a=c.mt_financial_company)||void 0===a?void 0:a.financial,null==c||null===(n=c.mt_financial_company)||void 0===n?void 0:n.financial_stp].filter(Boolean).length?(0,d.localize)("Account Information"):(0,d.localize)("Compare accounts");return r.createElement("div",{className:"cfd-compare-accounts-modal__wrapper",style:{marginTop:h===u.CFD_PLATFORMS.DXTRADE?"5rem":"2.4rem"}},r.createElement(s.Button,{className:"cfd-dashboard__welcome-message--button",has_effect:!0,text:w,onClick:b,secondary:!0,disabled:_}),r.createElement(r.Suspense,{fallback:r.createElement(s.UILoader,null)},r.createElement(s.DesktopWrapper,null,r.createElement(s.Modal,{className:"cfd-dashboard__compare-accounts",disableApp:o,enableApp:i,is_open:l,title:w,toggleModal:b,type:"button",height:"696px",width:"903px"},r.createElement(Je,{is_logged_in:m,landing_companies:c,platform:h,show_eu_related:y,residence:v,is_eu:f,is_uk:p}))),r.createElement(s.MobileWrapper,null,r.createElement(s.MobileDialog,{portal_element_id:"deriv_app",title:(0,d.localize)("Compare accounts"),wrapper_classname:"cfd-dashboard__compare-accounts",visible:l,onClose:b},r.createElement(Je,{is_logged_in:m,landing_companies:c,platform:h,show_eu_related:y,residence:v,is_eu:f,is_uk:p})))))}));var Qe=function(e,t){return e===u.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Trade forex, commodities and cryptocurrencies at high leverage."):e===u.CFD_PLATFORMS.MT5?t?(0,d.localize)("Trade CFDs on forex, stocks, stock indices, synthetic indices, and commodities with leverage."):(0,d.localize)("Trade major (standard and micro-lots) and minor currency pairs, stocks, stock indices, commodities, and cryptocurrencies with high leverage."):""},et="https://apps.apple.com/us/app/deriv-x/id1563337503",tt="https://play.google.com/store/apps/details?id=com.deriv.dx",at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,u.OSDetect)()){case"ios":return et;case"android":return tt;default:return rt()}},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,u.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"macos":return"https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/MetaTrader5.dmg";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return ot({category:"real"})}},rt=function(e){return"real"===e?"https://dx.deriv.com":"https://dx-demo.deriv.com/"},ot=function(e){var t=e.category,a=e.loginid,n=e.server_name,r="demo"===t?"Deriv-Demo":void 0===n?"Deriv-Server":n,o=null!=a?a:"";return"https://trade.mql5.com/trade?servers=".concat(r,"&trade_server=").concat(r).concat(o&&"&login=".concat(o))};const it=function(e){var t=e.platform,a=e.active_index,n=e.is_dark_mode_on;return r.createElement("div",{className:"cfd-dashboard__download-center"},r.createElement("h1",{className:"cfd-dashboard__download-center--heading"},function(e){return e===u.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Run Deriv X on your browser or download the mobile app"):e===u.CFD_PLATFORMS.MT5?(0,d.localize)("Run MT5 from your browser or download the MT5 app for your devices"):""}(t)),r.createElement("div",{className:"cfd-dashboard__download-center-options",style:{justifyContent:t===u.CFD_PLATFORMS.DXTRADE?"space-evenly":void 0}},r.createElement("div",{className:"cfd-dashboard__download-center-options--desktop"},r.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-links"},r.createElement("div",null,r.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-row"},t===u.CFD_PLATFORMS.MT5&&r.createElement(r.Fragment,null,r.createElement(s.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),r.createElement(s.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51})),t===u.CFD_PLATFORMS.DXTRADE&&r.createElement(r.Fragment,null,r.createElement(s.Icon,{icon:n?"IcDxtradeDeviceDesktopLight":"IcDxtradeDeviceDesktop",width:128,height:83}),r.createElement(s.Icon,{icon:n?"IcDxtradeDeviceLaptopLight":"IcDxtradeDeviceLaptop",width:81,height:54}))),t===u.CFD_PLATFORMS.DXTRADE&&r.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},r.createElement("a",{className:"cfd-dashboard__dxtrade-download",href:rt(0===a?"real":"demo"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{className:"cfd-dashboard__dxtrade-download--icon",icon:"IcBrandDxtrade",width:32,height:32}),r.createElement("div",{className:"cfd-dashboard__dxtrade-download-text"},r.createElement(s.Text,{className:"cfd-dashboard__dxtrade-download--title",color:"colored-background",size:"xxs",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Web terminal"})))))),t===u.CFD_PLATFORMS.MT5&&r.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},r.createElement("a",{href:nt("windows"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationWindows",width:138,height:40})),r.createElement("a",{href:nt("macos"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationMacos",width:138,height:40})),r.createElement("a",{href:nt("linux"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationLinux",width:138,height:40})))),t===u.CFD_PLATFORMS.MT5&&r.createElement(s.Text,{as:"p",align:"center",size:"xxxs",className:"cfd-dashboard__download-center--hint"},r.createElement(d.Localize,{i18n_default_text:"The MT5 desktop app is not supported by Windows XP, Windows 2003, and Windows Vista."}))),r.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},r.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},t===u.CFD_PLATFORMS.MT5&&r.createElement(r.Fragment,null,r.createElement(s.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),r.createElement(s.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),t===u.CFD_PLATFORMS.DXTRADE&&r.createElement(r.Fragment,null,r.createElement(s.Icon,{icon:n?"IcDxtradeDeviceTabletLight":"IcDxtradeDeviceTablet",width:133,height:106}),r.createElement(s.Icon,{icon:n?"IcDxtradeDevicePhoneLight":"IcDxtradeDevicePhone",width:48,height:74}))),r.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},r.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===u.CFD_PLATFORMS.DXTRADE?at("android"):nt("android"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),r.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===u.CFD_PLATFORMS.DXTRADE?at("ios"):nt("ios"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationApple",width:120,height:40}))))))};var lt=a("./src/Stores/Modules/CFD/cfd-store.js"),ct=function(e){var t=e.platform,a=e.onConfirm;return r.createElement("div",{className:"cfd-change-password"},r.createElement(s.Icon,{className:"cfd-change-password__icon",icon:t===u.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),r.createElement(s.Text,{as:"p",align:"center",size:"s",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"{{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(t)}})),r.createElement(s.Text,{as:"p",align:"center",className:"cfd-change-password__description",size:"xs"},t===u.CFD_PLATFORMS.MT5?r.createElement(d.Localize,{i18n_default_text:"Use this password to log in to your DMT5 accounts on the desktop, web, and mobile apps."}):r.createElement(d.Localize,{i18n_default_text:"Use this password to log in to your Deriv X accounts on the web and mobile apps."})),r.createElement(s.Button,{className:"dc-btn dc-btn--primary dc-btn__large dc-modal__container_cfd-reset-password-modal__button",onClick:a},r.createElement(s.Text,{size:"xs",weight:"bold",color:"colored-background"},r.createElement(d.Localize,{i18n_default_text:"Change {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(t)}}))))},st=function(e){var t=e.email,a=e.platform,n=e.account_group,o=r.useCallback((function(){var e=a===u.CFD_PLATFORMS.MT5?1:2;"real"===n?e=Number("".concat(e,"0")):"demo"===n&&(e=Number("".concat(e,"1")));var r=a===u.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";u.WS.verifyEmail(t,r,{url_parameters:{redirect_to:e}})}),[t,a,n]);return r.useEffect((function(){o()}),[o]),r.createElement(s.SendEmailTemplate,{title:(0,d.localize)("We've sent you an email"),subtitle:(0,d.localize)("Please click on the link in the email to change your {{platform}} password.",{platform:(0,u.getCFDPlatformLabel)(a)}),lbl_no_receive:(0,d.localize)("Didn't receive the email?"),txt_resend:(0,d.localize)("Resend email"),txt_resend_in:(0,d.localize)("Resend email in"),onClickSendEmail:o})};const ut=function(e){var t=e.platform,a=e.email,n=e.account_group,o=r.useRef(),i=[{component:r.createElement(ct,{platform:t,onConfirm:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.goNextStep()}})},{component:r.createElement(w,{confirm_label:(0,d.localize)("Confirm"),platform:t,onConfirm:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.goNextStep()},onCancel:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.goPrevStep()}})},{component:r.createElement(st,{platform:t,email:a,account_group:n})}];return r.createElement("div",{className:"cfd-trading-password"},r.createElement(s.MultiStep,{ref:o,steps:i}))};function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(a),!0).forEach((function(t){mt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function mt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ft(e,t,a,n,r,o,i){try{var l=e[o](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function pt(){return pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pt.apply(this,arguments)}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var vt=function(e){var t=e.count_from,a=void 0===t?60:t,n=e.onTimeout,o=gt(r.useState(a),2),i=o[0],l=o[1];return r.useEffect((function(){if(0!==i){var e=setTimeout((function(){l(i-1)}),1e3);return function(){return clearTimeout(e)}}return n(),function(){}}),[i]),r.createElement("span",{className:"countdown"},i)},bt=function(e){var t=e.sendVerifyEmail,a=e.account_type,n=e.account_group,o=e.server,i=e.password_type,l=gt(r.useState(!1),2),c=l[0],u=l[1],_=gt(r.useState(!1),2),m=_[0],f=_[1];return r.useEffect((function(){localStorage.setItem("cfd_reset_password_intent",[o,n,a].join(".")),localStorage.setItem("cfd_reset_password_type",i),t()}),[]),r.createElement("div",{className:"cfd-verification-email-sent"},r.createElement(s.Icon,{icon:"IcEmailSent",size:128}),r.createElement("h2",{className:"cfd-verification-email-sent__title"},r.createElement(d.Localize,{i18n_default_text:"We've sent you an email"})),r.createElement(s.Text,{as:"p",size:"xs",align:"center"},r.createElement(d.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!c&&r.createElement(s.Button,{className:"cfd-verification-email-sent__resend-button",primary:!0,onClick:function(){u(!0)}},r.createElement(d.Localize,{i18n_default_text:"Didn't receive the email?"})),c&&r.createElement(r.Fragment,null,r.createElement(s.Text,{as:"p",size:"xs",align:"center",weight:"bold",className:"cfd-verification-email-sent__title--sub"},r.createElement(d.Localize,{i18n_default_text:"Didn't receive the email?"})),r.createElement(s.Text,{as:"p",size:"xs",align:"center"},r.createElement(d.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),r.createElement(s.Button,{className:"cfd-verification-email-sent__resend-button",large:!0,primary:!0,disabled:m,onClick:function(){t(),f(!0)}},!m&&r.createElement(d.Localize,{i18n_default_text:"Resend email"}),m&&r.createElement(r.Fragment,null,r.createElement(d.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[r.createElement(vt,{key:0,onTimeout:function(){return f(!1)},count_from:60})]})))))},yt=function(e){var t=e.toggleModal,a=e.is_investor;return r.createElement("div",{className:"cfd-password-manager__success"},r.createElement(s.Icon,{icon:"IcPasswordUpdated",size:128}),r.createElement(s.Text,{as:"p",size:"xxs",align:"center"},a?r.createElement(d.Localize,{i18n_default_text:"Your investor password has been changed."}):r.createElement(d.Localize,{i18n_default_text:"Your password has been changed."})),r.createElement(s.Button,{onClick:t,className:"cfd-password-manager__success-btn",primary:!0,large:!0},r.createElement("p",{className:"dc-btn__text"},(0,d.localize)("OK"))))},wt=function(e){var t=e.multi_step_ref,a=e.steps;return r.createElement(s.MultiStep,{ref:t,steps:a,className:"cfd-password-manager",lbl_previous:(0,d.localize)("Back")})},Et=function(e){var t=e.error_message_investor,a=e.is_submit_success_investor,o=e.multi_step_ref,i=e.onSubmit,l=e.setPasswordType,c=e.toggleModal,_=e.validatePassword;return a?r.createElement(yt,{toggleModal:c,is_investor:!0}):r.createElement("div",{className:"cfd-password-manager__investor-wrapper"},r.createElement(s.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},r.createElement(d.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),r.createElement(s.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},r.createElement(d.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),t&&r.createElement(s.Text,{as:"p",color:"loss-danger",size:"xs",className:"cfd-password-manager--error-message"},t),r.createElement(n.J9,{initialValues:{old_password:"",new_password:"",password_type:"investor"},validate:_,onSubmit:i},(function(e){var t=e.isSubmitting,a=e.errors,i=e.setFieldTouched,c=e.values,_=e.touched;return r.createElement(n.l0,{className:"cfd-password-manager__investor-form",noValidate:!0},r.createElement(n.gN,{name:"old_password"},(function(e){var t=e.field;return r.createElement(s.PasswordInput,pt({},t,{autoComplete:"current-password",label:(0,d.localize)("Current investor password"),error:_.old_password&&a.old_password,required:!0}))})),r.createElement(n.gN,{name:"new_password"},(function(e){var t=e.field;return r.createElement(s.PasswordMeter,{input:t.value,has_error:!(!_.new_password||!a.new_password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return r.createElement(s.PasswordInput,pt({},t,{autoComplete:"new-password",label:(0,d.localize)("New investor password"),hint:!n&&(0,d.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:_.new_password&&a.new_password,onChange:function(e){i("new_password",!0,!0),t.onChange(e)},className:"cfd-password-manager__new-password",required:!0}))}))})),r.createElement("div",{className:"cfd-password-manager__actions"},r.createElement(s.Button,{className:"cfd-password-manager--button",is_disabled:t||!c.old_password||!c.new_password||Object.keys(a).length>0,is_loading:t,text:(0,d.localize)("Change investor password"),primary:!0,large:!0}),r.createElement(s.Button,{className:"cfd-password-manager--button",type:"button",onClick:function(){var e;l("investor"),null===(e=o.current)||void 0===e||e.goNextStep()},text:(0,d.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))},zt=function(e){var t=e.toggleModal,a=e.selected_login,n=e.email,o=e.setPasswordType,i=e.multi_step_ref,l=e.platform,c=e.onChangeActiveTabIndex,_=e.account_group,m=gt(r.useState(0),2),f=m[0],p=m[1],g=gt(r.useState(""),2),h=g[0],v=g[1],b=gt(r.useState(!1),2),y=b[0],w=b[1],E="calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",z=function(e){var t={};return(0,u.validLength)(e.new_password,{min:8,max:25})?(0,u.validPassword)(e.new_password)?e.new_password.toLowerCase()===n.toLowerCase()&&(t.new_password=(0,d.localize)("Your password cannot be the same as your email address.")):t.new_password=(0,u.getErrorMessages)().password():t.new_password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=(0,d.localize)("This field is required")),t},x=r.useCallback(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lt.default.changePassword(_t({login:a},t));case 4:(n=e.sent)?v(n):(v(""),w(!0));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){ft(o,n,r,i,l,"next",e)}function l(e){ft(o,n,r,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[a]),S=r.createElement(r.Fragment,null,r.createElement(s.DesktopWrapper,null,r.createElement(s.ThemedScrollbars,{height:E,is_bypassed:(0,u.isMobile)(),autohide:!1},r.createElement(ut,{toggleModal:t,platform:l,email:n,account_group:_}))),r.createElement(s.MobileWrapper,null,r.createElement(s.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},r.createElement(ut,{toggleModal:t,platform:l,email:n,account_group:_}))));return l===u.CFD_PLATFORMS.DXTRADE?S:r.createElement(s.Tabs,{active_index:f,onTabItemClick:function(e){p(e),c(e),v(""),w(!1)},top:!0},r.createElement("div",{label:(0,d.localize)("{{platform}} password",{platform:(0,u.getCFDPlatformLabel)(l)})},S),r.createElement("div",{label:(0,d.localize)("Investor password")},r.createElement(s.DesktopWrapper,null,r.createElement(s.ThemedScrollbars,{height:E},r.createElement(Et,{is_submit_success_investor:y,toggleModal:t,error_message_investor:h,validatePassword:z,onSubmit:x,setPasswordType:o,multi_step_ref:i}))),r.createElement(s.MobileWrapper,null,r.createElement(s.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},r.createElement(Et,{is_submit_success_investor:y,toggleModal:t,error_message_investor:h,validatePassword:z,onSubmit:x,setPasswordType:o,multi_step_ref:i})))))},xt=function(e){var t=e.enableApp,a=e.email,n=e.disableApp,o=e.is_visible,i=e.platform,l=e.selected_login,c=e.selected_account,_=e.toggleModal,m=e.selected_account_type,f=e.selected_account_group,p=e.selected_server,g=e.sendVerifyEmail,h=r.useRef(),v=gt(r.useState(0),2),b=v[0],y=v[1],w=gt(r.useState("main"),2),E=w[0],z=w[1];if(!l)return null;var x,S=[{component:r.createElement(zt,{email:a,selected_login:l,toggleModal:_,password_type:E,setPasswordType:z,multi_step_ref:h,platform:i,onChangeActiveTabIndex:function(e){y(e)},account_group:f})},{component:r.createElement(bt,{server:p,sendVerifyEmail:g,account_type:m,account_group:f,password_type:E})}];return r.createElement(r.Suspense,{fallback:r.createElement(s.UILoader,null)},r.createElement(s.DesktopWrapper,null,r.createElement(s.Modal,{className:"cfd-password-manager__modal",disableApp:n,enableApp:t,is_open:o,title:(x=b,0===x?(0,d.localize)("Manage {{platform}} password",{platform:(0,u.getCFDPlatformLabel)(i)}):"real"===f?(0,d.localize)("Manage {{platform}} Real {{account_title}} account password",{platform:(0,u.getCFDPlatformLabel)(i),account_title:c}):(0,d.localize)("Manage {{platform}} Demo {{account_title}} account password",{platform:(0,u.getCFDPlatformLabel)(i),account_title:c})),toggleModal:_,height:"688px",width:"904px",should_header_stick_body:!1},r.createElement(wt,{steps:S,multi_step_ref:h}))),r.createElement(s.MobileWrapper,null,r.createElement(s.PageOverlay,{is_open:o,portal_id:"deriv_app",header:function(e){return 0===e?(0,d.localize)("Manage {{platform}} password",{platform:(0,u.getCFDPlatformLabel)(i)}):(0,d.localize)("Manage password")}(b),onClickClose:_},r.createElement(wt,{steps:S,multi_step_ref:h}))))};xt.propTypes={email:m().string,is_visible:m().bool,selected_account:m().string,selected_server:m().string,selected_login:m().string,toggleModal:m().func,platform:m().string};const St=(0,y.$j)((function(e){var t=e.modules.cfd,a=e.client,n=e.ui;return{email:a.email,enableApp:n.enableApp,disableApp:n.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(xt),Mt=(0,y.$j)((function(e){var t=e.ui,a=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_in_progress:t.is_top_up_virtual_in_progress,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:a.cfd.current_account,dxtrade_companies:a.cfd.dxtrade_companies,mt5_companies:a.cfd.mt5_companies,topUpVirtual:a.cfd.topUpVirtual}}))((function(e){var t=e.dxtrade_companies,a=e.mt5_companies,n=e.current_account,o=e.closeSuccessTopUpModal,i=e.closeTopUpModal,l=e.is_top_up_virtual_open,c=e.is_top_up_virtual_in_progress,_=e.is_top_up_virtual_success,m=e.platform,f=e.topUpVirtual,p=r.useCallback((function(){return(a||t)&&n?a[n.category][n.type].title:""}),[a,t,n]),g=(0,u.getCFDPlatformLabel)(m);if(!a&&!t||!n)return null;var h=1e3,v=1e4;return r.createElement(r.Fragment,null,r.createElement(s.Modal,{toggleModal:i,is_open:l,className:"top-up-virtual",title:(0,d.localize)("Fund top up"),width:"384px"},r.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},r.createElement(s.Text,{as:"p",align:"center",size:"xxs",line_height:"xs",className:"dc-modal__container_top-up-virtual__description"},r.createElement(d.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[r.createElement(s.Money,{key:0,amount:v,currency:n.currency,show_currency:!0}),r.createElement(s.Money,{key:1,amount:h,currency:n.currency,show_currency:!0})]})),r.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},r.createElement(d.Localize,{i18n_default_text:"{{ platform }} {{ account_title }} account",values:{platform:g,account_title:p()}})),r.createElement("div",null,r.createElement(s.Text,{as:"p",align:"center",size:"xxs"},r.createElement(d.Localize,{i18n_default_text:"Current balance"})),r.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},r.createElement(s.Money,{amount:n.display_balance,currency:n.currency,has_sign:n.balance<0}))),r.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},r.createElement(s.Button,{is_disabled:n.balance>1e3||c,type:"button",is_loading:c,onClick:function(){return f(m)},primary:!0,large:!0},!c&&r.createElement(d.Localize,{i18n_default_text:"Top up  <0></0>",components:[r.createElement(s.Money,{key:0,amount:v,currency:n.currency,show_currency:!0})]}))))),r.createElement(b,{is_open:_,toggleModal:function(){o()},has_close_icon:!0,title:(0,d.localize)("Fund top up"),icon:r.createElement(s.Icon,{icon:"IcCashierWallet",size:128}),heading:r.createElement("h3",{className:"cfd-success-topup__heading"},r.createElement(d.Localize,{i18n_default_text:"<0></0> has been credited into your {{platform}} {{title}} account.",values:{platform:g,title:p()},components:[r.createElement(s.Money,{key:0,amount:v,currency:n.currency,show_currency:!0})]})),message:r.createElement("div",{className:"cfd-success-topup__description"},r.createElement("p",null,r.createElement(d.Localize,{i18n_default_text:"New current balance"})),r.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},r.createElement(s.Money,{amount:n.balance,currency:n.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))}));var Dt=["current_list","children","is_eu"];function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){Nt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var At=function(e){var t,a,n,r,o,i=e.current_list,l=e.children,s=e.is_eu,u=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Dt),d=localStorage.getItem("cfd_reset_password_intent"),_=localStorage.getItem("cfd_reset_password_type")||"main";if(d&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(d)&&i){var m=Ft(d.split("."),3);o=m[0],t=m[1],a=m[2],n=i["mt5.".concat(t,".").concat(a,"@").concat(o)].login,r=(0,c.o)(s)[t][a].title}else if(i){var f,p,g,h,v,b,y=Ft(Object.keys(i).pop().split("."),3);o=y[0],t=y[1],a=y[2],n=null!==(f=null===(p=i["mt5.".concat(t,".").concat(a,"@").concat(o)])||void 0===p?void 0:p.login)&&void 0!==f?f:"",r=null!==(g=null===(h=(0,c.o)(s))||void 0===h||null===(v=h[t])||void 0===v||null===(b=v[a])||void 0===b?void 0:b.title)&&void 0!==g?g:""}else n="",r="";return l(Ct({login:n,title:r,type:_},u))},kt=function(e){var t=e.current_list,a=e.email,o=e.is_cfd_reset_password_modal_enabled,i=e.is_eu,l=e.is_logged_in,c=e.platform,_=e.setCFDPasswordResetModal,m=e.history,f=Ft(r.useState({error_code:void 0,has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""}),2),p=f[0],g=f[1],h=function(){localStorage.removeItem("cfd_reset_password_intent"),localStorage.removeItem("cfd_reset_password_type"),localStorage.removeItem("cfd_reset_password_code"),m.push("".concat(u.routes.mt5))},v=function(e){var t={};return(0,u.validLength)(e.new_password,{min:8,max:25})?(0,u.validPassword)(e.new_password)||(t.new_password=(0,u.getErrorMessages)().password()):t.new_password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.new_password.toLowerCase()===a.toLowerCase()&&(t.new_password=(0,d.localize)("Your password cannot be the same as your email address.")),t},b=function(){return 0!==Object.keys(t).length},y=!b()&&localStorage.getItem("cfd_reset_password_code");return r.createElement(s.Modal,{className:"cfd-reset-password-modal",is_open:o&&!y,toggleModal:function(){return _(!1)},title:c===u.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Reset Deriv X investor password"):(0,d.localize)("Reset DMT5 investor password"),onMount:function(){return(0,u.redirectToLogin)(l,(0,d.getLanguage)(),!0)}},!b()&&!p.has_error&&r.createElement(s.Loading,{is_fullscreen:!1}),b()&&!p.has_error&&!p.is_finished&&r.createElement(At,{current_list:t,is_eu:i},(function(e){var t=e.type,a=e.login;return r.createElement(n.J9,{initialValues:{new_password:""},validate:v,onSubmit:function(e,n){return function(e,t,a,n){var r=n.setSubmitting;r(!0);var o={account_id:a,platform:u.CFD_PLATFORMS.MT5,new_password:e.new_password,verification_code:localStorage.getItem("cfd_reset_password_code")};u.WS.tradingPlatformInvestorPasswordReset(o).then((function(e){var a;!e.error||"InvalidToken"!==e.error.code&&"BadSession"!==e.error.code?(g(Ct(Ct({},p),{},{is_finished:!0,changed_password_type:t})),h()):(a=e.error,g(Ct(Ct({},p),{},{error_code:a.code,has_error:!0,error_message:a.message}))),r(!1)}))}(e,t,a,n)}},(function(e){var a=e.handleSubmit,n=e.errors,o=e.values,i=e.isSubmitting,l=e.handleChange,c=e.handleBlur,_=e.touched;return r.createElement("form",{autoComplete:"off",onSubmit:a},r.createElement("div",{className:"cfd-reset-password"},r.createElement("div",{className:"cfd-reset-password__container"},r.createElement("div",{className:"cfd-reset-password__password-area"},r.createElement(s.PasswordMeter,{input:o.new_password,has_error:!(!_.new_password||!n.new_password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},(function(e){var a=e.has_warning;return r.createElement(s.PasswordInput,{autoComplete:"new-password",className:"cfd-reset-password__password-field",name:"new_password",label:(0,d.localize)("New {{type}} password",{type:t}),onChange:l,onBlur:c,error:_.new_password&&n.new_password,value:o.new_password,"data-lpignore":"true",required:!0,hint:!a&&(0,d.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols.")})}))),i&&r.createElement(s.Loading,{is_fullscreen:!1}),!i&&r.createElement(s.FormSubmitButton,{is_disabled:i||!o.new_password||Object.keys(n).length>0,errors:n,is_center:!0,large:!0,label:(0,d.localize)("Create {{type}} password",{type:t})}))))}))})),p.has_error&&r.createElement("div",{className:"cfd-reset-password__error"},r.createElement(s.Icon,{icon:"IcMt5Expired",size:128}),r.createElement(s.Text,{as:"p",size:"xs",weight:"bold",align:"center",className:"cfd-reset-password__heading"},p.error_message),"InvalidToken"===p.error_code&&r.createElement(s.Text,{as:"p",color:"prominent",size:"xs",align:"center",className:"cfd-reset-password__description--is-centered"},r.createElement(d.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),r.createElement(s.Button,{primary:!0,large:!0,className:"cfd-reset-password__confirm-button",onClick:function(){h(),_(!1)}},r.createElement(d.Localize,{i18n_default_text:"Ok"}))),p.is_finished&&r.createElement("div",{className:"cfd-reset-password__success"},r.createElement(s.Icon,{icon:"IcMt5PasswordUpdated",size:128}),r.createElement("div",{className:"cfd-reset-password__description"},r.createElement(d.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===p.changed_password_type?(0,d.localize)("main"):(0,d.localize)("investor")}})),r.createElement(s.Button,{primary:!0,large:!0,onClick:function(){return _(!1)}},r.createElement(d.Localize,{i18n_default_text:"Ok"}))))};kt.propTypes={email:_.string,is_eu:_.bool,is_cfd_reset_password_modal_enabled:_.any,setCFDPasswordResetModal:_.any,current_list:_.any};const Ot=r.memo((0,B.withRouter)((0,y.$j)((function(e){var t=e.modules.cfd,a=e.client;return{email:a.email,is_eu:a.is_eu,is_cfd_reset_password_modal_enabled:t.is_cfd_reset_password_modal_enabled,setCFDPasswordResetModal:t.setCFDPasswordResetModal,current_list:t.current_list,is_logged_in:a.is_logged_in}}))(kt))),Lt=(0,y.$j)((function(e){var t=e.ui,a=e.client,n=e.modules.cfd;return{is_fully_authenticated:a.is_fully_authenticated,enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:n.closeCFDPendingDialog,is_cfd_pending_dialog_open:n.is_cfd_pending_dialog_open}}))((function(e){var t=e.enableApp,a=e.disableApp,n=e.toggleModal,o=e.is_cfd_pending_dialog_open,i=e.is_fully_authenticated;return r.createElement(s.Modal,{title:i?" ":(0,d.localize)("Thanks for submitting your documents!"),className:"cfd-pending-dialog",is_open:o,disableApp:a,enableApp:t,toggleModal:n,has_close_icon:!1,small:!0},r.createElement(s.Modal.Body,null,i?r.createElement(d.Localize,{i18n_default_text:"Your MT5 Financial STP account is almost ready, please set your password now."}):r.createElement(d.Localize,{i18n_default_text:"We’ll process your documents within 1-3 days. Once they are verified, we’ll notify you via email."})),r.createElement(s.Modal.Footer,null,r.createElement(s.Button,{has_effect:!0,text:(0,d.localize)("OK"),onClick:n,primary:!0})))})),jt={mt5:{real_synthetic_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("150+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("50+")}}},real_financial_stp_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("70+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("100+")}}},demo_financial_stp_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("70+")}}}},dxtrade:{real_synthetic_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("90+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("90+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("90+")}}}}};var It=a("../../node_modules/react-transition-group/esm/CSSTransition.js"),Rt=function(e){var t=e.text,a=e.className;return r.createElement("div",{className:a},r.createElement(s.Clipboard,{text_copy:t,info_message:(0,u.isMobile)()?"":(0,d.localize)("copy"),success_message:(0,d.localize)("copied!"),popoverAlignment:(0,u.isMobile)()?"left":"bottom"}))},Bt={mt5:{synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform",cfd:"IcMt5CfdPlatform"},dxtrade:{synthetic:"IcDxtradeSyntheticPlatform",financial:"IcDxtradeFinancialPlatform",cfd:"IcMt5CfdPlatform"}},Ut=r.forwardRef((function(e,t){var a=e.onSelectAccount,n=e.is_disabled;return r.createElement("div",{onClick:n?function(){}:a,className:p()("cfd-account-card__add-server",{"cfd-account-card__add-server--disabled":n}),ref:t},r.createElement("span",{className:"cfd-account-card__add-server--icon"},"+"),r.createElement(d.Localize,{i18n_default_text:"Add region"}))}));Ut.displayName="AddTradeServerButton";var Wt=function(e){var t=e.value,a=e.is_bold;return r.createElement("div",{className:"cfd-account-card__spec-box"},r.createElement(s.Text,{size:"xs",weight:a?"bold":"",className:"cfd-account-card__spec-text"},t),r.createElement(Rt,{text:t,className:"cfd-account-card__spec-copy"}))},Vt=function(e){var t=e.platform,a=e.onClick;return r.createElement("div",{className:"cfd-account-card__password-box"},r.createElement("div",{className:"cfd-account-card__password-text"},r.createElement(s.Popover,{alignment:"right",message:(0,d.localize)("Use these credentials to log in to your {{platform}} account on the website and mobile apps.",{platform:(0,u.getCFDPlatformLabel)(t)}),classNameBubble:"cfd-account-card__password-tooltip"},r.createElement(s.Text,{size:"xs"},"•••••••••••••••"))),r.createElement(s.Popover,{alignment:"bottom",message:(0,d.localize)("Change Password")},r.createElement(s.Button,{className:"cfd-account-card__password-action toolbar__btn--icon",transparent:!0,onClick:a,icon:r.createElement(s.Icon,{icon:"IcEdit",className:"da-article__learn-more-icon",custom_color:"var(--text-less-prominent)"})})))},Xt=function(e){var t=e.button_label,a=e.handleClickSwitchAccount,n=e.has_real_account,o=e.is_accounts_switcher_on,i=e.is_button_primary,l=e.is_disabled,c=e.is_virtual,_=e.onSelectAccount,m=e.type,f=e.platform,g=e.title;if(c&&"real"===m.category&&"function"==typeof a&&(f!==u.CFD_PLATFORMS.MT5||n&&"financial_stp"===m.type))return r.createElement("div",{className:"cfd-account-card__action-wrapper"},r.createElement(d.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a {{platform}} {{account_title}} account.</1>",values:{platform:(0,u.getCFDPlatformLabel)(f),account_title:g},components:[r.createElement("a",{className:p()("cfd-account-card__action-wrapper__link link link--orange",{"cfd-account-card__action-wrapper__link--disabled":o}),key:0,onClick:a}),r.createElement(s.Text,{key:1,line_height:"s",size:"xxs"})]}));var h="real"===m.category?r.createElement(d.Localize,{i18n_default_text:"Add real account"}):r.createElement(d.Localize,{i18n_default_text:"Add demo account"}),v=t||h;return r.createElement(s.Button,{className:"cfd-account-card__account-selection",onClick:_,type:"button",is_disabled:l,primary:i,secondary:!i,large:!0},v)},qt=function(e){var t,a,n,o,i,l=e.button_label,c=e.commission_message,_=e.descriptor,m=e.is_hovered,f=e.existing_data,g=e.has_banner,h=e.has_cfd_account,v=e.has_cfd_account_error,b=e.has_real_account,y=e.is_accounts_switcher_on,w=e.is_button_primary,E=e.is_disabled,z=e.is_logged_in,x=e.is_virtual,S=e.is_eu,M=e.onHover,D=e.platform,T=e.specs,C=e.title,N=e.type,F=e.onSelectAccount,P=e.onClickFund,A=e.onPasswordManager,k=e.should_show_trade_servers,O=e.toggleAccountsDialog,L=e.toggleShouldShowRealAccountsList,j=S?"cfd":N.type,I=N.type?r.createElement(s.Icon,{icon:Bt[N.platform][j],size:64}):null,R="synthetic"===N.type&&"real"===N.category&&(D!==u.CFD_PLATFORMS.MT5||!f),B="demo"===N.category,U=z&&f&&"real"===N.category&&"synthetic"===N.type&&(null==f?void 0:f.server_info),W="synthetic"===N.type&&"real"===N.category&&"mt5"===N.platform,V=null==f||null===(t=f.server_info)||void 0===t||null===(a=t.geolocation)||void 0===a?void 0:a.region,X=null==f||null===(n=f.server_info)||void 0===n?void 0:n.environment,q=r.useRef(null),$=r.useRef(null),H=r.useRef(null);r.useEffect((function(){var e=null==q?void 0:q.current,t=null==H?void 0:H.current;if(f){var a=function(){null==M||M(f.group)};return null==e||e.addEventListener("mouseenter",a),null==t||t.addEventListener("mouseenter",a),function(){null==e||e.removeEventListener("mouseenter",a),null==t||t.removeEventListener("mouseenter",(function(){return a}))}}return function(){}}),[M,f]);var Y,K,G,J,Z=r.useCallback((function(e){if(e){var t,a,n,r,o,i,l=null===(t=e.server_info)||void 0===t||null===(a=t.geolocation)||void 0===a?void 0:a.region;if(l)return"".concat(l," ").concat(1===(null==e||null===(n=e.server_info)||void 0===n||null===(r=n.geolocation)||void 0===r?void 0:r.sequence)?"":null==e||null===(o=e.server_info)||void 0===o||null===(i=o.geolocation)||void 0===i?void 0:i.sequence)}return""}),[]),Q=(0,u.isMobile)()&&D===u.CFD_PLATFORMS.DXTRADE,ee=D===u.CFD_PLATFORMS.MT5?r.createElement(r.Fragment,null,r.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},r.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},r.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Broker"))),r.createElement("td",{className:"cfd-account-card__login-specs-table-data"},r.createElement("div",{className:"cfd-account-card--paragraph"},r.createElement(Wt,{value:"Deriv Limited"})))),r.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},r.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},r.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Server"))),r.createElement("td",{className:"cfd-account-card__login-specs-table-data"},r.createElement("div",{className:"cfd-account-card--paragraph"},r.createElement(Wt,{value:null==f||null===(o=f.server_info)||void 0===o?void 0:o.environment})))),r.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},r.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},r.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Login ID"))),r.createElement("td",{className:"cfd-account-card__login-specs-table-data"},r.createElement("div",{className:"cfd-account-card--paragraph"},r.createElement(Wt,{value:null==f?void 0:f.display_login}))))):r.createElement(r.Fragment,null,r.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},r.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},r.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Username"))),r.createElement("td",{className:"cfd-account-card__login-specs-table-data"},r.createElement("div",{className:"cfd-account-card--paragraph"},r.createElement(Wt,{value:null==f?void 0:f.login,is_bold:!0})))));return r.createElement("div",{ref:$,className:"cfd-account-card__wrapper"},r.createElement("div",{className:p()("cfd-account-card",{"cfd-account-card__logged-out":!z}),ref:q,id:(K="",G="",J=X?X.toLowerCase():"",W&&V&&(K="-".concat(V.toLowerCase())),""!==J&&W&&(G=J.split("server")[1]),"".concat(N.category,"-").concat(N.type).concat(K).concat(G))},R&&r.createElement("div",{className:"cfd-account-card__banner"},r.createElement(d.Localize,{i18n_default_text:"Most popular"})),B&&r.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--demo"},r.createElement(d.Localize,{i18n_default_text:"DEMO"})),U&&r.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--server"},Z(f)),r.createElement("div",{className:p()("cfd-account-card__type",{"cfd-account-card__type--has-banner":g||R||U}),id:"".concat(D===u.CFD_PLATFORMS.DXTRADE?u.CFD_PLATFORMS.DXTRADE:u.CFD_PLATFORMS.MT5,"_").concat(N.category,"_").concat(N.type)},I,r.createElement("div",{className:"cfd-account-card__type--description"},r.createElement(s.Text,{size:"xxl",className:"cfd-account-card--heading"},C),(!f||!z)&&r.createElement("p",{className:"cfd-account-card--paragraph"},_),(null==f?void 0:f.display_balance)&&z&&r.createElement(s.Text,{size:"xxl",className:"cfd-account-card--balance"},r.createElement(s.Money,{amount:f.display_balance,currency:f.currency,has_sign:f.balance&&f.balance<0,show_currency:!0})),(null==f?void 0:f.display_login)&&z&&r.createElement(s.Text,{color:"less-prominent",size:"xxxs",line_height:"s"},null==f?void 0:f.display_login))),f&&r.createElement("div",{className:"cfd-account-card__divider"}),r.createElement("div",{className:"cfd-account-card__cta"},r.createElement("div",{className:"cfd-account-card__cta-wrapper"},null!=f&&f.login&&z?r.createElement(r.Fragment,null,r.createElement("div",{className:"cfd-account-card__login-specs"},r.createElement("table",{className:"cfd-account-card__login-specs-table"},r.createElement("tbody",null,ee,r.createElement("tr",{className:"cfd-account-card__login-specs-table-row cfd-account-card__login-specs-table-row--account-id"},r.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},r.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Password"))),r.createElement("td",{className:"cfd-account-card__login-specs-table-data"},r.createElement("div",{className:"cfd-account-card--paragraph"},r.createElement(Vt,{platform:D,onClick:function(){A(null==f?void 0:f.login,C,N.category,N.type,null==f?void 0:f.server)}})))))))):r.createElement("div",{className:"cfd-account-card__specs"},r.createElement("table",{className:"cfd-account-card__specs-table"},r.createElement("tbody",null,void 0!==T&&Object.keys(T).map((function(e,t){return r.createElement("tr",{key:t,className:"cfd-account-card__specs-table-row"},r.createElement("td",{className:"cfd-account-card__specs-table-attribute"},r.createElement("p",{className:"cfd-account-card--paragraph"},T[e].key())),r.createElement("td",{className:"cfd-account-card__specs-table-data"},r.createElement("p",{className:"cfd-account-card--paragraph"},T[e].value())))})),U&&f&&"synthetic"===N.type&&"real"===N.category&&r.createElement("tr",{key:f.server,className:"cfd-account-card__specs-table-row"},r.createElement("td",{className:"cfd-account-card__specs-table-attribute"},r.createElement("p",{className:"cfd-account-card--paragraph"},r.createElement(d.Localize,{i18n_default_text:"Trade server: "}))),r.createElement("td",{className:"cfd-account-card__specs-table-data"},r.createElement("p",{className:"cfd-account-card--paragraph"},Z(f))))))),(!f&&c||!z)&&r.createElement("div",{className:"cfd-account-card__commission"},r.createElement(s.Text,{as:"p",color:"general",size:"xs",styles:{margin:"1.6rem auto"}},c)),f&&z&&r.createElement("div",{className:"cfd-account-card__manage"},r.createElement(s.Button,{onClick:function(){return P(f)},type:"button",secondary:!0},"real"===N.category&&r.createElement(d.Localize,{i18n_default_text:"Fund transfer"}),"demo"===N.category&&r.createElement(d.Localize,{i18n_default_text:"Fund top up"}))),!f&&h&&r.createElement(s.Button,{className:"cfd-account-card__account-selection",onClick:F,type:"button"},r.createElement(d.Localize,{i18n_default_text:"Select"})),f&&z&&!Q&&r.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:D===u.CFD_PLATFORMS.DXTRADE?rt(N.category):ot({category:N.category,loginid:f.display_login,server_name:null==f||null===(i=f.server_info)||void 0===i?void 0:i.environment}),target:"_blank",rel:"noopener noreferrer"},r.createElement(d.Localize,{i18n_default_text:"Trade on web terminal"})),f&&z&&Q&&r.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:(Y=(0,u.mobileOSDetect)(),at("iOS"===Y?"ios":"android")),target:"_blank",rel:"noopener noreferrer"},r.createElement(d.Localize,{i18n_default_text:"Download the app"})),!f&&!h&&z&&r.createElement(Xt,{button_label:l,handleClickSwitchAccount:function(){null==L||L(!0),null==O||O(!0)},has_real_account:b,is_accounts_switcher_on:y,is_button_primary:w,is_disabled:E,is_virtual:x,onSelectAccount:F,type:N,platform:D,title:C}))),r.createElement(r.Fragment,null,k&&r.createElement(s.MobileWrapper,null,r.createElement(Ut,{ref:H,onSelectAccount:F,is_disabled:v})))),r.createElement(s.DesktopWrapper,null,r.createElement(It.Z,{in:m&&k,timeout:0,classNames:"cfd-account-card__add-server",unmountOnExit:!0},r.createElement(Ut,{ref:H,onSelectAccount:F,is_disabled:v}))))},$t=function(e){var t=e.is_eu,a=e.is_eu_country,n=e.has_maltainvest_account,o=e.has_cfd_account_error,i=e.openAccountNeededModal,l=e.standpoint,c=e.is_loading,s=e.is_logged_in,u=e.isSyntheticCardVisible,_=e.isFinancialCardVisible,m=e.isFinancialStpCardVisible,f=e.onSelectAccount,p=e.openAccountTransfer,g=e.platform,h=e.current_list,v=e.has_cfd_account,b=e.openPasswordManager,y=e.residence;console.log("current_list",h);var w=s&&t||!s&&a,E=r.useMemo((function(){var e=s&&t||!s&&a;return"au"===y?jt[g].au_real_financial_specs:e?jt[g].eu_real_financial_specs:jt[g].real_financial_specs}),[s,t,a,y,g]);return c?r.createElement("div",{className:"cfd-demo-accounts-display"},r.createElement(X.Z,null)):r.createElement("div",{className:"cfd-demo-accounts-display"},u("demo")&&r.createElement(qt,{has_cfd_account:v,title:(0,d.localize)("Synthetic"),type:{category:"demo",type:"synthetic",platform:g},is_disabled:o||l.malta,is_logged_in:s,existing_data:h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.synthetic"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){return f({category:"demo",type:"synthetic"})},onPasswordManager:b,onClickFund:function(){return p(h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.synthetic"))}))||""],{category:"demo",type:"synthetic"})},platform:g,descriptor:(0,d.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:jt[g].real_synthetic_specs,has_banner:!0}),_()&&r.createElement(qt,{has_cfd_account:v,title:w?(0,d.localize)("CFDs"):(0,d.localize)("Financial"),is_disabled:o,is_logged_in:s,is_eu:w,type:{category:"demo",type:"financial",platform:g},existing_data:h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){t&&!n&&l.iom?i("maltainvest",(0,d.localize)("Deriv Multipliers"),(0,d.localize)("demo CFDs")):f({category:"demo",type:"financial"})},onPasswordManager:b,onClickFund:function(){return p(h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial@"))}))||""],{category:"demo",type:"financial"})},platform:g,descriptor:Qe(g,w),specs:E,has_banner:!0}),m()&&r.createElement(qt,{has_cfd_account:v,title:(0,d.localize)("Financial STP"),type:{category:"demo",type:"financial_stp",platform:g},is_disabled:o,is_logged_in:s,existing_data:h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial_stp@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){return f({category:"demo",type:"financial_stp"})},onPasswordManager:b,onClickFund:function(){return p(h[Object.keys(h).find((function(e){return e.startsWith("".concat(g,".demo.financial_stp@"))}))||""],{category:"demo",type:"financial_stp"})},descriptor:(0,d.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:jt[g].demo_financial_stp_specs,platform:g,has_banner:!0}))};function Ht(e,t){if(e){if("string"==typeof e)return Yt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Yt(e,t):void 0}}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Kt=function(e){var t=e.has_real_account,a=e.is_accounts_switcher_on,n=e.is_eu,o=e.is_eu_country,i=e.has_malta_account,l=e.has_maltainvest_account,c=e.has_cfd_account_error,_=e.is_fully_authenticated,m=e.is_pending_authentication,f=e.is_virtual,g=e.isSyntheticCardVisible,h=e.isFinancialCardVisible,v=e.isFinancialStpCardVisible,b=e.landing_companies,y=e.onSelectAccount,w=e.openAccountTransfer,E=e.openPasswordModal,z=e.isAccountOfTypeDisabled,x=e.current_list,S=e.has_cfd_account,M=e.openPasswordManager,D=e.account_settings,T=e.openAccountNeededModal,C=e.platform,N=e.standpoint,F=e.is_logged_in,P=e.toggleAccountsDialog,A=e.toggleShouldShowRealAccountsList,k=e.can_have_more_real_synthetic_mt5,O=e.residence,L=e.residence_list,j=F&&!n&&t&&k&&C===u.CFD_PLATFORMS.MT5,I=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||Ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.useState(0),2),R=I[0],B=I[1],U=r.useMemo((function(){var e,t,a=D.citizen,n=D.tax_identification_number,r=D.tax_residence;return!!(a&&n&&r)||!(!a||!r)&&(null!==(e=null==b||null===(t=b.config)||void 0===t?void 0:t.tax_details_required)&&void 0!==e&&e||!L.filter((function(e){return e.value===r&&e.tin_format})).length)}),[D,L,b]),W=function(e,t,a){return e&&a?r.createElement(d.Localize,{i18n_default_text:"Set your password"}):t?r.createElement(d.Localize,{i18n_default_text:"Pending verification"}):r.createElement(d.Localize,{i18n_default_text:"Add real account"})}(_,m,U),V=F&&n||!F&&o,X=!t||m,q=r.useMemo((function(){var e=F&&n||!F&&o;return"au"===O?jt[C].au_real_financial_specs:e?jt[C].eu_real_financial_specs:jt[C].real_financial_specs}),[O,F,n,o,C]),$=function(){n&&N.malta&&!i?T("malta",(0,d.localize)("Deriv Synthetic"),(0,d.localize)("DMT5 Synthetic")):y({type:"synthetic",category:"real"})},H=function(e){return w(x[(0,u.getAccountListKey)(e,C)],{category:e.account_type,type:(0,u.getCFDAccountKey)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:C})})},Y=function(e){var t=Object.keys(x).filter((function(e){return e.startsWith("".concat(C,".real.synthetic"))}));B(t.findIndex((function(t){return x[t].group===e})))},K=function(e){if(c)return!0;if("synthetic"===e&&N.malta)return!0;if(n){var a=(0,u.getAccountTypeFields)({category:"real",type:e});return z(null==a?void 0:a.account_type)}switch(e){case"synthetic":case"financial":return!t;case"financial_stp":return X;default:return!1}},G=g("real")&&(Object.keys(x).some((function(e){return e.startsWith("".concat(C,".real.synthetic"))}))?Object.keys(x).filter((function(e){return e.startsWith("".concat(C,".real.synthetic"))})).reduce((function(e,t){return e.push(x[t]),e}),[]).map((function(e,t){return r.createElement(qt,{key:t,has_cfd_account:S,has_cfd_account_error:c,title:(0,d.localize)("Synthetic"),is_hovered:t===R,is_disabled:K("synthetic"),type:{category:"real",type:"synthetic",platform:C},is_logged_in:F,should_show_trade_servers:j,existing_data:e,commission_message:(0,d.localize)("No commission"),onSelectAccount:$,onPasswordManager:M,onClickFund:H,platform:C,descriptor:(0,d.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:jt[C].real_synthetic_specs,onHover:Y})})):[r.createElement(qt,{key:"real.synthetic",has_cfd_account:S,title:(0,d.localize)("Synthetic"),is_disabled:K("synthetic"),type:{category:"real",type:"synthetic",platform:C},is_logged_in:F,should_show_trade_servers:j,existing_data:void 0,commission_message:(0,d.localize)("No commission"),onSelectAccount:$,onPasswordManager:M,onClickFund:H,platform:C,descriptor:(0,d.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:jt[C].real_synthetic_specs,onHover:Y,is_virtual:f,toggleShouldShowRealAccountsList:A,toggleAccountsDialog:P})]),J=v()&&r.createElement(qt,{key:"real.financial_stp",has_cfd_account:S,title:(0,d.localize)("Financial STP"),type:{category:"real",type:"financial_stp",platform:C},is_logged_in:F,existing_data:x[Object.keys(x).find((function(e){return e.startsWith("".concat(C,".real.financial_stp@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};_&&U?E(e):(_||X)&&U||y(e)},button_label:W,is_button_primary:m,onPasswordManager:M,onClickFund:H,platform:C,descriptor:(0,d.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:jt[C].real_financial_stp_specs,is_disabled:K("financial_stp"),is_virtual:f,has_real_account:t,toggleAccountsDialog:P,toggleShouldShowRealAccountsList:A,is_accounts_switcher_on:a}),Z=h()&&r.createElement(qt,{key:"real.financial",has_cfd_account:S,is_disabled:K("financial"),title:V?(0,d.localize)("CFDs"):(0,d.localize)("Financial"),type:{category:"real",type:"financial",platform:C},existing_data:x[Object.keys(x).find((function(e){return e.startsWith("".concat(C,".real.financial@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){n&&!l?T("maltainvest",(0,d.localize)("Deriv Multipliers"),(0,d.localize)("real CFDs")):y({type:"financial",category:"real"})},onPasswordManager:M,onClickFund:H,platform:C,descriptor:Qe(C,V),specs:q,is_eu:V,is_logged_in:F,is_virtual:f,toggleShouldShowRealAccountsList:A,toggleAccountsDialog:P}),Q=[].concat(function(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(G||[]),[Z,J]).filter(Boolean);return r.createElement("div",{className:p()("cfd-real-accounts-display",{"cfd-real-accounts-display--has-trade-servers":j})},r.createElement(s.DesktopWrapper,null,r.createElement(s.Carousel,{list:Q,width:328,nav_position:"middle",show_bullet:!1,item_per_window:3,is_mt5:!0})),r.createElement(s.MobileWrapper,null,Q.map((function(e){return e}))))},Gt=["children","is_loading","loading_component"];function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Qt=function(e){var t=e.children,a=e.is_loading,n=e.loading_component,o=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Gt),i=n;return a?r.createElement(i,null):r.createElement(s.Tabs,o,t)};const ea=(0,o.withRouter)((0,y.$j)((function(e){var t=e.client,a=e.modules,n=e.ui;return{beginRealSignupForMt5:a.cfd.beginRealSignupForMt5,checkShouldOpenAccount:a.cfd.checkShouldOpenAccount,country:t.account_settings.residence,client_email:t.email_address,createCFDAccount:a.cfd.createCFDAccount,current_list:a.cfd.current_list,landing_companies:t.landing_companies,isAccountOfTypeDisabled:t.isAccountOfTypeDisabled,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,is_mt5_allowed:t.is_mt5_allowed,is_dxtrade_allowed:t.is_dxtrade_allowed,mt5_disabled_signup_types:t.mt5_disabled_signup_types,dxtrade_disabled_signup_types:t.dxtrade_disabled_signup_types,has_maltainvest_account:t.has_maltainvest_account,has_malta_account:t.has_malta_account,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,dxtrade_accounts_list_error:t.dxtrade_accounts_list_error,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:a.cfd.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:a.cfd.enableCFDPasswordModal,openAccountNeededModal:n.openAccountNeededModal,is_loading:t.is_populating_mt5_account_list,residence:t.residence,residence_list:t.residence_list,has_cfd_account:a.cfd.has_cfd_account,has_mt5_real_account_error:t.has_account_error_in_mt5_real_list,has_mt5_demo_account_error:t.has_account_error_in_mt5_demo_list,has_dxtrade_real_account_error:t.has_account_error_in_dxtrade_real_list,has_dxtrade_demo_account_error:t.has_account_error_in_dxtrade_demo_list,has_real_account:t.has_active_real_account,setAccountType:a.cfd.setAccountType,setCFDPasswordResetModal:a.cfd.setCFDPasswordResetModal,setCurrentAccount:a.cfd.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:a.cfd.toggleCompareAccountsModal,is_accounts_switcher_on:n.is_accounts_switcher_on,openTopUpModal:n.openTopUpModal,NotificationMessages:n.notification_messages_ui,onMount:a.cfd.onMount,onUnmount:a.cfd.onUnmount,toggleAccountsDialog:n.toggleAccountsDialog,toggleShouldShowRealAccountsList:n.toggleShouldShowRealAccountsList,can_have_more_real_synthetic_mt5:t.can_have_more_real_synthetic_mt5,upgradeable_landing_companies:t.upgradeable_landing_companies,is_dark_mode_on:n.is_dark_mode_on,disableApp:n.disableApp,enableApp:n.enableApp,is_reset_trading_password_modal_visible:n.is_reset_trading_password_modal_visible,toggleResetTradingPasswordModal:n.setResetTradingPasswordModalOpen,mt5_verification_code:t.verification_code.trading_platform_mt5_password_reset,dxtrade_verification_code:t.verification_code.trading_platform_dxtrade_password_reset}}))((function(e){var t=Jt(r.useState(!1),2),a=t[0],n=t[1],o=Jt(r.useState(!1),2),i=o[0],l=o[1],c=Jt(r.useState(0),2),_=c[0],m=c[1],f=Jt(r.useState(!0),2),p=f[0],g=f[1],h=Jt(r.useState(!1),2),v=h[0],b=h[1],y=Jt(r.useState({is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:"",selected_server:""}),2),w=y[0],E=y[1];r.useEffect((function(){return S(x()),z(),e.onMount(),function(){e.onUnmount()}}),[]),r.useEffect((function(){S(),e.checkShouldOpenAccount(),e.is_logged_in&&["demo","real"].forEach((function(e){var t=T(e)||C()||N();"real"===e&&i!==t&&l(t),"demo"===e&&a!==t&&n(t)})),e.is_logged_in||i&&a||(l(!0),n(!0))}));var z=function(){/reset-password/.test(e.location.hash)&&e.setCFDPasswordResetModal(!0)},x=function(){return i?0:a?1:e.location.hash?/demo/.test(e.location.hash)?1:0:void 0},S=function(e){if(e){var t={};1===e?t.is_demo_tab=!0:0===e&&(t.is_demo_tab=!1),_!==e&&(t.active_index=e),(0,u.isEmptyObject)(t)||(m(t.active_index),g(t.is_demo_tab))}},M=function(t,a){"real"===a.category?(sessionStorage.setItem("cfd_transfer_to_login_id",t.login),e.disableCFDPasswordModal(),e.history.push(u.routes.cashier_acc_transfer)):(e.setCurrentAccount(t,a),e.openTopUpModal())},D=function(e,t,a,n,r){E((function(o){return{is_visible:!o.is_visible,selected_login:"string"==typeof e?e:"",selected_account:"string"==typeof t?t:"",selected_account_group:a,selected_account_type:n,selected_server:r}}))},T=function(t){var a=e.current_list,n=e.platform,r=e.is_eu,o=e.is_eu_country,i=e.landing_companies,l=e.is_logged_in,c=Object.keys(a).some((function(e){return e.startsWith("".concat(n,".").concat(t,".synthetic"))}));return!(!l&&o)&&!(r&&!c)&&((0,u.isLandingCompanyEnabled)({landing_companies:i,platform:n,type:"gaming"})||!l)},C=function(){var t=e.platform,a=e.landing_companies;return!e.is_logged_in||(0,u.isLandingCompanyEnabled)({landing_companies:a,platform:t,type:"financial"})},N=function(){var t,a=e.platform,n=e.landing_companies,r=e.is_logged_in,o=e.is_eu_country;return!(!r&&o)&&((null==n||null===(t=n.mt_financial_company)||void 0===t?void 0:t.financial_stp)||!r)&&a===u.CFD_PLATFORMS.MT5},F=e.account_settings,P=e.account_status,A=e.beginRealSignupForMt5,k=e.country,O=e.createCFDAccount,L=e.current_list,j=e.dxtrade_accounts_list_error,U=e.isAccountOfTypeDisabled,X=e.is_accounts_switcher_on,$=e.is_dark_mode_on,H=e.is_eu,Y=e.is_eu_country,K=e.is_fully_authenticated,G=e.is_loading,J=e.is_logged_in,Z=e.is_logging_in,Q=e.is_mt5_allowed,ee=e.is_dxtrade_allowed,te=e.is_pending_authentication,ae=e.is_virtual,ne=e.landing_companies,re=e.has_malta_account,oe=e.has_maltainvest_account,ie=e.has_cfd_account,le=e.has_mt5_real_account_error,ce=e.has_mt5_demo_account_error,se=e.has_dxtrade_real_account_error,ue=e.has_dxtrade_demo_account_error,de=e.mt5_disabled_signup_types,_e=e.dxtrade_disabled_signup_types,me=e.has_real_account,fe=e.NotificationMessages,pe=e.platform,ge=e.openAccountNeededModal,he=e.residence,ve=e.residence_list,be=e.standpoint,ye=e.toggleAccountsDialog,we=e.toggleShouldShowRealAccountsList,Ee=e.can_have_more_real_synthetic_mt5,ze=e.upgradeable_landing_companies,xe=e.is_reset_trading_password_modal_visible,Se=e.toggleResetTradingPasswordModal,Me=e.enableApp,De=e.disableApp,Te=e.mt5_verification_code,Ce=e.dxtrade_verification_code,Ne=!H&&J&&!me&&(null==ze?void 0:ze.length)>0;if(!k&&J||Z)return r.createElement(s.Loading,null);var Fe=p?ce||de.demo:le||de.real,Pe=p?ue||_e.demo:se||_e.real,Ae=pe===u.CFD_PLATFORMS.MT5?Fe:Pe||!!j,ke=pe===u.CFD_PLATFORMS.MT5?Te:Ce;return pe!==u.CFD_PLATFORMS.DXTRADE||ee?J&&!ne||G?r.createElement(s.Loading,null):r.createElement(r.Fragment,null,Q||pe===u.CFD_PLATFORMS.DXTRADE||!J?r.createElement("div",{className:"cfd-dashboard__container"},r.createElement(fe,{is_mt5:!0,is_notification_loaded:v,stopNotificationLoading:function(){b(!0)}}),r.createElement("div",{className:"cfd-dashboard"},r.createElement("div",{className:"cfd-dashboard__welcome-message"},r.createElement("h1",{className:"cfd-dashboard__welcome-message--heading"},function(e,t){return t===u.CFD_PLATFORMS.DXTRADE?e?(0,d.localize)("Welcome to your Deriv X dashboard"):(0,d.localize)("Welcome to Deriv X"):t===u.CFD_PLATFORMS.MT5?(0,d.localize)("Welcome to Deriv MT5 (DMT5) dashboard"):(0,d.localize)("")}(J,pe))),J&&Ae&&r.createElement("div",{className:"cfd-dashboard__accounts-error"},r.createElement(s.Text,{as:"p",className:"cfd-dashboard__accounts-error-message",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},r.createElement(d.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:(0,u.getCFDPlatformLabel)(pe)}}))),r.createElement("div",{className:"cfd-dashboard__accounts-display"},r.createElement(St,{is_visible:w.is_visible,platform:pe,selected_login:w.selected_login,selected_account:w.selected_account,selected_account_group:w.selected_account_group,selected_account_type:w.selected_account_type,selected_server:w.selected_server,toggleModal:D}),r.createElement(Qt,{active_index:_,top:!0,center:!0,is_loading:G,is_logged_in:J,loading_component:q,onTabItemClick:S,should_update_hash:!0},i&&r.createElement("div",{label:(0,d.localize)("Real account"),"data-hash":"real"},r.createElement(r.Fragment,null,Ne&&r.createElement(V,{onClickSignup:A,platform:pe}),r.createElement(Kt,{is_accounts_switcher_on:X,is_eu:H,is_eu_country:Y,is_logged_in:J,has_maltainvest_account:oe,has_malta_account:re,has_cfd_account_error:pe===u.CFD_PLATFORMS.MT5?de.real:_e.real||!!j,openAccountNeededModal:ge,current_list:L,account_status:P,has_cfd_account:ie,onSelectAccount:O,account_settings:F,landing_companies:ne,is_pending_authentication:te,is_fully_authenticated:K,is_virtual:ae,isSyntheticCardVisible:T,isFinancialCardVisible:C,isFinancialStpCardVisible:N,openAccountTransfer:M,openPasswordManager:D,openPasswordModal:function(t){e.setAccountType(t),e.openPasswordModal()},platform:pe,isAccountOfTypeDisabled:U,has_real_account:me,standpoint:be,toggleAccountsDialog:ye,toggleShouldShowRealAccountsList:we,can_have_more_real_synthetic_mt5:Ee,residence:he,residence_list:ve}))),a&&r.createElement("div",{label:(0,d.localize)("Demo account"),"data-hash":"demo"},r.createElement($t,{is_eu:H,is_eu_country:Y,is_logged_in:J,has_maltainvest_account:oe,has_cfd_account_error:pe===u.CFD_PLATFORMS.MT5?de.demo:_e.demo||!!j,openAccountNeededModal:ge,standpoint:be,is_loading:G,isSyntheticCardVisible:T,isFinancialCardVisible:C,isFinancialStpCardVisible:N,has_cfd_account:ie,current_list:L,onSelectAccount:O,landing_companies:ne,openAccountTransfer:M,openPasswordManager:D,platform:pe,residence:he}))),r.createElement(Ze,{platform:pe}),r.createElement("div",{className:"cfd-dashboard__maintenance"},r.createElement(s.Icon,{icon:"IcAlertWarning",size:(0,u.isMobile)()?28:16,className:"cfd-dashboard__maintenance-icon"}),r.createElement("div",{className:"cfd-dashboard__maintenance-text"},pe===u.CFD_PLATFORMS.DXTRADE&&r.createElement(d.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. Service may be disrupted during this time."}),pe===u.CFD_PLATFORMS.MT5&&r.createElement(d.Localize,{i18n_default_text:"Server maintenance starting 01:00 GMT every Sunday. This process may take up to 2 hours to complete. Service may be disrupted during this time."})))),r.createElement(s.DesktopWrapper,null,r.createElement(it,{platform:pe,active_index:_,is_dark_mode_on:$})),r.createElement(s.MobileWrapper,null,r.createElement("div",{className:"cfd-dashboard__download-center"},r.createElement("h1",{className:"cfd-dashboard__download-center--heading"},pe===u.CFD_PLATFORMS.MT5&&r.createElement(d.Localize,{i18n_default_text:"Download the MT5 app"}),pe===u.CFD_PLATFORMS.DXTRADE&&r.createElement(d.Localize,{i18n_default_text:"Download the Deriv X app"})),r.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},r.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},pe===u.CFD_PLATFORMS.MT5&&r.createElement(r.Fragment,null,r.createElement(s.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),r.createElement(s.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),pe===u.CFD_PLATFORMS.DXTRADE&&r.createElement(r.Fragment,null,r.createElement(s.Icon,{icon:"IcDxtradeDeviceTablet",width:133,height:106}),r.createElement(s.Icon,{icon:"IcDxtradeDevicePhone",width:48,height:74}))),r.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},r.createElement("a",{href:pe===u.CFD_PLATFORMS.MT5?nt("android"):at("android"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),r.createElement("a",{href:pe===u.CFD_PLATFORMS.MT5?nt("ios"):at("ios"),target:"_blank",rel:"noopener noreferrer"},r.createElement(s.Icon,{icon:"IcInstallationApple",width:135,height:40})))))),r.createElement(Mt,{platform:pe}),r.createElement(I,{platform:pe,has_suspended_account:Ae}),r.createElement(R,null),pe===u.CFD_PLATFORMS.MT5&&r.createElement(r.Fragment,null,r.createElement(Ue,null),r.createElement(Lt,null)),r.createElement(Ot,{platform:pe}),r.createElement(W(),{platform:pe,enableApp:Me,disableApp:De,toggleResetTradingPasswordModal:Se,is_visible:xe,is_loading:G,verification_code:ke}))):r.createElement(s.PageError,{buttonSize:"medium",header:r.createElement(d.Localize,{i18n_default_text:"DMT5 is not available in {{country}}",values:{country:F.residence},components:[r.createElement("br",{key:0})]}),messages:[r.createElement(d.Localize,{key:0,i18n_default_text:"Please explore our other platforms."})],redirect_urls:[u.routes.trade,u.routes.bot],redirect_labels:[r.createElement(d.Localize,{key:0,i18n_default_text:"Explore DTrader"}),r.createElement(d.Localize,{key:1,i18n_default_text:"Explore DBot"})]})):r.createElement(B.Redirect,{to:u.routes.mt5})})))},"./src/templates/_common/components/loading.tsx":(e,t,a)=>{a.d(t,{Z:()=>i});var n=a("../../node_modules/classnames/index.js"),r=a.n(n),o=a("react");const i=function(e){var t=e.className,a=e.is_invisible,n=e.theme,i=e.id;return o.createElement("div",{id:i,className:r()("barspinner","barspinner--".concat(n||"dark"),{invisible:a},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);